/*! For license information please see main.baa3e15b.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,s,t)=>{e.exports=t(202)},153:(e,s,t)=>{var a=t(43),n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,s,t){var a,r={},c=null,d=null;for(a in void 0!==t&&(c=""+t),void 0!==s.key&&(c=""+s.key),void 0!==s.ref&&(d=s.ref),s)i.call(s,a)&&!o.hasOwnProperty(a)&&(r[a]=s[a]);if(e&&e.defaultProps)for(a in s=e.defaultProps)void 0===r[a]&&(r[a]=s[a]);return{$$typeof:n,type:e,key:c,ref:d,props:r,_owner:l.current}}s.Fragment=r,s.jsx=c,s.jsxs=c},202:(e,s)=>{var t=Symbol.for("react.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),h=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,f={};function b(e,s,t){this.props=e,this.context=s,this.refs=f,this.updater=t||p}function v(){}function g(e,s,t){this.props=e,this.context=s,this.refs=f,this.updater=t||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,s){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,s,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=b.prototype;var j=g.prototype=new v;j.constructor=g,x(j,b.prototype),j.isPureReactComponent=!0;var y=Array.isArray,N=Object.prototype.hasOwnProperty,w={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,s,a){var n,r={},i=null,l=null;if(null!=s)for(n in void 0!==s.ref&&(l=s.ref),void 0!==s.key&&(i=""+s.key),s)N.call(s,n)&&!k.hasOwnProperty(n)&&(r[n]=s[n]);var o=arguments.length-2;if(1===o)r.children=a;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];r.children=c}if(e&&e.defaultProps)for(n in o=e.defaultProps)void 0===r[n]&&(r[n]=o[n]);return{$$typeof:t,type:e,key:i,ref:l,props:r,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===t}var T=/\/+/g;function P(e,s){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var s={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return s[e]})}(""+e.key):s.toString(36)}function R(e,s,n,r,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case t:case a:o=!0}}if(o)return i=i(o=e),e=""===r?"."+P(o,0):r,y(i)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),R(i,s,n,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,s){return{$$typeof:t,type:e.type,key:s,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),s.push(i)),1;if(o=0,r=""===r?".":r+":",y(e))for(var c=0;c<e.length;c++){var d=r+P(l=e[c],c);o+=R(l,s,n,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=h&&e[h]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=R(l=l.value,s,n,d=r+P(l,c++),i);else if("object"===l)throw s=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===s?"object with keys {"+Object.keys(e).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return o}function E(e,s,t){if(null==e)return e;var a=[],n=0;return R(e,a,"","",function(e){return s.call(t,e,n++)}),a}function _(e){if(-1===e._status){var s=e._result;(s=s()).then(function(s){0!==e._status&&-1!==e._status||(e._status=1,e._result=s)},function(s){0!==e._status&&-1!==e._status||(e._status=2,e._result=s)}),-1===e._status&&(e._status=0,e._result=s)}if(1===e._status)return e._result.default;throw e._result}var A={current:null},D={transition:null},L={ReactCurrentDispatcher:A,ReactCurrentBatchConfig:D,ReactCurrentOwner:w};function O(){throw Error("act(...) is not supported in production builds of React.")}s.Children={map:E,forEach:function(e,s,t){E(e,function(){s.apply(this,arguments)},t)},count:function(e){var s=0;return E(e,function(){s++}),s},toArray:function(e){return E(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},s.Component=b,s.Fragment=n,s.Profiler=i,s.PureComponent=g,s.StrictMode=r,s.Suspense=d,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,s.act=O,s.cloneElement=function(e,s,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=x({},e.props),r=e.key,i=e.ref,l=e._owner;if(null!=s){if(void 0!==s.ref&&(i=s.ref,l=w.current),void 0!==s.key&&(r=""+s.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in s)N.call(s,c)&&!k.hasOwnProperty(c)&&(n[c]=void 0===s[c]&&void 0!==o?o[c]:s[c])}var c=arguments.length-2;if(1===c)n.children=a;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];n.children=o}return{$$typeof:t,type:e.type,key:r,ref:i,props:n,_owner:l}},s.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},s.createElement=S,s.createFactory=function(e){var s=S.bind(null,e);return s.type=e,s},s.createRef=function(){return{current:null}},s.forwardRef=function(e){return{$$typeof:c,render:e}},s.isValidElement=C,s.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:_}},s.memo=function(e,s){return{$$typeof:u,type:e,compare:void 0===s?null:s}},s.startTransition=function(e){var s=D.transition;D.transition={};try{e()}finally{D.transition=s}},s.unstable_act=O,s.useCallback=function(e,s){return A.current.useCallback(e,s)},s.useContext=function(e){return A.current.useContext(e)},s.useDebugValue=function(){},s.useDeferredValue=function(e){return A.current.useDeferredValue(e)},s.useEffect=function(e,s){return A.current.useEffect(e,s)},s.useId=function(){return A.current.useId()},s.useImperativeHandle=function(e,s,t){return A.current.useImperativeHandle(e,s,t)},s.useInsertionEffect=function(e,s){return A.current.useInsertionEffect(e,s)},s.useLayoutEffect=function(e,s){return A.current.useLayoutEffect(e,s)},s.useMemo=function(e,s){return A.current.useMemo(e,s)},s.useReducer=function(e,s,t){return A.current.useReducer(e,s,t)},s.useRef=function(e){return A.current.useRef(e)},s.useState=function(e){return A.current.useState(e)},s.useSyncExternalStore=function(e,s,t){return A.current.useSyncExternalStore(e,s,t)},s.useTransition=function(){return A.current.useTransition()},s.version="18.3.1"},210:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const n=a(t(829)),r=a(t(736)),i=t(745);class l{constructor(e){let{headers:s={},schema:t,fetch:a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=Object.assign(Object.assign({},i.DEFAULT_HEADERS),s),this.schemaName=t,this.fetch=a}from(e){const s=new URL(`${this.url}/${e}`);return new n.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new l(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let s,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:a=!1,get:n=!1,count:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=new URL(`${this.url}/rpc/${e}`);let o;a||n?(s=a?"HEAD":"GET",Object.entries(t).filter(e=>{let[s,t]=e;return void 0!==t}).map(e=>{let[s,t]=e;return[s,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]}).forEach(e=>{let[s,t]=e;l.searchParams.append(s,t)})):(s="POST",o=t);const c=Object.assign({},this.headers);return i&&(c.Prefer=`count=${i}`),new r.default({method:s,url:l,headers:c,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}}s.default=l},234:(e,s)=>{function t(e,s){var t=e.length;e.push(s);e:for(;0<t;){var a=t-1>>>1,n=e[a];if(!(0<r(n,s)))break e;e[a]=s,e[t]=n,t=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var s=e[0],t=e.pop();if(t!==s){e[0]=t;e:for(var a=0,n=e.length,i=n>>>1;a<i;){var l=2*(a+1)-1,o=e[l],c=l+1,d=e[c];if(0>r(o,t))c<n&&0>r(d,o)?(e[a]=d,e[c]=t,a=c):(e[a]=o,e[l]=t,a=l);else{if(!(c<n&&0>r(d,t)))break e;e[a]=d,e[c]=t,a=c}}}return s}function r(e,s){var t=e.sortIndex-s.sortIndex;return 0!==t?t:e.id-s.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;s.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();s.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,h=3,p=!1,x=!1,f=!1,b="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,g="undefined"!==typeof setImmediate?setImmediate:null;function j(e){for(var s=a(d);null!==s;){if(null===s.callback)n(d);else{if(!(s.startTime<=e))break;n(d),s.sortIndex=s.expirationTime,t(c,s)}s=a(d)}}function y(e){if(f=!1,j(e),!x)if(null!==a(c))x=!0,D(N);else{var s=a(d);null!==s&&L(y,s.startTime-e)}}function N(e,t){x=!1,f&&(f=!1,v(C),C=-1),p=!0;var r=h;try{for(j(t),m=a(c);null!==m&&(!(m.expirationTime>t)||e&&!R());){var i=m.callback;if("function"===typeof i){m.callback=null,h=m.priorityLevel;var l=i(m.expirationTime<=t);t=s.unstable_now(),"function"===typeof l?m.callback=l:m===a(c)&&n(c),j(t)}else n(c);m=a(c)}if(null!==m)var o=!0;else{var u=a(d);null!==u&&L(y,u.startTime-t),o=!1}return o}finally{m=null,h=r,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,k=!1,S=null,C=-1,T=5,P=-1;function R(){return!(s.unstable_now()-P<T)}function E(){if(null!==S){var e=s.unstable_now();P=e;var t=!0;try{t=S(!0,e)}finally{t?w():(k=!1,S=null)}}else k=!1}if("function"===typeof g)w=function(){g(E)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,A=_.port2;_.port1.onmessage=E,w=function(){A.postMessage(null)}}else w=function(){b(E,0)};function D(e){S=e,k||(k=!0,w())}function L(e,t){C=b(function(){e(s.unstable_now())},t)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(e){e.callback=null},s.unstable_continueExecution=function(){x||p||(x=!0,D(N))},s.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},s.unstable_getCurrentPriorityLevel=function(){return h},s.unstable_getFirstCallbackNode=function(){return a(c)},s.unstable_next=function(e){switch(h){case 1:case 2:case 3:var s=3;break;default:s=h}var t=h;h=s;try{return e()}finally{h=t}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(e,s){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var t=h;h=e;try{return s()}finally{h=t}},s.unstable_scheduleCallback=function(e,n,r){var i=s.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?i+r:i:r=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:r,expirationTime:l=r+l,sortIndex:-1},r>i?(e.sortIndex=r,t(d,e),null===a(c)&&e===a(d)&&(f?(v(C),C=-1):f=!0,L(y,r-i))):(e.sortIndex=l,t(c,e),x||p||(x=!0,D(N))),e},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(e){var s=h;return function(){var t=h;h=s;try{return e.apply(this,arguments)}finally{h=t}}}},286:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const n=a(t(630)),r=a(t(611));s.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=n.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let t=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var s,t,a;let n=null,i=null,l=null,o=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const s=await e.text();""===s||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?s:JSON.parse(s))}const a=null===(s=this.headers.Prefer)||void 0===s?void 0:s.match(/count=(exact|planned|estimated)/),r=null===(t=e.headers.get("content-range"))||void 0===t?void 0:t.split("/");a&&r&&r.length>1&&(l=parseInt(r[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(n={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,l=null,o=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const s=await e.text();try{n=JSON.parse(s),Array.isArray(n)&&404===e.status&&(i=[],n=null,o=200,c="OK")}catch(d){404===e.status&&""===s?(o=204,c="No Content"):n={message:s}}if(n&&this.isMaybeSingle&&(null===(a=null===n||void 0===n?void 0:n.details)||void 0===a?void 0:a.includes("0 rows"))&&(n=null,o=200,c="OK"),n&&this.shouldThrowOnError)throw new r.default(n)}return{error:n,data:i,count:l,status:o,statusText:c}});return this.shouldThrowOnError||(t=t.catch(e=>{var s,t,a;return{error:{message:`${null!==(s=null===e||void 0===e?void 0:e.name)&&void 0!==s?s:"FetchError"}: ${null===e||void 0===e?void 0:e.message}`,details:`${null!==(t=null===e||void 0===e?void 0:e.stack)&&void 0!==t?t:""}`,hint:"",code:`${null!==(a=null===e||void 0===e?void 0:e.code)&&void 0!==a?a:""}`},data:null,count:null,status:0,statusText:""}})),t.then(e,s)}returns(){return this}overrideTypes(){return this}}},374:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const n=a(t(286));class r extends n.default{select(e){let s=!1;const t=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)).join("");return this.url.searchParams.set("select",t),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e){let{ascending:s=!0,nullsFirst:t,foreignTable:a,referencedTable:n=a}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=n?`${n}.order`:"order",i=this.url.searchParams.get(r);return this.url.searchParams.set(r,`${i?`${i},`:""}${e}.${s?"asc":"desc"}${void 0===t?"":t?".nullsfirst":".nullslast"}`),this}limit(e){let{foreignTable:s,referencedTable:t=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a="undefined"===typeof t?"limit":`${t}.limit`;return this.url.searchParams.set(a,`${e}`),this}range(e,s){let{foreignTable:t,referencedTable:a=t}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n="undefined"===typeof a?"offset":`${a}.offset`,r="undefined"===typeof a?"limit":`${a}.limit`;return this.url.searchParams.set(n,`${e}`),this.url.searchParams.set(r,""+(s-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain(){let{analyze:e=!1,verbose:s=!1,settings:t=!1,buffers:a=!1,wal:n=!1,format:r="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const l=[e?"analyze":null,s?"verbose":null,t?"settings":null,a?"buffers":null,n?"wal":null].filter(Boolean).join("|"),o=null!==(i=this.headers.Accept)&&void 0!==i?i:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${r}; for="${o}"; options=${l};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}s.default=r},391:(e,s,t)=>{var a=t(950);s.createRoot=a.createRoot,s.hydrateRoot=a.hydrateRoot},400:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.version=void 0,s.version="0.0.0-automated"},579:(e,s,t)=>{e.exports=t(153)},611:(e,s)=>{Object.defineProperty(s,"__esModule",{value:!0});class t extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}s.default=t},630:(e,s,t)=>{t.r(s),t.d(s,{Headers:()=>i,Request:()=>l,Response:()=>o,default:()=>r,fetch:()=>n});var a=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof t.g)return t.g;throw new Error("unable to locate global object")}();const n=a.fetch,r=a.fetch.bind(a),i=a.Headers,l=a.Request,o=a.Response},730:(e,s,t)=>{var a=t(43),n=t(853);function r(e){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)s+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,s){c(e,s),c(e+"Capture",s)}function c(e,s){for(l[e]=s,e=0;e<s.length;e++)i.add(s[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function x(e,s,t,a,n,r,i){this.acceptsBooleans=2===s||3===s||4===s,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=t,this.propertyName=e,this.type=s,this.sanitizeURL=r,this.removeEmptyString=i}var f={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){f[e]=new x(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var s=e[0];f[s]=new x(s,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){f[e]=new x(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){f[e]=new x(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){f[e]=new x(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){f[e]=new x(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){f[e]=new x(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){f[e]=new x(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){f[e]=new x(e,5,!1,e.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function g(e,s,t,a){var n=f.hasOwnProperty(s)?f[s]:null;(null!==n?0!==n.type:a||!(2<s.length)||"o"!==s[0]&&"O"!==s[0]||"n"!==s[1]&&"N"!==s[1])&&(function(e,s,t,a){if(null===s||"undefined"===typeof s||function(e,s,t,a){if(null!==t&&0===t.type)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==t?!t.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,s,t,a))return!0;if(a)return!1;if(null!==t)switch(t.type){case 3:return!s;case 4:return!1===s;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}(s,t,n,a)&&(t=null),a||null===n?function(e){return!!u.call(p,e)||!u.call(h,e)&&(m.test(e)?p[e]=!0:(h[e]=!0,!1))}(s)&&(null===t?e.removeAttribute(s):e.setAttribute(s,""+t)):n.mustUseProperty?e[n.propertyName]=null===t?3!==n.type&&"":t:(s=n.attributeName,a=n.attributeNamespace,null===t?e.removeAttribute(s):(t=3===(n=n.type)||4===n&&!0===t?"":""+t,a?e.setAttributeNS(a,s,t):e.setAttribute(s,t))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var s=e.replace(b,v);f[s]=new x(s,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var s=e.replace(b,v);f[s]=new x(s,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var s=e.replace(b,v);f[s]=new x(s,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!1,!1)}),f.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){f[e]=new x(e,1,!1,e.toLowerCase(),null,!0,!0)});var j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=Symbol.for("react.element"),N=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function O(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var I,M=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(t){var s=t.stack.trim().match(/\n( *(at )?)/);I=s&&s[1]||""}return"\n"+I+e}var $=!1;function z(e,s){if(!e||$)return"";$=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(c){var a=c}Reflect.construct(e,[],s)}else{try{s.call()}catch(c){a=c}e.call(s.prototype)}else{try{throw Error()}catch(c){a=c}e()}}catch(c){if(c&&a&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),r=a.stack.split("\n"),i=n.length-1,l=r.length-1;1<=i&&0<=l&&n[i]!==r[l];)l--;for(;1<=i&&0<=l;i--,l--)if(n[i]!==r[l]){if(1!==i||1!==l)do{if(i--,0>--l||n[i]!==r[l]){var o="\n"+n[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{$=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?F(e):""}function H(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case N:return"Portal";case S:return"Profiler";case k:return"StrictMode";case R:return"Suspense";case E:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case P:var s=e.render;return(e=e.displayName)||(e=""!==(e=s.displayName||s.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(s=e.displayName||null)?s:U(e.type)||"Memo";case A:s=e._payload,e=e._init;try{return U(e(s))}catch(t){}}return null}function q(e){var s=e.type;switch(e.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=s.render).displayName||e.name||"",s.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(s);case 8:return s===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof s)return s.displayName||s.name||null;if("string"===typeof s)return s}return null}function B(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var s=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===s||"radio"===s)}function V(e){e._valueTracker||(e._valueTracker=function(e){var s=W(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,s),a=""+e[s];if(!e.hasOwnProperty(s)&&"undefined"!==typeof t&&"function"===typeof t.get&&"function"===typeof t.set){var n=t.get,r=t.set;return Object.defineProperty(e,s,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,s,{enumerable:t.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[s]}}}}(e))}function J(e){if(!e)return!1;var s=e._valueTracker;if(!s)return!0;var t=s.getValue(),a="";return e&&(a=W(e)?e.checked?"true":"false":e.value),(e=a)!==t&&(s.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(s){return e.body}}function K(e,s){var t=s.checked;return M({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=t?t:e._wrapperState.initialChecked})}function Y(e,s){var t=null==s.defaultValue?"":s.defaultValue,a=null!=s.checked?s.checked:s.defaultChecked;t=B(null!=s.value?s.value:t),e._wrapperState={initialChecked:a,initialValue:t,controlled:"checkbox"===s.type||"radio"===s.type?null!=s.checked:null!=s.value}}function Q(e,s){null!=(s=s.checked)&&g(e,"checked",s,!1)}function X(e,s){Q(e,s);var t=B(s.value),a=s.type;if(null!=t)"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");s.hasOwnProperty("value")?ee(e,s.type,t):s.hasOwnProperty("defaultValue")&&ee(e,s.type,B(s.defaultValue)),null==s.checked&&null!=s.defaultChecked&&(e.defaultChecked=!!s.defaultChecked)}function Z(e,s,t){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var a=s.type;if(!("submit"!==a&&"reset"!==a||void 0!==s.value&&null!==s.value))return;s=""+e._wrapperState.initialValue,t||s===e.value||(e.value=s),e.defaultValue=s}""!==(t=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==t&&(e.name=t)}function ee(e,s,t){"number"===s&&G(e.ownerDocument)===e||(null==t?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var se=Array.isArray;function te(e,s,t,a){if(e=e.options,s){s={};for(var n=0;n<t.length;n++)s["$"+t[n]]=!0;for(t=0;t<e.length;t++)n=s.hasOwnProperty("$"+e[t].value),e[t].selected!==n&&(e[t].selected=n),n&&a&&(e[t].defaultSelected=!0)}else{for(t=""+B(t),s=null,n=0;n<e.length;n++){if(e[n].value===t)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==s||e[n].disabled||(s=e[n])}null!==s&&(s.selected=!0)}}function ae(e,s){if(null!=s.dangerouslySetInnerHTML)throw Error(r(91));return M({},s,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,s){var t=s.value;if(null==t){if(t=s.children,s=s.defaultValue,null!=t){if(null!=s)throw Error(r(92));if(se(t)){if(1<t.length)throw Error(r(93));t=t[0]}s=t}null==s&&(s=""),t=s}e._wrapperState={initialValue:B(t)}}function re(e,s){var t=B(s.value),a=B(s.defaultValue);null!=t&&((t=""+t)!==e.value&&(e.value=t),null==s.defaultValue&&e.defaultValue!==t&&(e.defaultValue=t)),null!=a&&(e.defaultValue=""+a)}function ie(e){var s=e.textContent;s===e._wrapperState.initialValue&&""!==s&&null!==s&&(e.value=s)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,s){return null==e||"http://www.w3.org/1999/xhtml"===e?le(s):"http://www.w3.org/2000/svg"===e&&"foreignObject"===s?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,s){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=s;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;s.firstChild;)e.appendChild(s.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,s,t,a){MSApp.execUnsafeLocalFunction(function(){return de(e,s)})}:de);function me(e,s){if(s){var t=e.firstChild;if(t&&t===e.lastChild&&3===t.nodeType)return void(t.nodeValue=s)}e.textContent=s}var he={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function xe(e,s,t){return null==s||"boolean"===typeof s||""===s?"":t||"number"!==typeof s||0===s||he.hasOwnProperty(e)&&he[e]?(""+s).trim():s+"px"}function fe(e,s){for(var t in e=e.style,s)if(s.hasOwnProperty(t)){var a=0===t.indexOf("--"),n=xe(t,s[t],a);"float"===t&&(t="cssFloat"),a?e.setProperty(t,n):e[t]=n}}Object.keys(he).forEach(function(e){pe.forEach(function(s){s=s+e.charAt(0).toUpperCase()+e.substring(1),he[s]=he[e]})});var be=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,s){if(s){if(be[e]&&(null!=s.children||null!=s.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=s.dangerouslySetInnerHTML){if(null!=s.children)throw Error(r(60));if("object"!==typeof s.dangerouslySetInnerHTML||!("__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=s.style&&"object"!==typeof s.style)throw Error(r(62))}}function ge(e,s){if(-1===e.indexOf("-"))return"string"===typeof s.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var je=null;function ye(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ne=null,we=null,ke=null;function Se(e){if(e=gn(e)){if("function"!==typeof Ne)throw Error(r(280));var s=e.stateNode;s&&(s=yn(s),Ne(e.stateNode,e.type,s))}}function Ce(e){we?ke?ke.push(e):ke=[e]:we=e}function Te(){if(we){var e=we,s=ke;if(ke=we=null,Se(e),s)for(e=0;e<s.length;e++)Se(s[e])}}function Pe(e,s){return e(s)}function Re(){}var Ee=!1;function _e(e,s,t){if(Ee)return e(s,t);Ee=!0;try{return Pe(e,s,t)}finally{Ee=!1,(null!==we||null!==ke)&&(Re(),Te())}}function Ae(e,s){var t=e.stateNode;if(null===t)return null;var a=yn(t);if(null===a)return null;t=a[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(t&&"function"!==typeof t)throw Error(r(231,s,typeof t));return t}var De=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){De=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){De=!1}function Oe(e,s,t,a,n,r,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{s.apply(t,c)}catch(d){this.onError(d)}}var Ie=!1,Me=null,Fe=!1,$e=null,ze={onError:function(e){Ie=!0,Me=e}};function He(e,s,t,a,n,r,i,l,o){Ie=!1,Me=null,Oe.apply(ze,arguments)}function Ue(e){var s=e,t=e;if(e.alternate)for(;s.return;)s=s.return;else{e=s;do{0!==(4098&(s=e).flags)&&(t=s.return),e=s.return}while(e)}return 3===s.tag?t:null}function qe(e){if(13===e.tag){var s=e.memoizedState;if(null===s&&(null!==(e=e.alternate)&&(s=e.memoizedState)),null!==s)return s.dehydrated}return null}function Be(e){if(Ue(e)!==e)throw Error(r(188))}function We(e){return null!==(e=function(e){var s=e.alternate;if(!s){if(null===(s=Ue(e)))throw Error(r(188));return s!==e?null:e}for(var t=e,a=s;;){var n=t.return;if(null===n)break;var i=n.alternate;if(null===i){if(null!==(a=n.return)){t=a;continue}break}if(n.child===i.child){for(i=n.child;i;){if(i===t)return Be(n),e;if(i===a)return Be(n),s;i=i.sibling}throw Error(r(188))}if(t.return!==a.return)t=n,a=i;else{for(var l=!1,o=n.child;o;){if(o===t){l=!0,t=n,a=i;break}if(o===a){l=!0,a=n,t=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===t){l=!0,t=i,a=n;break}if(o===a){l=!0,a=i,t=n;break}o=o.sibling}if(!l)throw Error(r(189))}}if(t.alternate!==a)throw Error(r(190))}if(3!==t.tag)throw Error(r(188));return t.stateNode.current===t?e:s}(e))?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var s=Ve(e);if(null!==s)return s;e=e.sibling}return null}var Je=n.unstable_scheduleCallback,Ge=n.unstable_cancelCallback,Ke=n.unstable_shouldYield,Ye=n.unstable_requestPaint,Qe=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,es=n.unstable_UserBlockingPriority,ss=n.unstable_NormalPriority,ts=n.unstable_LowPriority,as=n.unstable_IdlePriority,ns=null,rs=null;var is=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ls(e)/os|0)|0},ls=Math.log,os=Math.LN2;var cs=64,ds=4194304;function us(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ms(e,s){var t=e.pendingLanes;if(0===t)return 0;var a=0,n=e.suspendedLanes,r=e.pingedLanes,i=268435455&t;if(0!==i){var l=i&~n;0!==l?a=us(l):0!==(r&=i)&&(a=us(r))}else 0!==(i=t&~n)?a=us(i):0!==r&&(a=us(r));if(0===a)return 0;if(0!==s&&s!==a&&0===(s&n)&&((n=a&-a)>=(r=s&-s)||16===n&&0!==(4194240&r)))return s;if(0!==(4&a)&&(a|=16&t),0!==(s=e.entangledLanes))for(e=e.entanglements,s&=a;0<s;)n=1<<(t=31-is(s)),a|=e[t],s&=~n;return a}function hs(e,s){switch(e){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;default:return-1}}function ps(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function xs(){var e=cs;return 0===(4194240&(cs<<=1))&&(cs=64),e}function fs(e){for(var s=[],t=0;31>t;t++)s.push(e);return s}function bs(e,s,t){e.pendingLanes|=s,536870912!==s&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[s=31-is(s)]=t}function vs(e,s){var t=e.entangledLanes|=s;for(e=e.entanglements;t;){var a=31-is(t),n=1<<a;n&s|e[a]&s&&(e[a]|=s),t&=~n}}var gs=0;function js(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var ys,Ns,ws,ks,Ss,Cs=!1,Ts=[],Ps=null,Rs=null,Es=null,_s=new Map,As=new Map,Ds=[],Ls="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Os(e,s){switch(e){case"focusin":case"focusout":Ps=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Es=null;break;case"pointerover":case"pointerout":_s.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":As.delete(s.pointerId)}}function Is(e,s,t,a,n,r){return null===e||e.nativeEvent!==r?(e={blockedOn:s,domEventName:t,eventSystemFlags:a,nativeEvent:r,targetContainers:[n]},null!==s&&(null!==(s=gn(s))&&Ns(s)),e):(e.eventSystemFlags|=a,s=e.targetContainers,null!==n&&-1===s.indexOf(n)&&s.push(n),e)}function Ms(e){var s=vn(e.target);if(null!==s){var t=Ue(s);if(null!==t)if(13===(s=t.tag)){if(null!==(s=qe(t)))return e.blockedOn=s,void Ss(e.priority,function(){ws(t)})}else if(3===s&&t.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===t.tag?t.stateNode.containerInfo:null)}e.blockedOn=null}function Fs(e){if(null!==e.blockedOn)return!1;for(var s=e.targetContainers;0<s.length;){var t=Ks(e.domEventName,e.eventSystemFlags,s[0],e.nativeEvent);if(null!==t)return null!==(s=gn(t))&&Ns(s),e.blockedOn=t,!1;var a=new(t=e.nativeEvent).constructor(t.type,t);je=a,t.target.dispatchEvent(a),je=null,s.shift()}return!0}function $s(e,s,t){Fs(e)&&t.delete(s)}function zs(){Cs=!1,null!==Ps&&Fs(Ps)&&(Ps=null),null!==Rs&&Fs(Rs)&&(Rs=null),null!==Es&&Fs(Es)&&(Es=null),_s.forEach($s),As.forEach($s)}function Hs(e,s){e.blockedOn===s&&(e.blockedOn=null,Cs||(Cs=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zs)))}function Us(e){function s(s){return Hs(s,e)}if(0<Ts.length){Hs(Ts[0],e);for(var t=1;t<Ts.length;t++){var a=Ts[t];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Ps&&Hs(Ps,e),null!==Rs&&Hs(Rs,e),null!==Es&&Hs(Es,e),_s.forEach(s),As.forEach(s),t=0;t<Ds.length;t++)(a=Ds[t]).blockedOn===e&&(a.blockedOn=null);for(;0<Ds.length&&null===(t=Ds[0]).blockedOn;)Ms(t),null===t.blockedOn&&Ds.shift()}var qs=j.ReactCurrentBatchConfig,Bs=!0;function Ws(e,s,t,a){var n=gs,r=qs.transition;qs.transition=null;try{gs=1,Js(e,s,t,a)}finally{gs=n,qs.transition=r}}function Vs(e,s,t,a){var n=gs,r=qs.transition;qs.transition=null;try{gs=4,Js(e,s,t,a)}finally{gs=n,qs.transition=r}}function Js(e,s,t,a){if(Bs){var n=Ks(e,s,t,a);if(null===n)qa(e,s,a,Gs,t),Os(e,a);else if(function(e,s,t,a,n){switch(s){case"focusin":return Ps=Is(Ps,e,s,t,a,n),!0;case"dragenter":return Rs=Is(Rs,e,s,t,a,n),!0;case"mouseover":return Es=Is(Es,e,s,t,a,n),!0;case"pointerover":var r=n.pointerId;return _s.set(r,Is(_s.get(r)||null,e,s,t,a,n)),!0;case"gotpointercapture":return r=n.pointerId,As.set(r,Is(As.get(r)||null,e,s,t,a,n)),!0}return!1}(n,e,s,t,a))a.stopPropagation();else if(Os(e,a),4&s&&-1<Ls.indexOf(e)){for(;null!==n;){var r=gn(n);if(null!==r&&ys(r),null===(r=Ks(e,s,t,a))&&qa(e,s,a,Gs,t),r===n)break;n=r}null!==n&&a.stopPropagation()}else qa(e,s,a,null,t)}}var Gs=null;function Ks(e,s,t,a){if(Gs=null,null!==(e=vn(e=ye(a))))if(null===(s=Ue(e)))e=null;else if(13===(t=s.tag)){if(null!==(e=qe(s)))return e;e=null}else if(3===t){if(s.stateNode.current.memoizedState.isDehydrated)return 3===s.tag?s.stateNode.containerInfo:null;e=null}else s!==e&&(e=null);return Gs=e,null}function Ys(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case es:return 4;case ss:case ts:return 16;case as:return 536870912;default:return 16}default:return 16}}var Qs=null,Xs=null,Zs=null;function et(){if(Zs)return Zs;var e,s,t=Xs,a=t.length,n="value"in Qs?Qs.value:Qs.textContent,r=n.length;for(e=0;e<a&&t[e]===n[e];e++);var i=a-e;for(s=1;s<=i&&t[a-s]===n[r-s];s++);return Zs=n.slice(e,1<s?1-s:void 0)}function st(e){var s=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===s&&(e=13):e=s,10===e&&(e=13),32<=e||13===e?e:0}function tt(){return!0}function at(){return!1}function nt(e){function s(s,t,a,n,r){for(var i in this._reactName=s,this._targetInst=a,this.type=t,this.nativeEvent=n,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(i)&&(s=e[i],this[i]=s?s(n):n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?tt:at,this.isPropagationStopped=at,this}return M(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tt)},persist:function(){},isPersistent:tt}),s}var rt,it,lt,ot={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ct=nt(ot),dt=M({},ot,{view:0,detail:0}),ut=nt(dt),mt=M({},dt,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kt,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==lt&&(lt&&"mousemove"===e.type?(rt=e.screenX-lt.screenX,it=e.screenY-lt.screenY):it=rt=0,lt=e),rt)},movementY:function(e){return"movementY"in e?e.movementY:it}}),ht=nt(mt),pt=nt(M({},mt,{dataTransfer:0})),xt=nt(M({},dt,{relatedTarget:0})),ft=nt(M({},ot,{animationName:0,elapsedTime:0,pseudoElement:0})),bt=M({},ot,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vt=nt(bt),gt=nt(M({},ot,{data:0})),jt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wt(e){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(e):!!(e=Nt[e])&&!!s[e]}function kt(){return wt}var St=M({},dt,{key:function(e){if(e.key){var s=jt[e.key]||e.key;if("Unidentified"!==s)return s}return"keypress"===e.type?13===(e=st(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?yt[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kt,charCode:function(e){return"keypress"===e.type?st(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?st(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Ct=nt(St),Tt=nt(M({},mt,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pt=nt(M({},dt,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kt})),Rt=nt(M({},ot,{propertyName:0,elapsedTime:0,pseudoElement:0})),Et=M({},mt,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_t=nt(Et),At=[9,13,27,32],Dt=d&&"CompositionEvent"in window,Lt=null;d&&"documentMode"in document&&(Lt=document.documentMode);var Ot=d&&"TextEvent"in window&&!Lt,It=d&&(!Dt||Lt&&8<Lt&&11>=Lt),Mt=String.fromCharCode(32),Ft=!1;function $t(e,s){switch(e){case"keyup":return-1!==At.indexOf(s.keyCode);case"keydown":return 229!==s.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zt(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ht=!1;var Ut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qt(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===s?!!Ut[e.type]:"textarea"===s}function Bt(e,s,t,a){Ce(a),0<(s=Wa(s,"onChange")).length&&(t=new ct("onChange","change",null,t,a),e.push({event:t,listeners:s}))}var Wt=null,Vt=null;function Jt(e){Ma(e,0)}function Gt(e){if(J(jn(e)))return e}function Kt(e,s){if("change"===e)return s}var Yt=!1;if(d){var Qt;if(d){var Xt="oninput"in document;if(!Xt){var Zt=document.createElement("div");Zt.setAttribute("oninput","return;"),Xt="function"===typeof Zt.oninput}Qt=Xt}else Qt=!1;Yt=Qt&&(!document.documentMode||9<document.documentMode)}function ea(){Wt&&(Wt.detachEvent("onpropertychange",sa),Vt=Wt=null)}function sa(e){if("value"===e.propertyName&&Gt(Vt)){var s=[];Bt(s,Vt,e,ye(e)),_e(Jt,s)}}function ta(e,s,t){"focusin"===e?(ea(),Vt=t,(Wt=s).attachEvent("onpropertychange",sa)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gt(Vt)}function na(e,s){if("click"===e)return Gt(s)}function ra(e,s){if("input"===e||"change"===e)return Gt(s)}var ia="function"===typeof Object.is?Object.is:function(e,s){return e===s&&(0!==e||1/e===1/s)||e!==e&&s!==s};function la(e,s){if(ia(e,s))return!0;if("object"!==typeof e||null===e||"object"!==typeof s||null===s)return!1;var t=Object.keys(e),a=Object.keys(s);if(t.length!==a.length)return!1;for(a=0;a<t.length;a++){var n=t[a];if(!u.call(s,n)||!ia(e[n],s[n]))return!1}return!0}function oa(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ca(e,s){var t,a=oa(e);for(e=0;a;){if(3===a.nodeType){if(t=e+a.textContent.length,e<=s&&t>=s)return{node:a,offset:s-e};e=t}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=oa(a)}}function da(e,s){return!(!e||!s)&&(e===s||(!e||3!==e.nodeType)&&(s&&3===s.nodeType?da(e,s.parentNode):"contains"in e?e.contains(s):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(s))))}function ua(){for(var e=window,s=G();s instanceof e.HTMLIFrameElement;){try{var t="string"===typeof s.contentWindow.location.href}catch(a){t=!1}if(!t)break;s=G((e=s.contentWindow).document)}return s}function ma(e){var s=e&&e.nodeName&&e.nodeName.toLowerCase();return s&&("input"===s&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===s||"true"===e.contentEditable)}function ha(e){var s=ua(),t=e.focusedElem,a=e.selectionRange;if(s!==t&&t&&t.ownerDocument&&da(t.ownerDocument.documentElement,t)){if(null!==a&&ma(t))if(s=a.start,void 0===(e=a.end)&&(e=s),"selectionStart"in t)t.selectionStart=s,t.selectionEnd=Math.min(e,t.value.length);else if((e=(s=t.ownerDocument||document)&&s.defaultView||window).getSelection){e=e.getSelection();var n=t.textContent.length,r=Math.min(a.start,n);a=void 0===a.end?r:Math.min(a.end,n),!e.extend&&r>a&&(n=a,a=r,r=n),n=ca(t,r);var i=ca(t,a);n&&i&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((s=s.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),r>a?(e.addRange(s),e.extend(i.node,i.offset)):(s.setEnd(i.node,i.offset),e.addRange(s)))}for(s=[],e=t;e=e.parentNode;)1===e.nodeType&&s.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof t.focus&&t.focus(),t=0;t<s.length;t++)(e=s[t]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pa=d&&"documentMode"in document&&11>=document.documentMode,xa=null,fa=null,ba=null,va=!1;function ga(e,s,t){var a=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;va||null==xa||xa!==G(a)||("selectionStart"in(a=xa)&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ba&&la(ba,a)||(ba=a,0<(a=Wa(fa,"onSelect")).length&&(s=new ct("onSelect","select",null,s,t),e.push({event:s,listeners:a}),s.target=xa)))}function ja(e,s){var t={};return t[e.toLowerCase()]=s.toLowerCase(),t["Webkit"+e]="webkit"+s,t["Moz"+e]="moz"+s,t}var ya={animationend:ja("Animation","AnimationEnd"),animationiteration:ja("Animation","AnimationIteration"),animationstart:ja("Animation","AnimationStart"),transitionend:ja("Transition","TransitionEnd")},Na={},wa={};function ka(e){if(Na[e])return Na[e];if(!ya[e])return e;var s,t=ya[e];for(s in t)if(t.hasOwnProperty(s)&&s in wa)return Na[e]=t[s];return e}d&&(wa=document.createElement("div").style,"AnimationEvent"in window||(delete ya.animationend.animation,delete ya.animationiteration.animation,delete ya.animationstart.animation),"TransitionEvent"in window||delete ya.transitionend.transition);var Sa=ka("animationend"),Ca=ka("animationiteration"),Ta=ka("animationstart"),Pa=ka("transitionend"),Ra=new Map,Ea="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _a(e,s){Ra.set(e,s),o(s,[e])}for(var Aa=0;Aa<Ea.length;Aa++){var Da=Ea[Aa];_a(Da.toLowerCase(),"on"+(Da[0].toUpperCase()+Da.slice(1)))}_a(Sa,"onAnimationEnd"),_a(Ca,"onAnimationIteration"),_a(Ta,"onAnimationStart"),_a("dblclick","onDoubleClick"),_a("focusin","onFocus"),_a("focusout","onBlur"),_a(Pa,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oa=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Ia(e,s,t){var a=e.type||"unknown-event";e.currentTarget=t,function(e,s,t,a,n,i,l,o,c){if(He.apply(this,arguments),Ie){if(!Ie)throw Error(r(198));var d=Me;Ie=!1,Me=null,Fe||(Fe=!0,$e=d)}}(a,s,void 0,e),e.currentTarget=null}function Ma(e,s){s=0!==(4&s);for(var t=0;t<e.length;t++){var a=e[t],n=a.event;a=a.listeners;e:{var r=void 0;if(s)for(var i=a.length-1;0<=i;i--){var l=a[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==r&&n.isPropagationStopped())break e;Ia(n,l,c),r=o}else for(i=0;i<a.length;i++){if(o=(l=a[i]).instance,c=l.currentTarget,l=l.listener,o!==r&&n.isPropagationStopped())break e;Ia(n,l,c),r=o}}}if(Fe)throw e=$e,Fe=!1,$e=null,e}function Fa(e,s){var t=s[xn];void 0===t&&(t=s[xn]=new Set);var a=e+"__bubble";t.has(a)||(Ua(s,e,2,!1),t.add(a))}function $a(e,s,t){var a=0;s&&(a|=4),Ua(t,e,a,s)}var za="_reactListening"+Math.random().toString(36).slice(2);function Ha(e){if(!e[za]){e[za]=!0,i.forEach(function(s){"selectionchange"!==s&&(Oa.has(s)||$a(s,!1,e),$a(s,!0,e))});var s=9===e.nodeType?e:e.ownerDocument;null===s||s[za]||(s[za]=!0,$a("selectionchange",!1,s))}}function Ua(e,s,t,a){switch(Ys(s)){case 1:var n=Ws;break;case 4:n=Vs;break;default:n=Js}t=n.bind(null,s,t,e),n=void 0,!De||"touchstart"!==s&&"touchmove"!==s&&"wheel"!==s||(n=!0),a?void 0!==n?e.addEventListener(s,t,{capture:!0,passive:n}):e.addEventListener(s,t,!0):void 0!==n?e.addEventListener(s,t,{passive:n}):e.addEventListener(s,t,!1)}function qa(e,s,t,a,n){var r=a;if(0===(1&s)&&0===(2&s)&&null!==a)e:for(;;){if(null===a)return;var i=a.tag;if(3===i||4===i){var l=a.stateNode.containerInfo;if(l===n||8===l.nodeType&&l.parentNode===n)break;if(4===i)for(i=a.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===n||8===o.nodeType&&o.parentNode===n))return;i=i.return}for(;null!==l;){if(null===(i=vn(l)))return;if(5===(o=i.tag)||6===o){a=r=i;continue e}l=l.parentNode}}a=a.return}_e(function(){var a=r,n=ye(t),i=[];e:{var l=Ra.get(e);if(void 0!==l){var o=ct,c=e;switch(e){case"keypress":if(0===st(t))break e;case"keydown":case"keyup":o=Ct;break;case"focusin":c="focus",o=xt;break;case"focusout":c="blur",o=xt;break;case"beforeblur":case"afterblur":o=xt;break;case"click":if(2===t.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ht;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=pt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Pt;break;case Sa:case Ca:case Ta:o=ft;break;case Pa:o=Rt;break;case"scroll":o=ut;break;case"wheel":o=_t;break;case"copy":case"cut":case"paste":o=vt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Tt}var d=0!==(4&s),u=!d&&"scroll"===e,m=d?null!==l?l+"Capture":null:l;d=[];for(var h,p=a;null!==p;){var x=(h=p).stateNode;if(5===h.tag&&null!==x&&(h=x,null!==m&&(null!=(x=Ae(p,m))&&d.push(Ba(p,x,h)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,t,n),i.push({event:l,listeners:d}))}}if(0===(7&s)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||t===je||!(c=t.relatedTarget||t.fromElement)||!vn(c)&&!c[pn])&&(o||l)&&(l=n.window===n?n:(l=n.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=a,null!==(c=(c=t.relatedTarget||t.toElement)?vn(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=a),o!==c)){if(d=ht,x="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Tt,x="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==o?l:jn(o),h=null==c?l:jn(c),(l=new d(x,p+"leave",o,t,n)).target=u,l.relatedTarget=h,x=null,vn(n)===a&&((d=new d(m,p+"enter",c,t,n)).target=h,d.relatedTarget=u,x=d),u=x,o&&c)e:{for(m=c,p=0,h=d=o;h;h=Va(h))p++;for(h=0,x=m;x;x=Va(x))h++;for(;0<p-h;)d=Va(d),p--;for(;0<h-p;)m=Va(m),h--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Va(d),m=Va(m)}d=null}else d=null;null!==o&&Ja(i,l,o,d,!1),null!==c&&null!==u&&Ja(i,u,c,d,!0)}if("select"===(o=(l=a?jn(a):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var f=Kt;else if(qt(l))if(Yt)f=ra;else{f=aa;var b=ta}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(f=na);switch(f&&(f=f(e,a))?Bt(i,f,t,n):(b&&b(e,l,a),"focusout"===e&&(b=l._wrapperState)&&b.controlled&&"number"===l.type&&ee(l,"number",l.value)),b=a?jn(a):window,e){case"focusin":(qt(b)||"true"===b.contentEditable)&&(xa=b,fa=a,ba=null);break;case"focusout":ba=fa=xa=null;break;case"mousedown":va=!0;break;case"contextmenu":case"mouseup":case"dragend":va=!1,ga(i,t,n);break;case"selectionchange":if(pa)break;case"keydown":case"keyup":ga(i,t,n)}var v;if(Dt)e:{switch(e){case"compositionstart":var g="onCompositionStart";break e;case"compositionend":g="onCompositionEnd";break e;case"compositionupdate":g="onCompositionUpdate";break e}g=void 0}else Ht?$t(e,t)&&(g="onCompositionEnd"):"keydown"===e&&229===t.keyCode&&(g="onCompositionStart");g&&(It&&"ko"!==t.locale&&(Ht||"onCompositionStart"!==g?"onCompositionEnd"===g&&Ht&&(v=et()):(Xs="value"in(Qs=n)?Qs.value:Qs.textContent,Ht=!0)),0<(b=Wa(a,g)).length&&(g=new gt(g,e,null,t,n),i.push({event:g,listeners:b}),v?g.data=v:null!==(v=zt(t))&&(g.data=v))),(v=Ot?function(e,s){switch(e){case"compositionend":return zt(s);case"keypress":return 32!==s.which?null:(Ft=!0,Mt);case"textInput":return(e=s.data)===Mt&&Ft?null:e;default:return null}}(e,t):function(e,s){if(Ht)return"compositionend"===e||!Dt&&$t(e,s)?(e=et(),Zs=Xs=Qs=null,Ht=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return It&&"ko"!==s.locale?null:s.data}}(e,t))&&(0<(a=Wa(a,"onBeforeInput")).length&&(n=new gt("onBeforeInput","beforeinput",null,t,n),i.push({event:n,listeners:a}),n.data=v))}Ma(i,s)})}function Ba(e,s,t){return{instance:e,listener:s,currentTarget:t}}function Wa(e,s){for(var t=s+"Capture",a=[];null!==e;){var n=e,r=n.stateNode;5===n.tag&&null!==r&&(n=r,null!=(r=Ae(e,t))&&a.unshift(Ba(e,r,n)),null!=(r=Ae(e,s))&&a.push(Ba(e,r,n))),e=e.return}return a}function Va(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ja(e,s,t,a,n){for(var r=s._reactName,i=[];null!==t&&t!==a;){var l=t,o=l.alternate,c=l.stateNode;if(null!==o&&o===a)break;5===l.tag&&null!==c&&(l=c,n?null!=(o=Ae(t,r))&&i.unshift(Ba(t,o,l)):n||null!=(o=Ae(t,r))&&i.push(Ba(t,o,l))),t=t.return}0!==i.length&&e.push({event:s,listeners:i})}var Ga=/\r\n?/g,Ka=/\u0000|\uFFFD/g;function Ya(e){return("string"===typeof e?e:""+e).replace(Ga,"\n").replace(Ka,"")}function Qa(e,s,t){if(s=Ya(s),Ya(e)!==s&&t)throw Error(r(425))}function Xa(){}var Za=null,en=null;function sn(e,s){return"textarea"===e||"noscript"===e||"string"===typeof s.children||"number"===typeof s.children||"object"===typeof s.dangerouslySetInnerHTML&&null!==s.dangerouslySetInnerHTML&&null!=s.dangerouslySetInnerHTML.__html}var tn="function"===typeof setTimeout?setTimeout:void 0,an="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,rn="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(ln)}:tn;function ln(e){setTimeout(function(){throw e})}function on(e,s){var t=s,a=0;do{var n=t.nextSibling;if(e.removeChild(t),n&&8===n.nodeType)if("/$"===(t=n.data)){if(0===a)return e.removeChild(n),void Us(s);a--}else"$"!==t&&"$?"!==t&&"$!"!==t||a++;t=n}while(t);Us(s)}function cn(e){for(;null!=e;e=e.nextSibling){var s=e.nodeType;if(1===s||3===s)break;if(8===s){if("$"===(s=e.data)||"$!"===s||"$?"===s)break;if("/$"===s)return null}}return e}function dn(e){e=e.previousSibling;for(var s=0;e;){if(8===e.nodeType){var t=e.data;if("$"===t||"$!"===t||"$?"===t){if(0===s)return e;s--}else"/$"===t&&s++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),mn="__reactFiber$"+un,hn="__reactProps$"+un,pn="__reactContainer$"+un,xn="__reactEvents$"+un,fn="__reactListeners$"+un,bn="__reactHandles$"+un;function vn(e){var s=e[mn];if(s)return s;for(var t=e.parentNode;t;){if(s=t[pn]||t[mn]){if(t=s.alternate,null!==s.child||null!==t&&null!==t.child)for(e=dn(e);null!==e;){if(t=e[mn])return t;e=dn(e)}return s}t=(e=t).parentNode}return null}function gn(e){return!(e=e[mn]||e[pn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function jn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function yn(e){return e[hn]||null}var Nn=[],wn=-1;function kn(e){return{current:e}}function Sn(e){0>wn||(e.current=Nn[wn],Nn[wn]=null,wn--)}function Cn(e,s){wn++,Nn[wn]=e.current,e.current=s}var Tn={},Pn=kn(Tn),Rn=kn(!1),En=Tn;function _n(e,s){var t=e.type.contextTypes;if(!t)return Tn;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===s)return a.__reactInternalMemoizedMaskedChildContext;var n,r={};for(n in t)r[n]=s[n];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=r),r}function An(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Dn(){Sn(Rn),Sn(Pn)}function Ln(e,s,t){if(Pn.current!==Tn)throw Error(r(168));Cn(Pn,s),Cn(Rn,t)}function On(e,s,t){var a=e.stateNode;if(s=s.childContextTypes,"function"!==typeof a.getChildContext)return t;for(var n in a=a.getChildContext())if(!(n in s))throw Error(r(108,q(e)||"Unknown",n));return M({},t,a)}function In(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tn,En=Pn.current,Cn(Pn,e),Cn(Rn,Rn.current),!0}function Mn(e,s,t){var a=e.stateNode;if(!a)throw Error(r(169));t?(e=On(e,s,En),a.__reactInternalMemoizedMergedChildContext=e,Sn(Rn),Sn(Pn),Cn(Pn,e)):Sn(Rn),Cn(Rn,t)}var Fn=null,$n=!1,zn=!1;function Hn(e){null===Fn?Fn=[e]:Fn.push(e)}function Un(){if(!zn&&null!==Fn){zn=!0;var e=0,s=gs;try{var t=Fn;for(gs=1;e<t.length;e++){var a=t[e];do{a=a(!0)}while(null!==a)}Fn=null,$n=!1}catch(n){throw null!==Fn&&(Fn=Fn.slice(e+1)),Je(Ze,Un),n}finally{gs=s,zn=!1}}return null}var qn=[],Bn=0,Wn=null,Vn=0,Jn=[],Gn=0,Kn=null,Yn=1,Qn="";function Xn(e,s){qn[Bn++]=Vn,qn[Bn++]=Wn,Wn=e,Vn=s}function Zn(e,s,t){Jn[Gn++]=Yn,Jn[Gn++]=Qn,Jn[Gn++]=Kn,Kn=e;var a=Yn;e=Qn;var n=32-is(a)-1;a&=~(1<<n),t+=1;var r=32-is(s)+n;if(30<r){var i=n-n%5;r=(a&(1<<i)-1).toString(32),a>>=i,n-=i,Yn=1<<32-is(s)+n|t<<n|a,Qn=r+e}else Yn=1<<r|t<<n|a,Qn=e}function er(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function sr(e){for(;e===Wn;)Wn=qn[--Bn],qn[Bn]=null,Vn=qn[--Bn],qn[Bn]=null;for(;e===Kn;)Kn=Jn[--Gn],Jn[Gn]=null,Qn=Jn[--Gn],Jn[Gn]=null,Yn=Jn[--Gn],Jn[Gn]=null}var tr=null,ar=null,nr=!1,rr=null;function ir(e,s){var t=_c(5,null,null,0);t.elementType="DELETED",t.stateNode=s,t.return=e,null===(s=e.deletions)?(e.deletions=[t],e.flags|=16):s.push(t)}function lr(e,s){switch(e.tag){case 5:var t=e.type;return null!==(s=1!==s.nodeType||t.toLowerCase()!==s.nodeName.toLowerCase()?null:s)&&(e.stateNode=s,tr=e,ar=cn(s.firstChild),!0);case 6:return null!==(s=""===e.pendingProps||3!==s.nodeType?null:s)&&(e.stateNode=s,tr=e,ar=null,!0);case 13:return null!==(s=8!==s.nodeType?null:s)&&(t=null!==Kn?{id:Yn,overflow:Qn}:null,e.memoizedState={dehydrated:s,treeContext:t,retryLane:1073741824},(t=_c(18,null,null,0)).stateNode=s,t.return=e,e.child=t,tr=e,ar=null,!0);default:return!1}}function or(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cr(e){if(nr){var s=ar;if(s){var t=s;if(!lr(e,s)){if(or(e))throw Error(r(418));s=cn(t.nextSibling);var a=tr;s&&lr(e,s)?ir(a,t):(e.flags=-4097&e.flags|2,nr=!1,tr=e)}}else{if(or(e))throw Error(r(418));e.flags=-4097&e.flags|2,nr=!1,tr=e}}}function dr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;tr=e}function ur(e){if(e!==tr)return!1;if(!nr)return dr(e),nr=!0,!1;var s;if((s=3!==e.tag)&&!(s=5!==e.tag)&&(s="head"!==(s=e.type)&&"body"!==s&&!sn(e.type,e.memoizedProps)),s&&(s=ar)){if(or(e))throw mr(),Error(r(418));for(;s;)ir(e,s),s=cn(s.nextSibling)}if(dr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,s=0;e;){if(8===e.nodeType){var t=e.data;if("/$"===t){if(0===s){ar=cn(e.nextSibling);break e}s--}else"$"!==t&&"$!"!==t&&"$?"!==t||s++}e=e.nextSibling}ar=null}}else ar=tr?cn(e.stateNode.nextSibling):null;return!0}function mr(){for(var e=ar;e;)e=cn(e.nextSibling)}function hr(){ar=tr=null,nr=!1}function pr(e){null===rr?rr=[e]:rr.push(e)}var xr=j.ReactCurrentBatchConfig;function fr(e,s,t){if(null!==(e=t.ref)&&"function"!==typeof e&&"object"!==typeof e){if(t._owner){if(t=t._owner){if(1!==t.tag)throw Error(r(309));var a=t.stateNode}if(!a)throw Error(r(147,e));var n=a,i=""+e;return null!==s&&null!==s.ref&&"function"===typeof s.ref&&s.ref._stringRef===i?s.ref:(s=function(e){var s=n.refs;null===e?delete s[i]:s[i]=e},s._stringRef=i,s)}if("string"!==typeof e)throw Error(r(284));if(!t._owner)throw Error(r(290,e))}return e}function br(e,s){throw e=Object.prototype.toString.call(s),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(s).join(", ")+"}":e))}function vr(e){return(0,e._init)(e._payload)}function gr(e){function s(s,t){if(e){var a=s.deletions;null===a?(s.deletions=[t],s.flags|=16):a.push(t)}}function t(t,a){if(!e)return null;for(;null!==a;)s(t,a),a=a.sibling;return null}function a(e,s){for(e=new Map;null!==s;)null!==s.key?e.set(s.key,s):e.set(s.index,s),s=s.sibling;return e}function n(e,s){return(e=Dc(e,s)).index=0,e.sibling=null,e}function i(s,t,a){return s.index=a,e?null!==(a=s.alternate)?(a=a.index)<t?(s.flags|=2,t):a:(s.flags|=2,t):(s.flags|=1048576,t)}function l(s){return e&&null===s.alternate&&(s.flags|=2),s}function o(e,s,t,a){return null===s||6!==s.tag?((s=Mc(t,e.mode,a)).return=e,s):((s=n(s,t)).return=e,s)}function c(e,s,t,a){var r=t.type;return r===w?u(e,s,t.props.children,a,t.key):null!==s&&(s.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===A&&vr(r)===s.type)?((a=n(s,t.props)).ref=fr(e,s,t),a.return=e,a):((a=Lc(t.type,t.key,t.props,null,e.mode,a)).ref=fr(e,s,t),a.return=e,a)}function d(e,s,t,a){return null===s||4!==s.tag||s.stateNode.containerInfo!==t.containerInfo||s.stateNode.implementation!==t.implementation?((s=Fc(t,e.mode,a)).return=e,s):((s=n(s,t.children||[])).return=e,s)}function u(e,s,t,a,r){return null===s||7!==s.tag?((s=Oc(t,e.mode,a,r)).return=e,s):((s=n(s,t)).return=e,s)}function m(e,s,t){if("string"===typeof s&&""!==s||"number"===typeof s)return(s=Mc(""+s,e.mode,t)).return=e,s;if("object"===typeof s&&null!==s){switch(s.$$typeof){case y:return(t=Lc(s.type,s.key,s.props,null,e.mode,t)).ref=fr(e,null,s),t.return=e,t;case N:return(s=Fc(s,e.mode,t)).return=e,s;case A:return m(e,(0,s._init)(s._payload),t)}if(se(s)||O(s))return(s=Oc(s,e.mode,t,null)).return=e,s;br(e,s)}return null}function h(e,s,t,a){var n=null!==s?s.key:null;if("string"===typeof t&&""!==t||"number"===typeof t)return null!==n?null:o(e,s,""+t,a);if("object"===typeof t&&null!==t){switch(t.$$typeof){case y:return t.key===n?c(e,s,t,a):null;case N:return t.key===n?d(e,s,t,a):null;case A:return h(e,s,(n=t._init)(t._payload),a)}if(se(t)||O(t))return null!==n?null:u(e,s,t,a,null);br(e,t)}return null}function p(e,s,t,a,n){if("string"===typeof a&&""!==a||"number"===typeof a)return o(s,e=e.get(t)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case y:return c(s,e=e.get(null===a.key?t:a.key)||null,a,n);case N:return d(s,e=e.get(null===a.key?t:a.key)||null,a,n);case A:return p(e,s,t,(0,a._init)(a._payload),n)}if(se(a)||O(a))return u(s,e=e.get(t)||null,a,n,null);br(s,a)}return null}function x(n,r,l,o){for(var c=null,d=null,u=r,x=r=0,f=null;null!==u&&x<l.length;x++){u.index>x?(f=u,u=null):f=u.sibling;var b=h(n,u,l[x],o);if(null===b){null===u&&(u=f);break}e&&u&&null===b.alternate&&s(n,u),r=i(b,r,x),null===d?c=b:d.sibling=b,d=b,u=f}if(x===l.length)return t(n,u),nr&&Xn(n,x),c;if(null===u){for(;x<l.length;x++)null!==(u=m(n,l[x],o))&&(r=i(u,r,x),null===d?c=u:d.sibling=u,d=u);return nr&&Xn(n,x),c}for(u=a(n,u);x<l.length;x++)null!==(f=p(u,n,x,l[x],o))&&(e&&null!==f.alternate&&u.delete(null===f.key?x:f.key),r=i(f,r,x),null===d?c=f:d.sibling=f,d=f);return e&&u.forEach(function(e){return s(n,e)}),nr&&Xn(n,x),c}function f(n,l,o,c){var d=O(o);if("function"!==typeof d)throw Error(r(150));if(null==(o=d.call(o)))throw Error(r(151));for(var u=d=null,x=l,f=l=0,b=null,v=o.next();null!==x&&!v.done;f++,v=o.next()){x.index>f?(b=x,x=null):b=x.sibling;var g=h(n,x,v.value,c);if(null===g){null===x&&(x=b);break}e&&x&&null===g.alternate&&s(n,x),l=i(g,l,f),null===u?d=g:u.sibling=g,u=g,x=b}if(v.done)return t(n,x),nr&&Xn(n,f),d;if(null===x){for(;!v.done;f++,v=o.next())null!==(v=m(n,v.value,c))&&(l=i(v,l,f),null===u?d=v:u.sibling=v,u=v);return nr&&Xn(n,f),d}for(x=a(n,x);!v.done;f++,v=o.next())null!==(v=p(x,n,f,v.value,c))&&(e&&null!==v.alternate&&x.delete(null===v.key?f:v.key),l=i(v,l,f),null===u?d=v:u.sibling=v,u=v);return e&&x.forEach(function(e){return s(n,e)}),nr&&Xn(n,f),d}return function e(a,r,i,o){if("object"===typeof i&&null!==i&&i.type===w&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case y:e:{for(var c=i.key,d=r;null!==d;){if(d.key===c){if((c=i.type)===w){if(7===d.tag){t(a,d.sibling),(r=n(d,i.props.children)).return=a,a=r;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===A&&vr(c)===d.type){t(a,d.sibling),(r=n(d,i.props)).ref=fr(a,d,i),r.return=a,a=r;break e}t(a,d);break}s(a,d),d=d.sibling}i.type===w?((r=Oc(i.props.children,a.mode,o,i.key)).return=a,a=r):((o=Lc(i.type,i.key,i.props,null,a.mode,o)).ref=fr(a,r,i),o.return=a,a=o)}return l(a);case N:e:{for(d=i.key;null!==r;){if(r.key===d){if(4===r.tag&&r.stateNode.containerInfo===i.containerInfo&&r.stateNode.implementation===i.implementation){t(a,r.sibling),(r=n(r,i.children||[])).return=a,a=r;break e}t(a,r);break}s(a,r),r=r.sibling}(r=Fc(i,a.mode,o)).return=a,a=r}return l(a);case A:return e(a,r,(d=i._init)(i._payload),o)}if(se(i))return x(a,r,i,o);if(O(i))return f(a,r,i,o);br(a,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==r&&6===r.tag?(t(a,r.sibling),(r=n(r,i)).return=a,a=r):(t(a,r),(r=Mc(i,a.mode,o)).return=a,a=r),l(a)):t(a,r)}}var jr=gr(!0),yr=gr(!1),Nr=kn(null),wr=null,kr=null,Sr=null;function Cr(){Sr=kr=wr=null}function Tr(e){var s=Nr.current;Sn(Nr),e._currentValue=s}function Pr(e,s,t){for(;null!==e;){var a=e.alternate;if((e.childLanes&s)!==s?(e.childLanes|=s,null!==a&&(a.childLanes|=s)):null!==a&&(a.childLanes&s)!==s&&(a.childLanes|=s),e===t)break;e=e.return}}function Rr(e,s){wr=e,Sr=kr=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&s)&&(vl=!0),e.firstContext=null)}function Er(e){var s=e._currentValue;if(Sr!==e)if(e={context:e,memoizedValue:s,next:null},null===kr){if(null===wr)throw Error(r(308));kr=e,wr.dependencies={lanes:0,firstContext:e}}else kr=kr.next=e;return s}var _r=null;function Ar(e){null===_r?_r=[e]:_r.push(e)}function Dr(e,s,t,a){var n=s.interleaved;return null===n?(t.next=t,Ar(s)):(t.next=n.next,n.next=t),s.interleaved=t,Lr(e,a)}function Lr(e,s){e.lanes|=s;var t=e.alternate;for(null!==t&&(t.lanes|=s),t=e,e=e.return;null!==e;)e.childLanes|=s,null!==(t=e.alternate)&&(t.childLanes|=s),t=e,e=e.return;return 3===t.tag?t.stateNode:null}var Or=!1;function Ir(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mr(e,s){e=e.updateQueue,s.updateQueue===e&&(s.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fr(e,s){return{eventTime:e,lane:s,tag:0,payload:null,callback:null,next:null}}function $r(e,s,t){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Po)){var n=a.pending;return null===n?s.next=s:(s.next=n.next,n.next=s),a.pending=s,Lr(e,t)}return null===(n=a.interleaved)?(s.next=s,Ar(a)):(s.next=n.next,n.next=s),a.interleaved=s,Lr(e,t)}function zr(e,s,t){if(null!==(s=s.updateQueue)&&(s=s.shared,0!==(4194240&t))){var a=s.lanes;t|=a&=e.pendingLanes,s.lanes=t,vs(e,t)}}function Hr(e,s){var t=e.updateQueue,a=e.alternate;if(null!==a&&t===(a=a.updateQueue)){var n=null,r=null;if(null!==(t=t.firstBaseUpdate)){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};null===r?n=r=i:r=r.next=i,t=t.next}while(null!==t);null===r?n=r=s:r=r.next=s}else n=r=s;return t={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=t)}null===(e=t.lastBaseUpdate)?t.firstBaseUpdate=s:e.next=s,t.lastBaseUpdate=s}function Ur(e,s,t,a){var n=e.updateQueue;Or=!1;var r=n.firstBaseUpdate,i=n.lastBaseUpdate,l=n.shared.pending;if(null!==l){n.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?r=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==r){var u=n.baseState;for(i=0,d=c=o=null,l=r;;){var m=l.lane,h=l.eventTime;if((a&m)===m){null!==d&&(d=d.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,x=l;switch(m=s,h=t,x.tag){case 1:if("function"===typeof(p=x.payload)){u=p.call(h,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=x.payload)?p.call(h,u,m):p)||void 0===m)break e;u=M({},u,m);break e;case 2:Or=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(m=n.effects)?n.effects=[l]:m.push(l))}else h={eventTime:h,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=h,o=u):d=d.next=h,i|=m;if(null===(l=l.next)){if(null===(l=n.shared.pending))break;l=(m=l).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}if(null===d&&(o=u),n.baseState=o,n.firstBaseUpdate=c,n.lastBaseUpdate=d,null!==(s=n.shared.interleaved)){n=s;do{i|=n.lane,n=n.next}while(n!==s)}else null===r&&(n.shared.lanes=0);Io|=i,e.lanes=i,e.memoizedState=u}}function qr(e,s,t){if(e=s.effects,s.effects=null,null!==e)for(s=0;s<e.length;s++){var a=e[s],n=a.callback;if(null!==n){if(a.callback=null,a=t,"function"!==typeof n)throw Error(r(191,n));n.call(a)}}}var Br={},Wr=kn(Br),Vr=kn(Br),Jr=kn(Br);function Gr(e){if(e===Br)throw Error(r(174));return e}function Kr(e,s){switch(Cn(Jr,s),Cn(Vr,e),Cn(Wr,Br),e=s.nodeType){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:oe(null,"");break;default:s=oe(s=(e=8===e?s.parentNode:s).namespaceURI||null,e=e.tagName)}Sn(Wr),Cn(Wr,s)}function Yr(){Sn(Wr),Sn(Vr),Sn(Jr)}function Qr(e){Gr(Jr.current);var s=Gr(Wr.current),t=oe(s,e.type);s!==t&&(Cn(Vr,e),Cn(Wr,t))}function Xr(e){Vr.current===e&&(Sn(Wr),Sn(Vr))}var Zr=kn(0);function ei(e){for(var s=e;null!==s;){if(13===s.tag){var t=s.memoizedState;if(null!==t&&(null===(t=t.dehydrated)||"$?"===t.data||"$!"===t.data))return s}else if(19===s.tag&&void 0!==s.memoizedProps.revealOrder){if(0!==(128&s.flags))return s}else if(null!==s.child){s.child.return=s,s=s.child;continue}if(s===e)break;for(;null===s.sibling;){if(null===s.return||s.return===e)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var si=[];function ti(){for(var e=0;e<si.length;e++)si[e]._workInProgressVersionPrimary=null;si.length=0}var ai=j.ReactCurrentDispatcher,ni=j.ReactCurrentBatchConfig,ri=0,ii=null,li=null,oi=null,ci=!1,di=!1,ui=0,mi=0;function hi(){throw Error(r(321))}function pi(e,s){if(null===s)return!1;for(var t=0;t<s.length&&t<e.length;t++)if(!ia(e[t],s[t]))return!1;return!0}function xi(e,s,t,a,n,i){if(ri=i,ii=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ai.current=null===e||null===e.memoizedState?Xi:Zi,e=t(a,n),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(r(301));i+=1,oi=li=null,s.updateQueue=null,ai.current=el,e=t(a,n)}while(di)}if(ai.current=Qi,s=null!==li&&null!==li.next,ri=0,oi=li=ii=null,ci=!1,s)throw Error(r(300));return e}function fi(){var e=0!==ui;return ui=0,e}function bi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===oi?ii.memoizedState=oi=e:oi=oi.next=e,oi}function vi(){if(null===li){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=li.next;var s=null===oi?ii.memoizedState:oi.next;if(null!==s)oi=s,li=e;else{if(null===e)throw Error(r(310));e={memoizedState:(li=e).memoizedState,baseState:li.baseState,baseQueue:li.baseQueue,queue:li.queue,next:null},null===oi?ii.memoizedState=oi=e:oi=oi.next=e}return oi}function gi(e,s){return"function"===typeof s?s(e):s}function ji(e){var s=vi(),t=s.queue;if(null===t)throw Error(r(311));t.lastRenderedReducer=e;var a=li,n=a.baseQueue,i=t.pending;if(null!==i){if(null!==n){var l=n.next;n.next=i.next,i.next=l}a.baseQueue=n=i,t.pending=null}if(null!==n){i=n.next,a=a.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ri&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),a=d.hasEagerState?d.eagerState:e(a,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,l=a):c=c.next=m,ii.lanes|=u,Io|=u}d=d.next}while(null!==d&&d!==i);null===c?l=a:c.next=o,ia(a,s.memoizedState)||(vl=!0),s.memoizedState=a,s.baseState=l,s.baseQueue=c,t.lastRenderedState=a}if(null!==(e=t.interleaved)){n=e;do{i=n.lane,ii.lanes|=i,Io|=i,n=n.next}while(n!==e)}else null===n&&(t.lanes=0);return[s.memoizedState,t.dispatch]}function yi(e){var s=vi(),t=s.queue;if(null===t)throw Error(r(311));t.lastRenderedReducer=e;var a=t.dispatch,n=t.pending,i=s.memoizedState;if(null!==n){t.pending=null;var l=n=n.next;do{i=e(i,l.action),l=l.next}while(l!==n);ia(i,s.memoizedState)||(vl=!0),s.memoizedState=i,null===s.baseQueue&&(s.baseState=i),t.lastRenderedState=i}return[i,a]}function Ni(){}function wi(e,s){var t=ii,a=vi(),n=s(),i=!ia(a.memoizedState,n);if(i&&(a.memoizedState=n,vl=!0),a=a.queue,Oi(Ci.bind(null,t,a,e),[e]),a.getSnapshot!==s||i||null!==oi&&1&oi.memoizedState.tag){if(t.flags|=2048,Ei(9,Si.bind(null,t,a,n,s),void 0,null),null===Ro)throw Error(r(349));0!==(30&ri)||ki(t,s,n)}return n}function ki(e,s,t){e.flags|=16384,e={getSnapshot:s,value:t},null===(s=ii.updateQueue)?(s={lastEffect:null,stores:null},ii.updateQueue=s,s.stores=[e]):null===(t=s.stores)?s.stores=[e]:t.push(e)}function Si(e,s,t,a){s.value=t,s.getSnapshot=a,Ti(s)&&Pi(e)}function Ci(e,s,t){return t(function(){Ti(s)&&Pi(e)})}function Ti(e){var s=e.getSnapshot;e=e.value;try{var t=s();return!ia(e,t)}catch(a){return!0}}function Pi(e){var s=Lr(e,1);null!==s&&tc(s,e,1,-1)}function Ri(e){var s=bi();return"function"===typeof e&&(e=e()),s.memoizedState=s.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gi,lastRenderedState:e},s.queue=e,e=e.dispatch=Ji.bind(null,ii,e),[s.memoizedState,e]}function Ei(e,s,t,a){return e={tag:e,create:s,destroy:t,deps:a,next:null},null===(s=ii.updateQueue)?(s={lastEffect:null,stores:null},ii.updateQueue=s,s.lastEffect=e.next=e):null===(t=s.lastEffect)?s.lastEffect=e.next=e:(a=t.next,t.next=e,e.next=a,s.lastEffect=e),e}function _i(){return vi().memoizedState}function Ai(e,s,t,a){var n=bi();ii.flags|=e,n.memoizedState=Ei(1|s,t,void 0,void 0===a?null:a)}function Di(e,s,t,a){var n=vi();a=void 0===a?null:a;var r=void 0;if(null!==li){var i=li.memoizedState;if(r=i.destroy,null!==a&&pi(a,i.deps))return void(n.memoizedState=Ei(s,t,r,a))}ii.flags|=e,n.memoizedState=Ei(1|s,t,r,a)}function Li(e,s){return Ai(8390656,8,e,s)}function Oi(e,s){return Di(2048,8,e,s)}function Ii(e,s){return Di(4,2,e,s)}function Mi(e,s){return Di(4,4,e,s)}function Fi(e,s){return"function"===typeof s?(e=e(),s(e),function(){s(null)}):null!==s&&void 0!==s?(e=e(),s.current=e,function(){s.current=null}):void 0}function $i(e,s,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Di(4,4,Fi.bind(null,s,e),t)}function zi(){}function Hi(e,s){var t=vi();s=void 0===s?null:s;var a=t.memoizedState;return null!==a&&null!==s&&pi(s,a[1])?a[0]:(t.memoizedState=[e,s],e)}function Ui(e,s){var t=vi();s=void 0===s?null:s;var a=t.memoizedState;return null!==a&&null!==s&&pi(s,a[1])?a[0]:(e=e(),t.memoizedState=[e,s],e)}function qi(e,s,t){return 0===(21&ri)?(e.baseState&&(e.baseState=!1,vl=!0),e.memoizedState=t):(ia(t,s)||(t=xs(),ii.lanes|=t,Io|=t,e.baseState=!0),s)}function Bi(e,s){var t=gs;gs=0!==t&&4>t?t:4,e(!0);var a=ni.transition;ni.transition={};try{e(!1),s()}finally{gs=t,ni.transition=a}}function Wi(){return vi().memoizedState}function Vi(e,s,t){var a=sc(e);if(t={lane:a,action:t,hasEagerState:!1,eagerState:null,next:null},Gi(e))Ki(s,t);else if(null!==(t=Dr(e,s,t,a))){tc(t,e,a,ec()),Yi(t,s,a)}}function Ji(e,s,t){var a=sc(e),n={lane:a,action:t,hasEagerState:!1,eagerState:null,next:null};if(Gi(e))Ki(s,n);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=s.lastRenderedReducer))try{var i=s.lastRenderedState,l=r(i,t);if(n.hasEagerState=!0,n.eagerState=l,ia(l,i)){var o=s.interleaved;return null===o?(n.next=n,Ar(s)):(n.next=o.next,o.next=n),void(s.interleaved=n)}}catch(c){}null!==(t=Dr(e,s,n,a))&&(tc(t,e,a,n=ec()),Yi(t,s,a))}}function Gi(e){var s=e.alternate;return e===ii||null!==s&&s===ii}function Ki(e,s){di=ci=!0;var t=e.pending;null===t?s.next=s:(s.next=t.next,t.next=s),e.pending=s}function Yi(e,s,t){if(0!==(4194240&t)){var a=s.lanes;t|=a&=e.pendingLanes,s.lanes=t,vs(e,t)}}var Qi={readContext:Er,useCallback:hi,useContext:hi,useEffect:hi,useImperativeHandle:hi,useInsertionEffect:hi,useLayoutEffect:hi,useMemo:hi,useReducer:hi,useRef:hi,useState:hi,useDebugValue:hi,useDeferredValue:hi,useTransition:hi,useMutableSource:hi,useSyncExternalStore:hi,useId:hi,unstable_isNewReconciler:!1},Xi={readContext:Er,useCallback:function(e,s){return bi().memoizedState=[e,void 0===s?null:s],e},useContext:Er,useEffect:Li,useImperativeHandle:function(e,s,t){return t=null!==t&&void 0!==t?t.concat([e]):null,Ai(4194308,4,Fi.bind(null,s,e),t)},useLayoutEffect:function(e,s){return Ai(4194308,4,e,s)},useInsertionEffect:function(e,s){return Ai(4,2,e,s)},useMemo:function(e,s){var t=bi();return s=void 0===s?null:s,e=e(),t.memoizedState=[e,s],e},useReducer:function(e,s,t){var a=bi();return s=void 0!==t?t(s):s,a.memoizedState=a.baseState=s,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},a.queue=e,e=e.dispatch=Vi.bind(null,ii,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},bi().memoizedState=e},useState:Ri,useDebugValue:zi,useDeferredValue:function(e){return bi().memoizedState=e},useTransition:function(){var e=Ri(!1),s=e[0];return e=Bi.bind(null,e[1]),bi().memoizedState=e,[s,e]},useMutableSource:function(){},useSyncExternalStore:function(e,s,t){var a=ii,n=bi();if(nr){if(void 0===t)throw Error(r(407));t=t()}else{if(t=s(),null===Ro)throw Error(r(349));0!==(30&ri)||ki(a,s,t)}n.memoizedState=t;var i={value:t,getSnapshot:s};return n.queue=i,Li(Ci.bind(null,a,i,e),[e]),a.flags|=2048,Ei(9,Si.bind(null,a,i,t,s),void 0,null),t},useId:function(){var e=bi(),s=Ro.identifierPrefix;if(nr){var t=Qn;s=":"+s+"R"+(t=(Yn&~(1<<32-is(Yn)-1)).toString(32)+t),0<(t=ui++)&&(s+="H"+t.toString(32)),s+=":"}else s=":"+s+"r"+(t=mi++).toString(32)+":";return e.memoizedState=s},unstable_isNewReconciler:!1},Zi={readContext:Er,useCallback:Hi,useContext:Er,useEffect:Oi,useImperativeHandle:$i,useInsertionEffect:Ii,useLayoutEffect:Mi,useMemo:Ui,useReducer:ji,useRef:_i,useState:function(){return ji(gi)},useDebugValue:zi,useDeferredValue:function(e){return qi(vi(),li.memoizedState,e)},useTransition:function(){return[ji(gi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1},el={readContext:Er,useCallback:Hi,useContext:Er,useEffect:Oi,useImperativeHandle:$i,useInsertionEffect:Ii,useLayoutEffect:Mi,useMemo:Ui,useReducer:yi,useRef:_i,useState:function(){return yi(gi)},useDebugValue:zi,useDeferredValue:function(e){var s=vi();return null===li?s.memoizedState=e:qi(s,li.memoizedState,e)},useTransition:function(){return[yi(gi)[0],vi().memoizedState]},useMutableSource:Ni,useSyncExternalStore:wi,useId:Wi,unstable_isNewReconciler:!1};function sl(e,s){if(e&&e.defaultProps){for(var t in s=M({},s),e=e.defaultProps)void 0===s[t]&&(s[t]=e[t]);return s}return s}function tl(e,s,t,a){t=null===(t=t(a,s=e.memoizedState))||void 0===t?s:M({},s,t),e.memoizedState=t,0===e.lanes&&(e.updateQueue.baseState=t)}var al={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,s,t){e=e._reactInternals;var a=ec(),n=sc(e),r=Fr(a,n);r.payload=s,void 0!==t&&null!==t&&(r.callback=t),null!==(s=$r(e,r,n))&&(tc(s,e,n,a),zr(s,e,n))},enqueueReplaceState:function(e,s,t){e=e._reactInternals;var a=ec(),n=sc(e),r=Fr(a,n);r.tag=1,r.payload=s,void 0!==t&&null!==t&&(r.callback=t),null!==(s=$r(e,r,n))&&(tc(s,e,n,a),zr(s,e,n))},enqueueForceUpdate:function(e,s){e=e._reactInternals;var t=ec(),a=sc(e),n=Fr(t,a);n.tag=2,void 0!==s&&null!==s&&(n.callback=s),null!==(s=$r(e,n,a))&&(tc(s,e,a,t),zr(s,e,a))}};function nl(e,s,t,a,n,r,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,i):!s.prototype||!s.prototype.isPureReactComponent||(!la(t,a)||!la(n,r))}function rl(e,s,t){var a=!1,n=Tn,r=s.contextType;return"object"===typeof r&&null!==r?r=Er(r):(n=An(s)?En:Pn.current,r=(a=null!==(a=s.contextTypes)&&void 0!==a)?_n(e,n):Tn),s=new s(t,r),e.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,s.updater=al,e.stateNode=s,s._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=r),s}function il(e,s,t,a){e=s.state,"function"===typeof s.componentWillReceiveProps&&s.componentWillReceiveProps(t,a),"function"===typeof s.UNSAFE_componentWillReceiveProps&&s.UNSAFE_componentWillReceiveProps(t,a),s.state!==e&&al.enqueueReplaceState(s,s.state,null)}function ll(e,s,t,a){var n=e.stateNode;n.props=t,n.state=e.memoizedState,n.refs={},Ir(e);var r=s.contextType;"object"===typeof r&&null!==r?n.context=Er(r):(r=An(s)?En:Pn.current,n.context=_n(e,r)),n.state=e.memoizedState,"function"===typeof(r=s.getDerivedStateFromProps)&&(tl(e,s,r,t),n.state=e.memoizedState),"function"===typeof s.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(s=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),s!==n.state&&al.enqueueReplaceState(n,n.state,null),Ur(e,t,n,a),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function ol(e,s){try{var t="",a=s;do{t+=H(a),a=a.return}while(a);var n=t}catch(r){n="\nError generating stack: "+r.message+"\n"+r.stack}return{value:e,source:s,stack:n,digest:null}}function cl(e,s,t){return{value:e,source:null,stack:null!=t?t:null,digest:null!=s?s:null}}function dl(e,s){try{console.error(s.value)}catch(t){setTimeout(function(){throw t})}}var ul="function"===typeof WeakMap?WeakMap:Map;function ml(e,s,t){(t=Fr(-1,t)).tag=3,t.payload={element:null};var a=s.value;return t.callback=function(){Bo||(Bo=!0,Wo=a),dl(0,s)},t}function hl(e,s,t){(t=Fr(-1,t)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var n=s.value;t.payload=function(){return a(n)},t.callback=function(){dl(0,s)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(t.callback=function(){dl(0,s),"function"!==typeof a&&(null===Vo?Vo=new Set([this]):Vo.add(this));var e=s.stack;this.componentDidCatch(s.value,{componentStack:null!==e?e:""})}),t}function pl(e,s,t){var a=e.pingCache;if(null===a){a=e.pingCache=new ul;var n=new Set;a.set(s,n)}else void 0===(n=a.get(s))&&(n=new Set,a.set(s,n));n.has(t)||(n.add(t),e=Sc.bind(null,e,s,t),s.then(e,e))}function xl(e){do{var s;if((s=13===e.tag)&&(s=null===(s=e.memoizedState)||null!==s.dehydrated),s)return e;e=e.return}while(null!==e);return null}function fl(e,s,t,a,n){return 0===(1&e.mode)?(e===s?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,1===t.tag&&(null===t.alternate?t.tag=17:((s=Fr(-1,1)).tag=2,$r(t,s,1))),t.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var bl=j.ReactCurrentOwner,vl=!1;function gl(e,s,t,a){s.child=null===e?yr(s,null,t,a):jr(s,e.child,t,a)}function jl(e,s,t,a,n){t=t.render;var r=s.ref;return Rr(s,n),a=xi(e,s,t,a,r,n),t=fi(),null===e||vl?(nr&&t&&er(s),s.flags|=1,gl(e,s,a,n),s.child):(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~n,ql(e,s,n))}function yl(e,s,t,a,n){if(null===e){var r=t.type;return"function"!==typeof r||Ac(r)||void 0!==r.defaultProps||null!==t.compare||void 0!==t.defaultProps?((e=Lc(t.type,null,a,s,s.mode,n)).ref=s.ref,e.return=s,s.child=e):(s.tag=15,s.type=r,Nl(e,s,r,a,n))}if(r=e.child,0===(e.lanes&n)){var i=r.memoizedProps;if((t=null!==(t=t.compare)?t:la)(i,a)&&e.ref===s.ref)return ql(e,s,n)}return s.flags|=1,(e=Dc(r,a)).ref=s.ref,e.return=s,s.child=e}function Nl(e,s,t,a,n){if(null!==e){var r=e.memoizedProps;if(la(r,a)&&e.ref===s.ref){if(vl=!1,s.pendingProps=a=r,0===(e.lanes&n))return s.lanes=e.lanes,ql(e,s,n);0!==(131072&e.flags)&&(vl=!0)}}return Sl(e,s,t,a,n)}function wl(e,s,t){var a=s.pendingProps,n=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&s.mode))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Do,Ao),Ao|=t;else{if(0===(1073741824&t))return e=null!==r?r.baseLanes|t:t,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:e,cachePool:null,transitions:null},s.updateQueue=null,Cn(Do,Ao),Ao|=e,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:t,Cn(Do,Ao),Ao|=a}else null!==r?(a=r.baseLanes|t,s.memoizedState=null):a=t,Cn(Do,Ao),Ao|=a;return gl(e,s,n,t),s.child}function kl(e,s){var t=s.ref;(null===e&&null!==t||null!==e&&e.ref!==t)&&(s.flags|=512,s.flags|=2097152)}function Sl(e,s,t,a,n){var r=An(t)?En:Pn.current;return r=_n(s,r),Rr(s,n),t=xi(e,s,t,a,r,n),a=fi(),null===e||vl?(nr&&a&&er(s),s.flags|=1,gl(e,s,t,n),s.child):(s.updateQueue=e.updateQueue,s.flags&=-2053,e.lanes&=~n,ql(e,s,n))}function Cl(e,s,t,a,n){if(An(t)){var r=!0;In(s)}else r=!1;if(Rr(s,n),null===s.stateNode)Ul(e,s),rl(s,t,a),ll(s,t,a,n),a=!0;else if(null===e){var i=s.stateNode,l=s.memoizedProps;i.props=l;var o=i.context,c=t.contextType;"object"===typeof c&&null!==c?c=Er(c):c=_n(s,c=An(t)?En:Pn.current);var d=t.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==a||o!==c)&&il(s,i,a,c),Or=!1;var m=s.memoizedState;i.state=m,Ur(s,a,i,n),o=s.memoizedState,l!==a||m!==o||Rn.current||Or?("function"===typeof d&&(tl(s,t,d,a),o=s.memoizedState),(l=Or||nl(s,t,l,a,m,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(s.flags|=4194308)):("function"===typeof i.componentDidMount&&(s.flags|=4194308),s.memoizedProps=a,s.memoizedState=o),i.props=a,i.state=o,i.context=c,a=l):("function"===typeof i.componentDidMount&&(s.flags|=4194308),a=!1)}else{i=s.stateNode,Mr(e,s),l=s.memoizedProps,c=s.type===s.elementType?l:sl(s.type,l),i.props=c,u=s.pendingProps,m=i.context,"object"===typeof(o=t.contextType)&&null!==o?o=Er(o):o=_n(s,o=An(t)?En:Pn.current);var h=t.getDerivedStateFromProps;(d="function"===typeof h||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||m!==o)&&il(s,i,a,o),Or=!1,m=s.memoizedState,i.state=m,Ur(s,a,i,n);var p=s.memoizedState;l!==u||m!==p||Rn.current||Or?("function"===typeof h&&(tl(s,t,h,a),p=s.memoizedState),(c=Or||nl(s,t,c,a,m,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(a,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(a,p,o)),"function"===typeof i.componentDidUpdate&&(s.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(s.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(s.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(s.flags|=1024),s.memoizedProps=a,s.memoizedState=p),i.props=a,i.state=p,i.context=o,a=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(s.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(s.flags|=1024),a=!1)}return Tl(e,s,t,a,r,n)}function Tl(e,s,t,a,n,r){kl(e,s);var i=0!==(128&s.flags);if(!a&&!i)return n&&Mn(s,t,!1),ql(e,s,r);a=s.stateNode,bl.current=s;var l=i&&"function"!==typeof t.getDerivedStateFromError?null:a.render();return s.flags|=1,null!==e&&i?(s.child=jr(s,e.child,null,r),s.child=jr(s,null,l,r)):gl(e,s,l,r),s.memoizedState=a.state,n&&Mn(s,t,!0),s.child}function Pl(e){var s=e.stateNode;s.pendingContext?Ln(0,s.pendingContext,s.pendingContext!==s.context):s.context&&Ln(0,s.context,!1),Kr(e,s.containerInfo)}function Rl(e,s,t,a,n){return hr(),pr(n),s.flags|=256,gl(e,s,t,a),s.child}var El,_l,Al,Dl,Ll={dehydrated:null,treeContext:null,retryLane:0};function Ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Il(e,s,t){var a,n=s.pendingProps,i=Zr.current,l=!1,o=0!==(128&s.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&i)),a?(l=!0,s.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cn(Zr,1&i),null===e)return cr(s),null!==(e=s.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&s.mode)?s.lanes=1:"$!"===e.data?s.lanes=8:s.lanes=1073741824,null):(o=n.children,e=n.fallback,l?(n=s.mode,l=s.child,o={mode:"hidden",children:o},0===(1&n)&&null!==l?(l.childLanes=0,l.pendingProps=o):l=Ic(o,n,0,null),e=Oc(e,n,t,null),l.return=s,e.return=s,l.sibling=e,s.child=l,s.child.memoizedState=Ol(t),s.memoizedState=Ll,e):Ml(s,o));if(null!==(i=e.memoizedState)&&null!==(a=i.dehydrated))return function(e,s,t,a,n,i,l){if(t)return 256&s.flags?(s.flags&=-257,Fl(e,s,l,a=cl(Error(r(422))))):null!==s.memoizedState?(s.child=e.child,s.flags|=128,null):(i=a.fallback,n=s.mode,a=Ic({mode:"visible",children:a.children},n,0,null),(i=Oc(i,n,l,null)).flags|=2,a.return=s,i.return=s,a.sibling=i,s.child=a,0!==(1&s.mode)&&jr(s,e.child,null,l),s.child.memoizedState=Ol(l),s.memoizedState=Ll,i);if(0===(1&s.mode))return Fl(e,s,l,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var o=a.dgst;return a=o,Fl(e,s,l,a=cl(i=Error(r(419)),a,void 0))}if(o=0!==(l&e.childLanes),vl||o){if(null!==(a=Ro)){switch(l&-l){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|l))?0:n)&&n!==i.retryLane&&(i.retryLane=n,Lr(e,n),tc(a,e,n,-1))}return xc(),Fl(e,s,l,a=cl(Error(r(421))))}return"$?"===n.data?(s.flags|=128,s.child=e.child,s=Tc.bind(null,e),n._reactRetry=s,null):(e=i.treeContext,ar=cn(n.nextSibling),tr=s,nr=!0,rr=null,null!==e&&(Jn[Gn++]=Yn,Jn[Gn++]=Qn,Jn[Gn++]=Kn,Yn=e.id,Qn=e.overflow,Kn=s),s=Ml(s,a.children),s.flags|=4096,s)}(e,s,o,n,a,i,t);if(l){l=n.fallback,o=s.mode,a=(i=e.child).sibling;var c={mode:"hidden",children:n.children};return 0===(1&o)&&s.child!==i?((n=s.child).childLanes=0,n.pendingProps=c,s.deletions=null):(n=Dc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==a?l=Dc(a,l):(l=Oc(l,o,t,null)).flags|=2,l.return=s,n.return=s,n.sibling=l,s.child=n,n=l,l=s.child,o=null===(o=e.child.memoizedState)?Ol(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},l.memoizedState=o,l.childLanes=e.childLanes&~t,s.memoizedState=Ll,n}return e=(l=e.child).sibling,n=Dc(l,{mode:"visible",children:n.children}),0===(1&s.mode)&&(n.lanes=t),n.return=s,n.sibling=null,null!==e&&(null===(t=s.deletions)?(s.deletions=[e],s.flags|=16):t.push(e)),s.child=n,s.memoizedState=null,n}function Ml(e,s){return(s=Ic({mode:"visible",children:s},e.mode,0,null)).return=e,e.child=s}function Fl(e,s,t,a){return null!==a&&pr(a),jr(s,e.child,null,t),(e=Ml(s,s.pendingProps.children)).flags|=2,s.memoizedState=null,e}function $l(e,s,t){e.lanes|=s;var a=e.alternate;null!==a&&(a.lanes|=s),Pr(e.return,s,t)}function zl(e,s,t,a,n){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:a,tail:t,tailMode:n}:(r.isBackwards=s,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=t,r.tailMode=n)}function Hl(e,s,t){var a=s.pendingProps,n=a.revealOrder,r=a.tail;if(gl(e,s,a.children,t),0!==(2&(a=Zr.current)))a=1&a|2,s.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=s.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$l(e,t,s);else if(19===e.tag)$l(e,t,s);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===s)break e;for(;null===e.sibling;){if(null===e.return||e.return===s)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cn(Zr,a),0===(1&s.mode))s.memoizedState=null;else switch(n){case"forwards":for(t=s.child,n=null;null!==t;)null!==(e=t.alternate)&&null===ei(e)&&(n=t),t=t.sibling;null===(t=n)?(n=s.child,s.child=null):(n=t.sibling,t.sibling=null),zl(s,!1,n,t,r);break;case"backwards":for(t=null,n=s.child,s.child=null;null!==n;){if(null!==(e=n.alternate)&&null===ei(e)){s.child=n;break}e=n.sibling,n.sibling=t,t=n,n=e}zl(s,!0,t,null,r);break;case"together":zl(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Ul(e,s){0===(1&s.mode)&&null!==e&&(e.alternate=null,s.alternate=null,s.flags|=2)}function ql(e,s,t){if(null!==e&&(s.dependencies=e.dependencies),Io|=s.lanes,0===(t&s.childLanes))return null;if(null!==e&&s.child!==e.child)throw Error(r(153));if(null!==s.child){for(t=Dc(e=s.child,e.pendingProps),s.child=t,t.return=s;null!==e.sibling;)e=e.sibling,(t=t.sibling=Dc(e,e.pendingProps)).return=s;t.sibling=null}return s.child}function Bl(e,s){if(!nr)switch(e.tailMode){case"hidden":s=e.tail;for(var t=null;null!==s;)null!==s.alternate&&(t=s),s=s.sibling;null===t?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var a=null;null!==t;)null!==t.alternate&&(a=t),t=t.sibling;null===a?s||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wl(e){var s=null!==e.alternate&&e.alternate.child===e.child,t=0,a=0;if(s)for(var n=e.child;null!==n;)t|=n.lanes|n.childLanes,a|=14680064&n.subtreeFlags,a|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)t|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=t,s}function Vl(e,s,t){var a=s.pendingProps;switch(sr(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(s),null;case 1:case 17:return An(s.type)&&Dn(),Wl(s),null;case 3:return a=s.stateNode,Yr(),Sn(Rn),Sn(Pn),ti(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ur(s)?s.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&s.flags)||(s.flags|=1024,null!==rr&&(ic(rr),rr=null))),_l(e,s),Wl(s),null;case 5:Xr(s);var n=Gr(Jr.current);if(t=s.type,null!==e&&null!=s.stateNode)Al(e,s,t,a,n),e.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!a){if(null===s.stateNode)throw Error(r(166));return Wl(s),null}if(e=Gr(Wr.current),ur(s)){a=s.stateNode,t=s.type;var i=s.memoizedProps;switch(a[mn]=s,a[hn]=i,e=0!==(1&s.mode),t){case"dialog":Fa("cancel",a),Fa("close",a);break;case"iframe":case"object":case"embed":Fa("load",a);break;case"video":case"audio":for(n=0;n<La.length;n++)Fa(La[n],a);break;case"source":Fa("error",a);break;case"img":case"image":case"link":Fa("error",a),Fa("load",a);break;case"details":Fa("toggle",a);break;case"input":Y(a,i),Fa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!i.multiple},Fa("invalid",a);break;case"textarea":ne(a,i),Fa("invalid",a)}for(var o in ve(t,i),n=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?a.textContent!==c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),n=["children",c]):"number"===typeof c&&a.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Qa(a.textContent,c,e),n=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Fa("scroll",a)}switch(t){case"input":V(a),Z(a,i,!0);break;case"textarea":V(a),ie(a);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(a.onclick=Xa)}a=n,s.updateQueue=a,null!==a&&(s.flags|=4)}else{o=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(t)),"http://www.w3.org/1999/xhtml"===e?"script"===t?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(t,{is:a.is}):(e=o.createElement(t),"select"===t&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,t),e[mn]=s,e[hn]=a,El(e,s,!1,!1),s.stateNode=e;e:{switch(o=ge(t,a),t){case"dialog":Fa("cancel",e),Fa("close",e),n=a;break;case"iframe":case"object":case"embed":Fa("load",e),n=a;break;case"video":case"audio":for(n=0;n<La.length;n++)Fa(La[n],e);n=a;break;case"source":Fa("error",e),n=a;break;case"img":case"image":case"link":Fa("error",e),Fa("load",e),n=a;break;case"details":Fa("toggle",e),n=a;break;case"input":Y(e,a),n=K(e,a),Fa("invalid",e);break;case"option":default:n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=M({},a,{value:void 0}),Fa("invalid",e);break;case"textarea":ne(e,a),n=ae(e,a),Fa("invalid",e)}for(i in ve(t,n),c=n)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?fe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==t||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Fa("scroll",e):null!=d&&g(e,i,d,o))}switch(t){case"input":V(e),Z(e,a,!1);break;case"textarea":V(e),ie(e);break;case"option":null!=a.value&&e.setAttribute("value",""+B(a.value));break;case"select":e.multiple=!!a.multiple,null!=(i=a.value)?te(e,!!a.multiple,i,!1):null!=a.defaultValue&&te(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xa)}switch(t){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(s.flags|=4)}null!==s.ref&&(s.flags|=512,s.flags|=2097152)}return Wl(s),null;case 6:if(e&&null!=s.stateNode)Dl(e,s,e.memoizedProps,a);else{if("string"!==typeof a&&null===s.stateNode)throw Error(r(166));if(t=Gr(Jr.current),Gr(Wr.current),ur(s)){if(a=s.stateNode,t=s.memoizedProps,a[mn]=s,(i=a.nodeValue!==t)&&null!==(e=tr))switch(e.tag){case 3:Qa(a.nodeValue,t,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qa(a.nodeValue,t,0!==(1&e.mode))}i&&(s.flags|=4)}else(a=(9===t.nodeType?t:t.ownerDocument).createTextNode(a))[mn]=s,s.stateNode=a}return Wl(s),null;case 13:if(Sn(Zr),a=s.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nr&&null!==ar&&0!==(1&s.mode)&&0===(128&s.flags))mr(),hr(),s.flags|=98560,i=!1;else if(i=ur(s),null!==a&&null!==a.dehydrated){if(null===e){if(!i)throw Error(r(318));if(!(i=null!==(i=s.memoizedState)?i.dehydrated:null))throw Error(r(317));i[mn]=s}else hr(),0===(128&s.flags)&&(s.memoizedState=null),s.flags|=4;Wl(s),i=!1}else null!==rr&&(ic(rr),rr=null),i=!0;if(!i)return 65536&s.flags?s:null}return 0!==(128&s.flags)?(s.lanes=t,s):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(s.child.flags|=8192,0!==(1&s.mode)&&(null===e||0!==(1&Zr.current)?0===Lo&&(Lo=3):xc())),null!==s.updateQueue&&(s.flags|=4),Wl(s),null);case 4:return Yr(),_l(e,s),null===e&&Ha(s.stateNode.containerInfo),Wl(s),null;case 10:return Tr(s.type._context),Wl(s),null;case 19:if(Sn(Zr),null===(i=s.memoizedState))return Wl(s),null;if(a=0!==(128&s.flags),null===(o=i.rendering))if(a)Bl(i,!1);else{if(0!==Lo||null!==e&&0!==(128&e.flags))for(e=s.child;null!==e;){if(null!==(o=ei(e))){for(s.flags|=128,Bl(i,!1),null!==(a=o.updateQueue)&&(s.updateQueue=a,s.flags|=4),s.subtreeFlags=0,a=t,t=s.child;null!==t;)e=a,(i=t).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Cn(Zr,1&Zr.current|2),s.child}e=e.sibling}null!==i.tail&&Qe()>Uo&&(s.flags|=128,a=!0,Bl(i,!1),s.lanes=4194304)}else{if(!a)if(null!==(e=ei(o))){if(s.flags|=128,a=!0,null!==(t=e.updateQueue)&&(s.updateQueue=t,s.flags|=4),Bl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!nr)return Wl(s),null}else 2*Qe()-i.renderingStartTime>Uo&&1073741824!==t&&(s.flags|=128,a=!0,Bl(i,!1),s.lanes=4194304);i.isBackwards?(o.sibling=s.child,s.child=o):(null!==(t=i.last)?t.sibling=o:s.child=o,i.last=o)}return null!==i.tail?(s=i.tail,i.rendering=s,i.tail=s.sibling,i.renderingStartTime=Qe(),s.sibling=null,t=Zr.current,Cn(Zr,a?1&t|2:1&t),s):(Wl(s),null);case 22:case 23:return uc(),a=null!==s.memoizedState,null!==e&&null!==e.memoizedState!==a&&(s.flags|=8192),a&&0!==(1&s.mode)?0!==(1073741824&Ao)&&(Wl(s),6&s.subtreeFlags&&(s.flags|=8192)):Wl(s),null;case 24:case 25:return null}throw Error(r(156,s.tag))}function Jl(e,s){switch(sr(s),s.tag){case 1:return An(s.type)&&Dn(),65536&(e=s.flags)?(s.flags=-65537&e|128,s):null;case 3:return Yr(),Sn(Rn),Sn(Pn),ti(),0!==(65536&(e=s.flags))&&0===(128&e)?(s.flags=-65537&e|128,s):null;case 5:return Xr(s),null;case 13:if(Sn(Zr),null!==(e=s.memoizedState)&&null!==e.dehydrated){if(null===s.alternate)throw Error(r(340));hr()}return 65536&(e=s.flags)?(s.flags=-65537&e|128,s):null;case 19:return Sn(Zr),null;case 4:return Yr(),null;case 10:return Tr(s.type._context),null;case 22:case 23:return uc(),null;default:return null}}El=function(e,s){for(var t=s.child;null!==t;){if(5===t.tag||6===t.tag)e.appendChild(t.stateNode);else if(4!==t.tag&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===s)break;for(;null===t.sibling;){if(null===t.return||t.return===s)return;t=t.return}t.sibling.return=t.return,t=t.sibling}},_l=function(){},Al=function(e,s,t,a){var n=e.memoizedProps;if(n!==a){e=s.stateNode,Gr(Wr.current);var r,i=null;switch(t){case"input":n=K(e,n),a=K(e,a),i=[];break;case"select":n=M({},n,{value:void 0}),a=M({},a,{value:void 0}),i=[];break;case"textarea":n=ae(e,n),a=ae(e,a),i=[];break;default:"function"!==typeof n.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(d in ve(t,a),t=null,n)if(!a.hasOwnProperty(d)&&n.hasOwnProperty(d)&&null!=n[d])if("style"===d){var o=n[d];for(r in o)o.hasOwnProperty(r)&&(t||(t={}),t[r]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in a){var c=a[d];if(o=null!=n?n[d]:void 0,a.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(r in o)!o.hasOwnProperty(r)||c&&c.hasOwnProperty(r)||(t||(t={}),t[r]="");for(r in c)c.hasOwnProperty(r)&&o[r]!==c[r]&&(t||(t={}),t[r]=c[r])}else t||(i||(i=[]),i.push(d,t)),t=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Fa("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}t&&(i=i||[]).push("style",t);var d=i;(s.updateQueue=d)&&(s.flags|=4)}},Dl=function(e,s,t,a){t!==a&&(s.flags|=4)};var Gl=!1,Kl=!1,Yl="function"===typeof WeakSet?WeakSet:Set,Ql=null;function Xl(e,s){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(a){kc(e,s,a)}else t.current=null}function Zl(e,s,t){try{t()}catch(a){kc(e,s,a)}}var eo=!1;function so(e,s,t){var a=s.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var n=a=a.next;do{if((n.tag&e)===e){var r=n.destroy;n.destroy=void 0,void 0!==r&&Zl(s,t,r)}n=n.next}while(n!==a)}}function to(e,s){if(null!==(s=null!==(s=s.updateQueue)?s.lastEffect:null)){var t=s=s.next;do{if((t.tag&e)===e){var a=t.create;t.destroy=a()}t=t.next}while(t!==s)}}function ao(e){var s=e.ref;if(null!==s){var t=e.stateNode;e.tag,e=t,"function"===typeof s?s(e):s.current=e}}function no(e){var s=e.alternate;null!==s&&(e.alternate=null,no(s)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(s=e.stateNode)&&(delete s[mn],delete s[hn],delete s[xn],delete s[fn],delete s[bn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ro(e){return 5===e.tag||3===e.tag||4===e.tag}function io(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ro(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function lo(e,s,t){var a=e.tag;if(5===a||6===a)e=e.stateNode,s?8===t.nodeType?t.parentNode.insertBefore(e,s):t.insertBefore(e,s):(8===t.nodeType?(s=t.parentNode).insertBefore(e,t):(s=t).appendChild(e),null!==(t=t._reactRootContainer)&&void 0!==t||null!==s.onclick||(s.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(lo(e,s,t),e=e.sibling;null!==e;)lo(e,s,t),e=e.sibling}function oo(e,s,t){var a=e.tag;if(5===a||6===a)e=e.stateNode,s?t.insertBefore(e,s):t.appendChild(e);else if(4!==a&&null!==(e=e.child))for(oo(e,s,t),e=e.sibling;null!==e;)oo(e,s,t),e=e.sibling}var co=null,uo=!1;function mo(e,s,t){for(t=t.child;null!==t;)ho(e,s,t),t=t.sibling}function ho(e,s,t){if(rs&&"function"===typeof rs.onCommitFiberUnmount)try{rs.onCommitFiberUnmount(ns,t)}catch(l){}switch(t.tag){case 5:Kl||Xl(t,s);case 6:var a=co,n=uo;co=null,mo(e,s,t),uo=n,null!==(co=a)&&(uo?(e=co,t=t.stateNode,8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)):co.removeChild(t.stateNode));break;case 18:null!==co&&(uo?(e=co,t=t.stateNode,8===e.nodeType?on(e.parentNode,t):1===e.nodeType&&on(e,t),Us(e)):on(co,t.stateNode));break;case 4:a=co,n=uo,co=t.stateNode.containerInfo,uo=!0,mo(e,s,t),co=a,uo=n;break;case 0:case 11:case 14:case 15:if(!Kl&&(null!==(a=t.updateQueue)&&null!==(a=a.lastEffect))){n=a=a.next;do{var r=n,i=r.destroy;r=r.tag,void 0!==i&&(0!==(2&r)||0!==(4&r))&&Zl(t,s,i),n=n.next}while(n!==a)}mo(e,s,t);break;case 1:if(!Kl&&(Xl(t,s),"function"===typeof(a=t.stateNode).componentWillUnmount))try{a.props=t.memoizedProps,a.state=t.memoizedState,a.componentWillUnmount()}catch(l){kc(t,s,l)}mo(e,s,t);break;case 21:mo(e,s,t);break;case 22:1&t.mode?(Kl=(a=Kl)||null!==t.memoizedState,mo(e,s,t),Kl=a):mo(e,s,t);break;default:mo(e,s,t)}}function po(e){var s=e.updateQueue;if(null!==s){e.updateQueue=null;var t=e.stateNode;null===t&&(t=e.stateNode=new Yl),s.forEach(function(s){var a=Pc.bind(null,e,s);t.has(s)||(t.add(s),s.then(a,a))})}}function xo(e,s){var t=s.deletions;if(null!==t)for(var a=0;a<t.length;a++){var n=t[a];try{var i=e,l=s,o=l;e:for(;null!==o;){switch(o.tag){case 5:co=o.stateNode,uo=!1;break e;case 3:case 4:co=o.stateNode.containerInfo,uo=!0;break e}o=o.return}if(null===co)throw Error(r(160));ho(i,l,n),co=null,uo=!1;var c=n.alternate;null!==c&&(c.return=null),n.return=null}catch(d){kc(n,s,d)}}if(12854&s.subtreeFlags)for(s=s.child;null!==s;)fo(s,e),s=s.sibling}function fo(e,s){var t=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xo(s,e),bo(e),4&a){try{so(3,e,e.return),to(3,e)}catch(f){kc(e,e.return,f)}try{so(5,e,e.return)}catch(f){kc(e,e.return,f)}}break;case 1:xo(s,e),bo(e),512&a&&null!==t&&Xl(t,t.return);break;case 5:if(xo(s,e),bo(e),512&a&&null!==t&&Xl(t,t.return),32&e.flags){var n=e.stateNode;try{me(n,"")}catch(f){kc(e,e.return,f)}}if(4&a&&null!=(n=e.stateNode)){var i=e.memoizedProps,l=null!==t?t.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&Q(n,i),ge(o,l);var d=ge(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];"style"===u?fe(n,m):"dangerouslySetInnerHTML"===u?ue(n,m):"children"===u?me(n,m):g(n,u,m,d)}switch(o){case"input":X(n,i);break;case"textarea":re(n,i);break;case"select":var h=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?te(n,!!i.multiple,p,!1):h!==!!i.multiple&&(null!=i.defaultValue?te(n,!!i.multiple,i.defaultValue,!0):te(n,!!i.multiple,i.multiple?[]:"",!1))}n[hn]=i}catch(f){kc(e,e.return,f)}}break;case 6:if(xo(s,e),bo(e),4&a){if(null===e.stateNode)throw Error(r(162));n=e.stateNode,i=e.memoizedProps;try{n.nodeValue=i}catch(f){kc(e,e.return,f)}}break;case 3:if(xo(s,e),bo(e),4&a&&null!==t&&t.memoizedState.isDehydrated)try{Us(s.containerInfo)}catch(f){kc(e,e.return,f)}break;case 4:default:xo(s,e),bo(e);break;case 13:xo(s,e),bo(e),8192&(n=e.child).flags&&(i=null!==n.memoizedState,n.stateNode.isHidden=i,!i||null!==n.alternate&&null!==n.alternate.memoizedState||(Ho=Qe())),4&a&&po(e);break;case 22:if(u=null!==t&&null!==t.memoizedState,1&e.mode?(Kl=(d=Kl)||u,xo(s,e),Kl=d):xo(s,e),bo(e),8192&a){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Ql=e,u=e.child;null!==u;){for(m=Ql=u;null!==Ql;){switch(p=(h=Ql).child,h.tag){case 0:case 11:case 14:case 15:so(4,h,h.return);break;case 1:Xl(h,h.return);var x=h.stateNode;if("function"===typeof x.componentWillUnmount){a=h,t=h.return;try{s=a,x.props=s.memoizedProps,x.state=s.memoizedState,x.componentWillUnmount()}catch(f){kc(a,t,f)}}break;case 5:Xl(h,h.return);break;case 22:if(null!==h.memoizedState){yo(m);continue}}null!==p?(p.return=h,Ql=p):yo(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,d?"function"===typeof(i=n.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=m.stateNode,l=void 0!==(c=m.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=xe("display",l))}catch(f){kc(e,e.return,f)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(f){kc(e,e.return,f)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:xo(s,e),bo(e),4&a&&po(e);case 21:}}function bo(e){var s=e.flags;if(2&s){try{e:{for(var t=e.return;null!==t;){if(ro(t)){var a=t;break e}t=t.return}throw Error(r(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(me(n,""),a.flags&=-33),oo(e,io(e),n);break;case 3:case 4:var i=a.stateNode.containerInfo;lo(e,io(e),i);break;default:throw Error(r(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&s&&(e.flags&=-4097)}function vo(e,s,t){Ql=e,go(e,s,t)}function go(e,s,t){for(var a=0!==(1&e.mode);null!==Ql;){var n=Ql,r=n.child;if(22===n.tag&&a){var i=null!==n.memoizedState||Gl;if(!i){var l=n.alternate,o=null!==l&&null!==l.memoizedState||Kl;l=Gl;var c=Kl;if(Gl=i,(Kl=o)&&!c)for(Ql=n;null!==Ql;)o=(i=Ql).child,22===i.tag&&null!==i.memoizedState?No(n):null!==o?(o.return=i,Ql=o):No(n);for(;null!==r;)Ql=r,go(r,s,t),r=r.sibling;Ql=n,Gl=l,Kl=c}jo(e)}else 0!==(8772&n.subtreeFlags)&&null!==r?(r.return=n,Ql=r):jo(e)}}function jo(e){for(;null!==Ql;){var s=Ql;if(0!==(8772&s.flags)){var t=s.alternate;try{if(0!==(8772&s.flags))switch(s.tag){case 0:case 11:case 15:Kl||to(5,s);break;case 1:var a=s.stateNode;if(4&s.flags&&!Kl)if(null===t)a.componentDidMount();else{var n=s.elementType===s.type?t.memoizedProps:sl(s.type,t.memoizedProps);a.componentDidUpdate(n,t.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var i=s.updateQueue;null!==i&&qr(s,i,a);break;case 3:var l=s.updateQueue;if(null!==l){if(t=null,null!==s.child)switch(s.child.tag){case 5:case 1:t=s.child.stateNode}qr(s,l,t)}break;case 5:var o=s.stateNode;if(null===t&&4&s.flags){t=o;var c=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===s.memoizedState){var d=s.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Us(m)}}}break;default:throw Error(r(163))}Kl||512&s.flags&&ao(s)}catch(h){kc(s,s.return,h)}}if(s===e){Ql=null;break}if(null!==(t=s.sibling)){t.return=s.return,Ql=t;break}Ql=s.return}}function yo(e){for(;null!==Ql;){var s=Ql;if(s===e){Ql=null;break}var t=s.sibling;if(null!==t){t.return=s.return,Ql=t;break}Ql=s.return}}function No(e){for(;null!==Ql;){var s=Ql;try{switch(s.tag){case 0:case 11:case 15:var t=s.return;try{to(4,s)}catch(o){kc(s,t,o)}break;case 1:var a=s.stateNode;if("function"===typeof a.componentDidMount){var n=s.return;try{a.componentDidMount()}catch(o){kc(s,n,o)}}var r=s.return;try{ao(s)}catch(o){kc(s,r,o)}break;case 5:var i=s.return;try{ao(s)}catch(o){kc(s,i,o)}}}catch(o){kc(s,s.return,o)}if(s===e){Ql=null;break}var l=s.sibling;if(null!==l){l.return=s.return,Ql=l;break}Ql=s.return}}var wo,ko=Math.ceil,So=j.ReactCurrentDispatcher,Co=j.ReactCurrentOwner,To=j.ReactCurrentBatchConfig,Po=0,Ro=null,Eo=null,_o=0,Ao=0,Do=kn(0),Lo=0,Oo=null,Io=0,Mo=0,Fo=0,$o=null,zo=null,Ho=0,Uo=1/0,qo=null,Bo=!1,Wo=null,Vo=null,Jo=!1,Go=null,Ko=0,Yo=0,Qo=null,Xo=-1,Zo=0;function ec(){return 0!==(6&Po)?Qe():-1!==Xo?Xo:Xo=Qe()}function sc(e){return 0===(1&e.mode)?1:0!==(2&Po)&&0!==_o?_o&-_o:null!==xr.transition?(0===Zo&&(Zo=xs()),Zo):0!==(e=gs)?e:e=void 0===(e=window.event)?16:Ys(e.type)}function tc(e,s,t,a){if(50<Yo)throw Yo=0,Qo=null,Error(r(185));bs(e,t,a),0!==(2&Po)&&e===Ro||(e===Ro&&(0===(2&Po)&&(Mo|=t),4===Lo&&lc(e,_o)),ac(e,a),1===t&&0===Po&&0===(1&s.mode)&&(Uo=Qe()+500,$n&&Un()))}function ac(e,s){var t=e.callbackNode;!function(e,s){for(var t=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,r=e.pendingLanes;0<r;){var i=31-is(r),l=1<<i,o=n[i];-1===o?0!==(l&t)&&0===(l&a)||(n[i]=hs(l,s)):o<=s&&(e.expiredLanes|=l),r&=~l}}(e,s);var a=ms(e,e===Ro?_o:0);if(0===a)null!==t&&Ge(t),e.callbackNode=null,e.callbackPriority=0;else if(s=a&-a,e.callbackPriority!==s){if(null!=t&&Ge(t),1===s)0===e.tag?function(e){$n=!0,Hn(e)}(oc.bind(null,e)):Hn(oc.bind(null,e)),rn(function(){0===(6&Po)&&Un()}),t=null;else{switch(js(a)){case 1:t=Ze;break;case 4:t=es;break;case 16:default:t=ss;break;case 536870912:t=as}t=Rc(t,nc.bind(null,e))}e.callbackPriority=s,e.callbackNode=t}}function nc(e,s){if(Xo=-1,Zo=0,0!==(6&Po))throw Error(r(327));var t=e.callbackNode;if(Nc()&&e.callbackNode!==t)return null;var a=ms(e,e===Ro?_o:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||s)s=fc(e,a);else{s=a;var n=Po;Po|=2;var i=pc();for(Ro===e&&_o===s||(qo=null,Uo=Qe()+500,mc(e,s));;)try{vc();break}catch(o){hc(e,o)}Cr(),So.current=i,Po=n,null!==Eo?s=0:(Ro=null,_o=0,s=Lo)}if(0!==s){if(2===s&&(0!==(n=ps(e))&&(a=n,s=rc(e,n))),1===s)throw t=Oo,mc(e,0),lc(e,a),ac(e,Qe()),t;if(6===s)lc(e,a);else{if(n=e.current.alternate,0===(30&a)&&!function(e){for(var s=e;;){if(16384&s.flags){var t=s.updateQueue;if(null!==t&&null!==(t=t.stores))for(var a=0;a<t.length;a++){var n=t[a],r=n.getSnapshot;n=n.value;try{if(!ia(r(),n))return!1}catch(l){return!1}}}if(t=s.child,16384&s.subtreeFlags&&null!==t)t.return=s,s=t;else{if(s===e)break;for(;null===s.sibling;){if(null===s.return||s.return===e)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}(n)&&(2===(s=fc(e,a))&&(0!==(i=ps(e))&&(a=i,s=rc(e,i))),1===s))throw t=Oo,mc(e,0),lc(e,a),ac(e,Qe()),t;switch(e.finishedWork=n,e.finishedLanes=a,s){case 0:case 1:throw Error(r(345));case 2:case 5:yc(e,zo,qo);break;case 3:if(lc(e,a),(130023424&a)===a&&10<(s=Ho+500-Qe())){if(0!==ms(e,0))break;if(((n=e.suspendedLanes)&a)!==a){ec(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=tn(yc.bind(null,e,zo,qo),s);break}yc(e,zo,qo);break;case 4:if(lc(e,a),(4194240&a)===a)break;for(s=e.eventTimes,n=-1;0<a;){var l=31-is(a);i=1<<l,(l=s[l])>n&&(n=l),a&=~i}if(a=n,10<(a=(120>(a=Qe()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*ko(a/1960))-a)){e.timeoutHandle=tn(yc.bind(null,e,zo,qo),a);break}yc(e,zo,qo);break;default:throw Error(r(329))}}}return ac(e,Qe()),e.callbackNode===t?nc.bind(null,e):null}function rc(e,s){var t=$o;return e.current.memoizedState.isDehydrated&&(mc(e,s).flags|=256),2!==(e=fc(e,s))&&(s=zo,zo=t,null!==s&&ic(s)),e}function ic(e){null===zo?zo=e:zo.push.apply(zo,e)}function lc(e,s){for(s&=~Fo,s&=~Mo,e.suspendedLanes|=s,e.pingedLanes&=~s,e=e.expirationTimes;0<s;){var t=31-is(s),a=1<<t;e[t]=-1,s&=~a}}function oc(e){if(0!==(6&Po))throw Error(r(327));Nc();var s=ms(e,0);if(0===(1&s))return ac(e,Qe()),null;var t=fc(e,s);if(0!==e.tag&&2===t){var a=ps(e);0!==a&&(s=a,t=rc(e,a))}if(1===t)throw t=Oo,mc(e,0),lc(e,s),ac(e,Qe()),t;if(6===t)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=s,yc(e,zo,qo),ac(e,Qe()),null}function cc(e,s){var t=Po;Po|=1;try{return e(s)}finally{0===(Po=t)&&(Uo=Qe()+500,$n&&Un())}}function dc(e){null!==Go&&0===Go.tag&&0===(6&Po)&&Nc();var s=Po;Po|=1;var t=To.transition,a=gs;try{if(To.transition=null,gs=1,e)return e()}finally{gs=a,To.transition=t,0===(6&(Po=s))&&Un()}}function uc(){Ao=Do.current,Sn(Do)}function mc(e,s){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(-1!==t&&(e.timeoutHandle=-1,an(t)),null!==Eo)for(t=Eo.return;null!==t;){var a=t;switch(sr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Dn();break;case 3:Yr(),Sn(Rn),Sn(Pn),ti();break;case 5:Xr(a);break;case 4:Yr();break;case 13:case 19:Sn(Zr);break;case 10:Tr(a.type._context);break;case 22:case 23:uc()}t=t.return}if(Ro=e,Eo=e=Dc(e.current,null),_o=Ao=s,Lo=0,Oo=null,Fo=Mo=Io=0,zo=$o=null,null!==_r){for(s=0;s<_r.length;s++)if(null!==(a=(t=_r[s]).interleaved)){t.interleaved=null;var n=a.next,r=t.pending;if(null!==r){var i=r.next;r.next=n,a.next=i}t.pending=a}_r=null}return e}function hc(e,s){for(;;){var t=Eo;try{if(Cr(),ai.current=Qi,ci){for(var a=ii.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}ci=!1}if(ri=0,oi=li=ii=null,di=!1,ui=0,Co.current=null,null===t||null===t.return){Lo=1,Oo=s,Eo=null;break}e:{var i=e,l=t.return,o=t,c=s;if(s=_o,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=xl(l);if(null!==p){p.flags&=-257,fl(p,l,o,0,s),1&p.mode&&pl(i,d,s),c=d;var x=(s=p).updateQueue;if(null===x){var f=new Set;f.add(c),s.updateQueue=f}else x.add(c);break e}if(0===(1&s)){pl(i,d,s),xc();break e}c=Error(r(426))}else if(nr&&1&o.mode){var b=xl(l);if(null!==b){0===(65536&b.flags)&&(b.flags|=256),fl(b,l,o,0,s),pr(ol(c,o));break e}}i=c=ol(c,o),4!==Lo&&(Lo=2),null===$o?$o=[i]:$o.push(i),i=l;do{switch(i.tag){case 3:i.flags|=65536,s&=-s,i.lanes|=s,Hr(i,ml(0,c,s));break e;case 1:o=c;var v=i.type,g=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==g&&"function"===typeof g.componentDidCatch&&(null===Vo||!Vo.has(g)))){i.flags|=65536,s&=-s,i.lanes|=s,Hr(i,hl(i,o,s));break e}}i=i.return}while(null!==i)}jc(t)}catch(j){s=j,Eo===t&&null!==t&&(Eo=t=t.return);continue}break}}function pc(){var e=So.current;return So.current=Qi,null===e?Qi:e}function xc(){0!==Lo&&3!==Lo&&2!==Lo||(Lo=4),null===Ro||0===(268435455&Io)&&0===(268435455&Mo)||lc(Ro,_o)}function fc(e,s){var t=Po;Po|=2;var a=pc();for(Ro===e&&_o===s||(qo=null,mc(e,s));;)try{bc();break}catch(n){hc(e,n)}if(Cr(),Po=t,So.current=a,null!==Eo)throw Error(r(261));return Ro=null,_o=0,Lo}function bc(){for(;null!==Eo;)gc(Eo)}function vc(){for(;null!==Eo&&!Ke();)gc(Eo)}function gc(e){var s=wo(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,null===s?jc(e):Eo=s,Co.current=null}function jc(e){var s=e;do{var t=s.alternate;if(e=s.return,0===(32768&s.flags)){if(null!==(t=Vl(t,s,Ao)))return void(Eo=t)}else{if(null!==(t=Jl(t,s)))return t.flags&=32767,void(Eo=t);if(null===e)return Lo=6,void(Eo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(s=s.sibling))return void(Eo=s);Eo=s=e}while(null!==s);0===Lo&&(Lo=5)}function yc(e,s,t){var a=gs,n=To.transition;try{To.transition=null,gs=1,function(e,s,t,a){do{Nc()}while(null!==Go);if(0!==(6&Po))throw Error(r(327));t=e.finishedWork;var n=e.finishedLanes;if(null===t)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var i=t.lanes|t.childLanes;if(function(e,s){var t=e.pendingLanes&~s;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=s,e.mutableReadLanes&=s,e.entangledLanes&=s,s=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<t;){var n=31-is(t),r=1<<n;s[n]=0,a[n]=-1,e[n]=-1,t&=~r}}(e,i),e===Ro&&(Eo=Ro=null,_o=0),0===(2064&t.subtreeFlags)&&0===(2064&t.flags)||Jo||(Jo=!0,Rc(ss,function(){return Nc(),null})),i=0!==(15990&t.flags),0!==(15990&t.subtreeFlags)||i){i=To.transition,To.transition=null;var l=gs;gs=1;var o=Po;Po|=4,Co.current=null,function(e,s){if(Za=Bs,ma(e=ua())){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(t=(t=e.ownerDocument)&&t.defaultView||window).getSelection&&t.getSelection();if(a&&0!==a.rangeCount){t=a.anchorNode;var n=a.anchorOffset,i=a.focusNode;a=a.focusOffset;try{t.nodeType,i.nodeType}catch(y){t=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,h=null;s:for(;;){for(var p;m!==t||0!==n&&3!==m.nodeType||(o=l+n),m!==i||0!==a&&3!==m.nodeType||(c=l+a),3===m.nodeType&&(l+=m.nodeValue.length),null!==(p=m.firstChild);)h=m,m=p;for(;;){if(m===e)break s;if(h===t&&++d===n&&(o=l),h===i&&++u===a&&(c=l),null!==(p=m.nextSibling))break;h=(m=h).parentNode}m=p}t=-1===o||-1===c?null:{start:o,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(en={focusedElem:e,selectionRange:t},Bs=!1,Ql=s;null!==Ql;)if(e=(s=Ql).child,0!==(1028&s.subtreeFlags)&&null!==e)e.return=s,Ql=e;else for(;null!==Ql;){s=Ql;try{var x=s.alternate;if(0!==(1024&s.flags))switch(s.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==x){var f=x.memoizedProps,b=x.memoizedState,v=s.stateNode,g=v.getSnapshotBeforeUpdate(s.elementType===s.type?f:sl(s.type,f),b);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var j=s.stateNode.containerInfo;1===j.nodeType?j.textContent="":9===j.nodeType&&j.documentElement&&j.removeChild(j.documentElement);break;default:throw Error(r(163))}}catch(y){kc(s,s.return,y)}if(null!==(e=s.sibling)){e.return=s.return,Ql=e;break}Ql=s.return}x=eo,eo=!1}(e,t),fo(t,e),ha(en),Bs=!!Za,en=Za=null,e.current=t,vo(t,e,n),Ye(),Po=o,gs=l,To.transition=i}else e.current=t;if(Jo&&(Jo=!1,Go=e,Ko=n),i=e.pendingLanes,0===i&&(Vo=null),function(e){if(rs&&"function"===typeof rs.onCommitFiberRoot)try{rs.onCommitFiberRoot(ns,e,void 0,128===(128&e.current.flags))}catch(s){}}(t.stateNode),ac(e,Qe()),null!==s)for(a=e.onRecoverableError,t=0;t<s.length;t++)n=s[t],a(n.value,{componentStack:n.stack,digest:n.digest});if(Bo)throw Bo=!1,e=Wo,Wo=null,e;0!==(1&Ko)&&0!==e.tag&&Nc(),i=e.pendingLanes,0!==(1&i)?e===Qo?Yo++:(Yo=0,Qo=e):Yo=0,Un()}(e,s,t,a)}finally{To.transition=n,gs=a}return null}function Nc(){if(null!==Go){var e=js(Ko),s=To.transition,t=gs;try{if(To.transition=null,gs=16>e?16:e,null===Go)var a=!1;else{if(e=Go,Go=null,Ko=0,0!==(6&Po))throw Error(r(331));var n=Po;for(Po|=4,Ql=e.current;null!==Ql;){var i=Ql,l=i.child;if(0!==(16&Ql.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Ql=d;null!==Ql;){var u=Ql;switch(u.tag){case 0:case 11:case 15:so(8,u,i)}var m=u.child;if(null!==m)m.return=u,Ql=m;else for(;null!==Ql;){var h=(u=Ql).sibling,p=u.return;if(no(u),u===d){Ql=null;break}if(null!==h){h.return=p,Ql=h;break}Ql=p}}}var x=i.alternate;if(null!==x){var f=x.child;if(null!==f){x.child=null;do{var b=f.sibling;f.sibling=null,f=b}while(null!==f)}}Ql=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Ql=l;else e:for(;null!==Ql;){if(0!==(2048&(i=Ql).flags))switch(i.tag){case 0:case 11:case 15:so(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Ql=v;break e}Ql=i.return}}var g=e.current;for(Ql=g;null!==Ql;){var j=(l=Ql).child;if(0!==(2064&l.subtreeFlags)&&null!==j)j.return=l,Ql=j;else e:for(l=g;null!==Ql;){if(0!==(2048&(o=Ql).flags))try{switch(o.tag){case 0:case 11:case 15:to(9,o)}}catch(N){kc(o,o.return,N)}if(o===l){Ql=null;break e}var y=o.sibling;if(null!==y){y.return=o.return,Ql=y;break e}Ql=o.return}}if(Po=n,Un(),rs&&"function"===typeof rs.onPostCommitFiberRoot)try{rs.onPostCommitFiberRoot(ns,e)}catch(N){}a=!0}return a}finally{gs=t,To.transition=s}}return!1}function wc(e,s,t){e=$r(e,s=ml(0,s=ol(t,s),1),1),s=ec(),null!==e&&(bs(e,1,s),ac(e,s))}function kc(e,s,t){if(3===e.tag)wc(e,e,t);else for(;null!==s;){if(3===s.tag){wc(s,e,t);break}if(1===s.tag){var a=s.stateNode;if("function"===typeof s.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Vo||!Vo.has(a))){s=$r(s,e=hl(s,e=ol(t,e),1),1),e=ec(),null!==s&&(bs(s,1,e),ac(s,e));break}}s=s.return}}function Sc(e,s,t){var a=e.pingCache;null!==a&&a.delete(s),s=ec(),e.pingedLanes|=e.suspendedLanes&t,Ro===e&&(_o&t)===t&&(4===Lo||3===Lo&&(130023424&_o)===_o&&500>Qe()-Ho?mc(e,0):Fo|=t),ac(e,s)}function Cc(e,s){0===s&&(0===(1&e.mode)?s=1:(s=ds,0===(130023424&(ds<<=1))&&(ds=4194304)));var t=ec();null!==(e=Lr(e,s))&&(bs(e,s,t),ac(e,t))}function Tc(e){var s=e.memoizedState,t=0;null!==s&&(t=s.retryLane),Cc(e,t)}function Pc(e,s){var t=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(t=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(s),Cc(e,t)}function Rc(e,s){return Je(e,s)}function Ec(e,s,t,a){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _c(e,s,t,a){return new Ec(e,s,t,a)}function Ac(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,s){var t=e.alternate;return null===t?((t=_c(e.tag,s,e.key,e.mode)).elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=s,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=14680064&e.flags,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,s=e.dependencies,t.dependencies=null===s?null:{lanes:s.lanes,firstContext:s.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function Lc(e,s,t,a,n,i){var l=2;if(a=e,"function"===typeof e)Ac(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case w:return Oc(t.children,n,i,s);case k:l=8,n|=8;break;case S:return(e=_c(12,t,s,2|n)).elementType=S,e.lanes=i,e;case R:return(e=_c(13,t,s,n)).elementType=R,e.lanes=i,e;case E:return(e=_c(19,t,s,n)).elementType=E,e.lanes=i,e;case D:return Ic(t,n,i,s);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:l=10;break e;case T:l=9;break e;case P:l=11;break e;case _:l=14;break e;case A:l=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(s=_c(l,t,s,n)).elementType=e,s.type=a,s.lanes=i,s}function Oc(e,s,t,a){return(e=_c(7,e,a,s)).lanes=t,e}function Ic(e,s,t,a){return(e=_c(22,e,a,s)).elementType=D,e.lanes=t,e.stateNode={isHidden:!1},e}function Mc(e,s,t){return(e=_c(6,e,null,s)).lanes=t,e}function Fc(e,s,t){return(s=_c(4,null!==e.children?e.children:[],e.key,s)).lanes=t,s.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},s}function $c(e,s,t,a,n){this.tag=s,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fs(0),this.expirationTimes=fs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fs(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function zc(e,s,t,a,n,r,i,l,o){return e=new $c(e,s,t,l,o),1===s?(s=1,!0===r&&(s|=8)):s=0,r=_c(3,null,null,s),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ir(r),e}function Hc(e){if(!e)return Tn;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var s=e;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(An(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(null!==s);throw Error(r(171))}if(1===e.tag){var t=e.type;if(An(t))return On(e,t,s)}return s}function Uc(e,s,t,a,n,r,i,l,o){return(e=zc(t,a,!0,e,0,r,0,l,o)).context=Hc(null),t=e.current,(r=Fr(a=ec(),n=sc(t))).callback=void 0!==s&&null!==s?s:null,$r(t,r,n),e.current.lanes=n,bs(e,n,a),ac(e,a),e}function qc(e,s,t,a){var n=s.current,r=ec(),i=sc(n);return t=Hc(t),null===s.context?s.context=t:s.pendingContext=t,(s=Fr(r,i)).payload={element:e},null!==(a=void 0===a?null:a)&&(s.callback=a),null!==(e=$r(n,s,i))&&(tc(e,n,i,r),zr(e,n,i)),i}function Bc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wc(e,s){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var t=e.retryLane;e.retryLane=0!==t&&t<s?t:s}}function Vc(e,s){Wc(e,s),(e=e.alternate)&&Wc(e,s)}wo=function(e,s,t){if(null!==e)if(e.memoizedProps!==s.pendingProps||Rn.current)vl=!0;else{if(0===(e.lanes&t)&&0===(128&s.flags))return vl=!1,function(e,s,t){switch(s.tag){case 3:Pl(s),hr();break;case 5:Qr(s);break;case 1:An(s.type)&&In(s);break;case 4:Kr(s,s.stateNode.containerInfo);break;case 10:var a=s.type._context,n=s.memoizedProps.value;Cn(Nr,a._currentValue),a._currentValue=n;break;case 13:if(null!==(a=s.memoizedState))return null!==a.dehydrated?(Cn(Zr,1&Zr.current),s.flags|=128,null):0!==(t&s.child.childLanes)?Il(e,s,t):(Cn(Zr,1&Zr.current),null!==(e=ql(e,s,t))?e.sibling:null);Cn(Zr,1&Zr.current);break;case 19:if(a=0!==(t&s.childLanes),0!==(128&e.flags)){if(a)return Hl(e,s,t);s.flags|=128}if(null!==(n=s.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Zr,Zr.current),a)break;return null;case 22:case 23:return s.lanes=0,wl(e,s,t)}return ql(e,s,t)}(e,s,t);vl=0!==(131072&e.flags)}else vl=!1,nr&&0!==(1048576&s.flags)&&Zn(s,Vn,s.index);switch(s.lanes=0,s.tag){case 2:var a=s.type;Ul(e,s),e=s.pendingProps;var n=_n(s,Pn.current);Rr(s,t),n=xi(null,s,a,e,n,t);var i=fi();return s.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(s.tag=1,s.memoizedState=null,s.updateQueue=null,An(a)?(i=!0,In(s)):i=!1,s.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Ir(s),n.updater=al,s.stateNode=n,n._reactInternals=s,ll(s,a,e,t),s=Tl(null,s,a,!0,i,t)):(s.tag=0,nr&&i&&er(s),gl(null,s,n,t),s=s.child),s;case 16:a=s.elementType;e:{switch(Ul(e,s),e=s.pendingProps,a=(n=a._init)(a._payload),s.type=a,n=s.tag=function(e){if("function"===typeof e)return Ac(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===_)return 14}return 2}(a),e=sl(a,e),n){case 0:s=Sl(null,s,a,e,t);break e;case 1:s=Cl(null,s,a,e,t);break e;case 11:s=jl(null,s,a,e,t);break e;case 14:s=yl(null,s,a,sl(a.type,e),t);break e}throw Error(r(306,a,""))}return s;case 0:return a=s.type,n=s.pendingProps,Sl(e,s,a,n=s.elementType===a?n:sl(a,n),t);case 1:return a=s.type,n=s.pendingProps,Cl(e,s,a,n=s.elementType===a?n:sl(a,n),t);case 3:e:{if(Pl(s),null===e)throw Error(r(387));a=s.pendingProps,n=(i=s.memoizedState).element,Mr(e,s),Ur(s,a,null,t);var l=s.memoizedState;if(a=l.element,i.isDehydrated){if(i={element:a,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},s.updateQueue.baseState=i,s.memoizedState=i,256&s.flags){s=Rl(e,s,a,t,n=ol(Error(r(423)),s));break e}if(a!==n){s=Rl(e,s,a,t,n=ol(Error(r(424)),s));break e}for(ar=cn(s.stateNode.containerInfo.firstChild),tr=s,nr=!0,rr=null,t=yr(s,null,a,t),s.child=t;t;)t.flags=-3&t.flags|4096,t=t.sibling}else{if(hr(),a===n){s=ql(e,s,t);break e}gl(e,s,a,t)}s=s.child}return s;case 5:return Qr(s),null===e&&cr(s),a=s.type,n=s.pendingProps,i=null!==e?e.memoizedProps:null,l=n.children,sn(a,n)?l=null:null!==i&&sn(a,i)&&(s.flags|=32),kl(e,s),gl(e,s,l,t),s.child;case 6:return null===e&&cr(s),null;case 13:return Il(e,s,t);case 4:return Kr(s,s.stateNode.containerInfo),a=s.pendingProps,null===e?s.child=jr(s,null,a,t):gl(e,s,a,t),s.child;case 11:return a=s.type,n=s.pendingProps,jl(e,s,a,n=s.elementType===a?n:sl(a,n),t);case 7:return gl(e,s,s.pendingProps,t),s.child;case 8:case 12:return gl(e,s,s.pendingProps.children,t),s.child;case 10:e:{if(a=s.type._context,n=s.pendingProps,i=s.memoizedProps,l=n.value,Cn(Nr,a._currentValue),a._currentValue=l,null!==i)if(ia(i.value,l)){if(i.children===n.children&&!Rn.current){s=ql(e,s,t);break e}}else for(null!==(i=s.child)&&(i.return=s);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===a){if(1===i.tag){(c=Fr(-1,t&-t)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=t,null!==(c=i.alternate)&&(c.lanes|=t),Pr(i.return,t,s),o.lanes|=t;break}c=c.next}}else if(10===i.tag)l=i.type===s.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(r(341));l.lanes|=t,null!==(o=l.alternate)&&(o.lanes|=t),Pr(l,t,s),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===s){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}gl(e,s,n.children,t),s=s.child}return s;case 9:return n=s.type,a=s.pendingProps.children,Rr(s,t),a=a(n=Er(n)),s.flags|=1,gl(e,s,a,t),s.child;case 14:return n=sl(a=s.type,s.pendingProps),yl(e,s,a,n=sl(a.type,n),t);case 15:return Nl(e,s,s.type,s.pendingProps,t);case 17:return a=s.type,n=s.pendingProps,n=s.elementType===a?n:sl(a,n),Ul(e,s),s.tag=1,An(a)?(e=!0,In(s)):e=!1,Rr(s,t),rl(s,a,n),ll(s,a,n,t),Tl(null,s,a,!0,e,t);case 19:return Hl(e,s,t);case 22:return wl(e,s,t)}throw Error(r(156,s.tag))};var Jc="function"===typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xc(){}function Zc(e,s,t,a,n){var r=t._reactRootContainer;if(r){var i=r;if("function"===typeof n){var l=n;n=function(){var e=Bc(i);l.call(e)}}qc(s,i,e,n)}else i=function(e,s,t,a,n){if(n){if("function"===typeof a){var r=a;a=function(){var e=Bc(i);r.call(e)}}var i=Uc(s,a,e,0,null,!1,0,"",Xc);return e._reactRootContainer=i,e[pn]=i.current,Ha(8===e.nodeType?e.parentNode:e),dc(),i}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof a){var l=a;a=function(){var e=Bc(o);l.call(e)}}var o=zc(e,0,!1,null,0,!1,0,"",Xc);return e._reactRootContainer=o,e[pn]=o.current,Ha(8===e.nodeType?e.parentNode:e),dc(function(){qc(s,o,t,a)}),o}(t,s,e,n,a);return Bc(i)}Kc.prototype.render=Gc.prototype.render=function(e){var s=this._internalRoot;if(null===s)throw Error(r(409));qc(e,s,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var s=e.containerInfo;dc(function(){qc(null,e,null,null)}),s[pn]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var s=ks();e={blockedOn:null,target:e,priority:s};for(var t=0;t<Ds.length&&0!==s&&s<Ds[t].priority;t++);Ds.splice(t,0,e),0===t&&Ms(e)}},ys=function(e){switch(e.tag){case 3:var s=e.stateNode;if(s.current.memoizedState.isDehydrated){var t=us(s.pendingLanes);0!==t&&(vs(s,1|t),ac(s,Qe()),0===(6&Po)&&(Uo=Qe()+500,Un()))}break;case 13:dc(function(){var s=Lr(e,1);if(null!==s){var t=ec();tc(s,e,1,t)}}),Vc(e,1)}},Ns=function(e){if(13===e.tag){var s=Lr(e,134217728);if(null!==s)tc(s,e,134217728,ec());Vc(e,134217728)}},ws=function(e){if(13===e.tag){var s=sc(e),t=Lr(e,s);if(null!==t)tc(t,e,s,ec());Vc(e,s)}},ks=function(){return gs},Ss=function(e,s){var t=gs;try{return gs=e,s()}finally{gs=t}},Ne=function(e,s,t){switch(s){case"input":if(X(e,t),s=t.name,"radio"===t.type&&null!=s){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<t.length;s++){var a=t[s];if(a!==e&&a.form===e.form){var n=yn(a);if(!n)throw Error(r(90));J(a),X(a,n)}}}break;case"textarea":re(e,t);break;case"select":null!=(s=t.value)&&te(e,!!t.multiple,s,!1)}},Pe=cc,Re=dc;var ed={usingClientEntryPoint:!1,Events:[gn,jn,yn,Ce,Te,cc]},sd={findFiberByHostInstance:vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},td={bundleType:sd.bundleType,version:sd.version,rendererPackageName:sd.rendererPackageName,rendererConfig:sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:j.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:sd.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ad=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ad.isDisabled&&ad.supportsFiber)try{ns=ad.inject(td),rs=ad}catch(de){}}s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,s.createPortal=function(e,s){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(s))throw Error(r(200));return function(e,s,t){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:N,key:null==a?null:""+a,children:e,containerInfo:s,implementation:t}}(e,s,null,t)},s.createRoot=function(e,s){if(!Yc(e))throw Error(r(299));var t=!1,a="",n=Jc;return null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(t=!0),void 0!==s.identifierPrefix&&(a=s.identifierPrefix),void 0!==s.onRecoverableError&&(n=s.onRecoverableError)),s=zc(e,1,!1,null,0,t,0,a,n),e[pn]=s.current,Ha(8===e.nodeType?e.parentNode:e),new Gc(s)},s.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var s=e._reactInternals;if(void 0===s){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=We(s))?null:e.stateNode},s.flushSync=function(e){return dc(e)},s.hydrate=function(e,s,t){if(!Qc(s))throw Error(r(200));return Zc(null,e,s,!0,t)},s.hydrateRoot=function(e,s,t){if(!Yc(e))throw Error(r(405));var a=null!=t&&t.hydratedSources||null,n=!1,i="",l=Jc;if(null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),s=Uc(s,null,e,1,null!=t?t:null,n,0,i,l),e[pn]=s.current,Ha(e),a)for(e=0;e<a.length;e++)n=(n=(t=a[e])._getVersion)(t._source),null==s.mutableSourceEagerHydrationData?s.mutableSourceEagerHydrationData=[t,n]:s.mutableSourceEagerHydrationData.push(t,n);return new Kc(s)},s.render=function(e,s,t){if(!Qc(s))throw Error(r(200));return Zc(null,e,s,!1,t)},s.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(r(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pn]=null})}),!0)},s.unstable_batchedUpdates=cc,s.unstable_renderSubtreeIntoContainer=function(e,s,t,a){if(!Qc(t))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return Zc(e,s,t,!1,a)},s.version="18.3.1-next-f1338f8080-20240426"},736:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const n=a(t(374));class r extends n.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const t=Array.from(new Set(s)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${t})`),this}contains(e,s){return"string"===typeof s?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return"string"===typeof s?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return"string"===typeof s?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s){let{config:t,type:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="";"plain"===a?n="pl":"phrase"===a?n="ph":"websearch"===a&&(n="w");const r=void 0===t?"":`(${t})`;return this.url.searchParams.append(e,`${n}fts${r}.${s}`),this}match(e){return Object.entries(e).forEach(e=>{let[s,t]=e;this.url.searchParams.append(s,`eq.${t}`)}),this}not(e,s,t){return this.url.searchParams.append(e,`not.${s}.${t}`),this}or(e){let{foreignTable:s,referencedTable:t=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=t?`${t}.or`:"or";return this.url.searchParams.append(a,`(${e})`),this}filter(e,s,t){return this.url.searchParams.append(e,`${s}.${t}`),this}}s.default=r},745:(e,s,t)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DEFAULT_HEADERS=void 0;const a=t(400);s.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${a.version}`}},829:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0});const n=a(t(736));s.default=class{constructor(e,s){let{headers:t={},schema:a,fetch:n}=s;this.url=e,this.headers=t,this.schema=a,this.fetch=n}select(e){let{head:s=!1,count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=s?"HEAD":"GET";let r=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e)).join("");return this.url.searchParams.set("select",i),t&&(this.headers.Prefer=`count=${t}`),new n.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e){let{count:s,defaultToNull:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),t||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const s=e.reduce((e,s)=>e.concat(Object.keys(s)),[]);if(s.length>0){const e=[...new Set(s)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e){let{onConflict:s,ignoreDuplicates:t=!1,count:a,defaultToNull:r=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=[`resolution=${t?"ignore":"merge"}-duplicates`];if(void 0!==s&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&i.push(this.headers.Prefer),a&&i.push(`count=${a}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const s=e.reduce((e,s)=>e.concat(Object.keys(s)),[]);if(s.length>0){const e=[...new Set(s)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new n.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e){let{count:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=[];return this.headers.Prefer&&t.push(this.headers.Prefer),s&&t.push(`count=${s}`),this.headers.Prefer=t.join(","),new n.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=[];return e&&s.push(`count=${e}`),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new n.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}},853:(e,s,t)=>{e.exports=t(234)},950:(e,s,t)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(s){console.error(s)}}(),e.exports=t(730)},980:function(e,s,t){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(s,"__esModule",{value:!0}),s.PostgrestError=s.PostgrestBuilder=s.PostgrestTransformBuilder=s.PostgrestFilterBuilder=s.PostgrestQueryBuilder=s.PostgrestClient=void 0;const n=a(t(210));s.PostgrestClient=n.default;const r=a(t(829));s.PostgrestQueryBuilder=r.default;const i=a(t(736));s.PostgrestFilterBuilder=i.default;const l=a(t(374));s.PostgrestTransformBuilder=l.default;const o=a(t(286));s.PostgrestBuilder=o.default;const c=a(t(611));s.PostgrestError=c.default,s.default={PostgrestClient:n.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:l.default,PostgrestBuilder:o.default,PostgrestError:c.default}}},s={};function t(a){var n=s[a];if(void 0!==n)return n.exports;var r=s[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}(()=>{var e,s=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(a,n){if(1&n&&(a=this(a)),8&n)return a;if("object"===typeof a&&a){if(4&n&&a.__esModule)return a;if(16&n&&"function"===typeof a.then)return a}var r=Object.create(null);t.r(r);var i={};e=e||[null,s({}),s([]),s(s)];for(var l=2&n&&a;"object"==typeof l&&!~e.indexOf(l);l=s(l))Object.getOwnPropertyNames(l).forEach(e=>i[e]=()=>a[e]);return i.default=()=>a,t.d(r,i),r}})(),t.d=(e,s)=>{for(var a in s)t.o(s,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:s[a]})},t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};t.r(a),t.d(a,{hasBrowserEnv:()=>Ms,hasStandardBrowserEnv:()=>$s,hasStandardBrowserWebWorkerEnv:()=>zs,navigator:()=>Fs,origin:()=>Hs});var n,r=t(43),i=t.t(r,2),l=t(391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(n||(n={}));const c="popstate";function d(e,s){if(!1===e||null===e||"undefined"===typeof e)throw new Error(s)}function u(e,s){if(!e){"undefined"!==typeof console&&console.warn(s);try{throw new Error(s)}catch(t){}}}function m(e,s){return{usr:e.state,key:e.key,idx:s}}function h(e,s,t,a){return void 0===t&&(t=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof s?x(s):s,{state:t,key:s&&s.key||a||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:s="/",search:t="",hash:a=""}=e;return t&&"?"!==t&&(s+="?"===t.charAt(0)?t:"?"+t),a&&"#"!==a&&(s+="#"===a.charAt(0)?a:"#"+a),s}function x(e){let s={};if(e){let t=e.indexOf("#");t>=0&&(s.hash=e.substr(t),e=e.substr(0,t));let a=e.indexOf("?");a>=0&&(s.search=e.substr(a),e=e.substr(0,a)),e&&(s.pathname=e)}return s}function f(e,s,t,a){void 0===a&&(a={});let{window:r=document.defaultView,v5Compat:i=!1}=a,l=r.history,u=n.Pop,x=null,f=b();function b(){return(l.state||{idx:null}).idx}function v(){u=n.Pop;let e=b(),s=null==e?null:e-f;f=e,x&&x({action:u,location:j.location,delta:s})}function g(e){let s="null"!==r.location.origin?r.location.origin:r.location.href,t="string"===typeof e?e:p(e);return t=t.replace(/ $/,"%20"),d(s,"No window.location.(origin|href) available to create URL for href: "+t),new URL(t,s)}null==f&&(f=0,l.replaceState(o({},l.state,{idx:f}),""));let j={get action(){return u},get location(){return e(r,l)},listen(e){if(x)throw new Error("A history only accepts one active listener");return r.addEventListener(c,v),x=e,()=>{r.removeEventListener(c,v),x=null}},createHref:e=>s(r,e),createURL:g,encodeLocation(e){let s=g(e);return{pathname:s.pathname,search:s.search,hash:s.hash}},push:function(e,s){u=n.Push;let a=h(j.location,e,s);t&&t(a,e),f=b()+1;let o=m(a,f),c=j.createHref(a);try{l.pushState(o,"",c)}catch(d){if(d instanceof DOMException&&"DataCloneError"===d.name)throw d;r.location.assign(c)}i&&x&&x({action:u,location:j.location,delta:1})},replace:function(e,s){u=n.Replace;let a=h(j.location,e,s);t&&t(a,e),f=b();let r=m(a,f),o=j.createHref(a);l.replaceState(r,"",o),i&&x&&x({action:u,location:j.location,delta:0})},go:e=>l.go(e)};return j}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,s,t){return void 0===t&&(t="/"),g(e,s,t,!1)}function g(e,s,t,a){let n=D(("string"===typeof s?x(s):s).pathname||"/",t);if(null==n)return null;let r=j(e);!function(e){e.sort((e,s)=>e.score!==s.score?s.score-e.score:function(e,s){let t=e.length===s.length&&e.slice(0,-1).every((e,t)=>e===s[t]);return t?e[e.length-1]-s[s.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),s.routesMeta.map(e=>e.childrenIndex)))}(r);let i=null;for(let l=0;null==i&&l<r.length;++l){let e=A(n);i=E(r[l],e,a)}return i}function j(e,s,t,a){void 0===s&&(s=[]),void 0===t&&(t=[]),void 0===a&&(a="");let n=(e,n,r)=>{let i={relativePath:void 0===r?e.path||"":r,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};i.relativePath.startsWith("/")&&(d(i.relativePath.startsWith(a),'Absolute route path "'+i.relativePath+'" nested under path "'+a+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(a.length));let l=F([a,i.relativePath]),o=t.concat(i);e.children&&e.children.length>0&&(d(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),j(e.children,s,o,l)),(null!=e.path||e.index)&&s.push({path:l,score:R(l,e.index),routesMeta:o})};return e.forEach((e,s)=>{var t;if(""!==e.path&&null!=(t=e.path)&&t.includes("?"))for(let a of y(e.path))n(e,s,a);else n(e,s)}),s}function y(e){let s=e.split("/");if(0===s.length)return[];let[t,...a]=s,n=t.endsWith("?"),r=t.replace(/\?$/,"");if(0===a.length)return n?[r,""]:[r];let i=y(a.join("/")),l=[];return l.push(...i.map(e=>""===e?r:[r,e].join("/"))),n&&l.push(...i),l.map(s=>e.startsWith("/")&&""===s?"/":s)}const N=/^:[\w-]+$/,w=3,k=2,S=1,C=10,T=-2,P=e=>"*"===e;function R(e,s){let t=e.split("/"),a=t.length;return t.some(P)&&(a+=T),s&&(a+=k),t.filter(e=>!P(e)).reduce((e,s)=>e+(N.test(s)?w:""===s?S:C),a)}function E(e,s,t){void 0===t&&(t=!1);let{routesMeta:a}=e,n={},r="/",i=[];for(let l=0;l<a.length;++l){let e=a[l],o=l===a.length-1,c="/"===r?s:s.slice(r.length)||"/",d=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},c),u=e.route;if(!d&&o&&t&&!a[a.length-1].route.index&&(d=_({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(n,d.params),i.push({params:n,pathname:F([r,d.pathname]),pathnameBase:$(F([r,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(r=F([r,d.pathnameBase]))}return i}function _(e,s){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[t,a]=function(e,s,t){void 0===s&&(s=!1);void 0===t&&(t=!0);u("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let a=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,s,t)=>(a.push({paramName:s,isOptional:null!=t}),t?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(a.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))");let r=new RegExp(n,s?void 0:"i");return[r,a]}(e.path,e.caseSensitive,e.end),n=s.match(t);if(!n)return null;let r=n[0],i=r.replace(/(.)\/+$/,"$1"),l=n.slice(1);return{params:a.reduce((e,s,t)=>{let{paramName:a,isOptional:n}=s;if("*"===a){let e=l[t]||"";i=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=l[t];return e[a]=n&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:i,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(s){return u(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+s+")."),e}}function D(e,s){if("/"===s)return e;if(!e.toLowerCase().startsWith(s.toLowerCase()))return null;let t=s.endsWith("/")?s.length-1:s.length,a=e.charAt(t);return a&&"/"!==a?null:e.slice(t)||"/"}function L(e,s,t,a){return"Cannot include a '"+e+"' character in a manually specified `to."+s+"` field ["+JSON.stringify(a)+"].  Please separate it out to the `to."+t+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,s)=>0===s||e.route.path&&e.route.path.length>0)}function I(e,s){let t=O(e);return s?t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase):t.map(e=>e.pathnameBase)}function M(e,s,t,a){let n;void 0===a&&(a=!1),"string"===typeof e?n=x(e):(n=o({},e),d(!n.pathname||!n.pathname.includes("?"),L("?","pathname","search",n)),d(!n.pathname||!n.pathname.includes("#"),L("#","pathname","hash",n)),d(!n.search||!n.search.includes("#"),L("#","search","hash",n)));let r,i=""===e||""===n.pathname,l=i?"/":n.pathname;if(null==l)r=t;else{let e=s.length-1;if(!a&&l.startsWith("..")){let s=l.split("/");for(;".."===s[0];)s.shift(),e-=1;n.pathname=s.join("/")}r=e>=0?s[e]:"/"}let c=function(e,s){void 0===s&&(s="/");let{pathname:t,search:a="",hash:n=""}="string"===typeof e?x(e):e,r=t?t.startsWith("/")?t:function(e,s){let t=s.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?t.length>1&&t.pop():"."!==e&&t.push(e)}),t.length>1?t.join("/"):"/"}(t,s):s;return{pathname:r,search:z(a),hash:H(n)}}(n,r),u=l&&"/"!==l&&l.endsWith("/"),m=(i||"."===l)&&t.endsWith("/");return c.pathname.endsWith("/")||!u&&!m||(c.pathname+="/"),c}const F=e=>e.join("/").replace(/\/\/+/g,"/"),$=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",H=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function U(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const q=["post","put","patch","delete"],B=(new Set(q),["get",...q]);new Set(B),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},W.apply(this,arguments)}const V=r.createContext(null);const J=r.createContext(null);const G=r.createContext(null);const K=r.createContext(null);const Y=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=r.createContext(null);function X(){return null!=r.useContext(K)}function Z(){return X()||d(!1),r.useContext(K).location}function ee(e){r.useContext(G).static||r.useLayoutEffect(e)}function se(){let{isDataRoute:e}=r.useContext(Y);return e?function(){let{router:e}=ue(ce.UseNavigateStable),s=he(de.UseNavigateStable),t=r.useRef(!1);return ee(()=>{t.current=!0}),r.useCallback(function(a,n){void 0===n&&(n={}),t.current&&("number"===typeof a?e.navigate(a):e.navigate(a,W({fromRouteId:s},n)))},[e,s])}():function(){X()||d(!1);let e=r.useContext(V),{basename:s,future:t,navigator:a}=r.useContext(G),{matches:n}=r.useContext(Y),{pathname:i}=Z(),l=JSON.stringify(I(n,t.v7_relativeSplatPath)),o=r.useRef(!1);return ee(()=>{o.current=!0}),r.useCallback(function(t,n){if(void 0===n&&(n={}),!o.current)return;if("number"===typeof t)return void a.go(t);let r=M(t,JSON.parse(l),i,"path"===n.relative);null==e&&"/"!==s&&(r.pathname="/"===r.pathname?s:F([s,r.pathname])),(n.replace?a.replace:a.push)(r,n.state,n)},[s,a,l,i,e])}()}function te(e,s){let{relative:t}=void 0===s?{}:s,{future:a}=r.useContext(G),{matches:n}=r.useContext(Y),{pathname:i}=Z(),l=JSON.stringify(I(n,a.v7_relativeSplatPath));return r.useMemo(()=>M(e,JSON.parse(l),i,"path"===t),[e,l,i,t])}function ae(e,s,t,a){X()||d(!1);let{navigator:i}=r.useContext(G),{matches:l}=r.useContext(Y),o=l[l.length-1],c=o?o.params:{},u=(o&&o.pathname,o?o.pathnameBase:"/");o&&o.route;let m,h=Z();if(s){var p;let e="string"===typeof s?x(s):s;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||d(!1),m=e}else m=h;let f=m.pathname||"/",b=f;if("/"!==u){let e=u.replace(/^\//,"").split("/");b="/"+f.replace(/^\//,"").split("/").slice(e.length).join("/")}let g=v(e,{pathname:b});let j=oe(g&&g.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:F([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:F([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,t,a);return s&&j?r.createElement(K.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:n.Pop}},j):j}function ne(){let e=function(){var e;let s=r.useContext(Q),t=me(de.UseRouteError),a=he(de.UseRouteError);if(void 0!==s)return s;return null==(e=t.errors)?void 0:e[a]}(),s=U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),t=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:a};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},s),t?r.createElement("pre",{style:n},t):null,null)}const re=r.createElement(ne,null);class ie extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||"idle"!==s.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return void 0!==this.state.error?r.createElement(Y.Provider,{value:this.props.routeContext},r.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:s,match:t,children:a}=e,n=r.useContext(V);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),r.createElement(Y.Provider,{value:s},a)}function oe(e,s,t,a){var n;if(void 0===s&&(s=[]),void 0===t&&(t=null),void 0===a&&(a=null),null==e){var i;if(!t)return null;if(t.errors)e=t.matches;else{if(!(null!=(i=a)&&i.v7_partialHydration&&0===s.length&&!t.initialized&&t.matches.length>0))return null;e=t.matches}}let l=e,o=null==(n=t)?void 0:n.errors;if(null!=o){let e=l.findIndex(e=>e.route.id&&void 0!==(null==o?void 0:o[e.route.id]));e>=0||d(!1),l=l.slice(0,Math.min(l.length,e+1))}let c=!1,u=-1;if(t&&a&&a.v7_partialHydration)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=r),e.route.id){let{loaderData:s,errors:a}=t,n=e.route.loader&&void 0===s[e.route.id]&&(!a||void 0===a[e.route.id]);if(e.route.lazy||n){c=!0,l=u>=0?l.slice(0,u+1):[l[0]];break}}}return l.reduceRight((e,a,n)=>{let i,d=!1,m=null,h=null;var p;t&&(i=o&&a.route.id?o[a.route.id]:void 0,m=a.route.errorElement||re,c&&(u<0&&0===n?(p="route-fallback",!1||pe[p]||(pe[p]=!0),d=!0,h=null):u===n&&(d=!0,h=a.route.hydrateFallbackElement||null)));let x=s.concat(l.slice(0,n+1)),f=()=>{let s;return s=i?m:d?h:a.route.Component?r.createElement(a.route.Component,null):a.route.element?a.route.element:e,r.createElement(le,{match:a,routeContext:{outlet:e,matches:x,isDataRoute:null!=t},children:s})};return t&&(a.route.ErrorBoundary||a.route.errorElement||0===n)?r.createElement(ie,{location:t.location,revalidation:t.revalidation,component:m,error:i,children:f(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):f()},null)}var ce=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ce||{}),de=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(de||{});function ue(e){let s=r.useContext(V);return s||d(!1),s}function me(e){let s=r.useContext(J);return s||d(!1),s}function he(e){let s=function(){let e=r.useContext(Y);return e||d(!1),e}(),t=s.matches[s.matches.length-1];return t.route.id||d(!1),t.route.id}const pe={};function xe(e,s){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!s||s.v7_relativeSplatPath),s&&(s.v7_fetcherPersist,s.v7_normalizeFormMethod,s.v7_partialHydration,s.v7_skipActionErrorRevalidation)}i.startTransition;function fe(e){let{to:s,replace:t,state:a,relative:n}=e;X()||d(!1);let{future:i,static:l}=r.useContext(G),{matches:o}=r.useContext(Y),{pathname:c}=Z(),u=se(),m=M(s,I(o,i.v7_relativeSplatPath),c,"path"===n),h=JSON.stringify(m);return r.useEffect(()=>u(JSON.parse(h),{replace:t,state:a,relative:n}),[u,h,n,t,a]),null}function be(e){d(!1)}function ve(e){let{basename:s="/",children:t=null,location:a,navigationType:i=n.Pop,navigator:l,static:o=!1,future:c}=e;X()&&d(!1);let u=s.replace(/^\/*/,"/"),m=r.useMemo(()=>({basename:u,navigator:l,static:o,future:W({v7_relativeSplatPath:!1},c)}),[u,c,l,o]);"string"===typeof a&&(a=x(a));let{pathname:h="/",search:p="",hash:f="",state:b=null,key:v="default"}=a,g=r.useMemo(()=>{let e=D(h,u);return null==e?null:{location:{pathname:e,search:p,hash:f,state:b,key:v},navigationType:i}},[u,h,p,f,b,v,i]);return null==g?null:r.createElement(G.Provider,{value:m},r.createElement(K.Provider,{children:t,value:g}))}function ge(e){let{children:s,location:t}=e;return ae(je(s),t)}new Promise(()=>{});r.Component;function je(e,s){void 0===s&&(s=[]);let t=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let n=[...s,a];if(e.type===r.Fragment)return void t.push.apply(t,je(e.props.children,n));e.type!==be&&d(!1),e.props.index&&e.props.children&&d(!1);let i={id:e.props.id||n.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=je(e.props.children,n)),t.push(i)}),t}var ye=t(950),Ne=t.t(ye,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},we.apply(this,arguments)}function ke(e,s){if(null==e)return{};var t,a,n={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],s.indexOf(t)>=0||(n[t]=e[t]);return n}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Rl){}new Map;const Ce=i.startTransition;Ne.flushSync,i.useId;function Te(e){let{basename:s,children:t,future:a,window:n}=e,i=r.useRef();var l;null==i.current&&(i.current=(void 0===(l={window:n,v5Compat:!0})&&(l={}),f(function(e,s){let{pathname:t,search:a,hash:n}=e.location;return h("",{pathname:t,search:a,hash:n},s.state&&s.state.usr||null,s.state&&s.state.key||"default")},function(e,s){return"string"===typeof s?s:p(s)},null,l)));let o=i.current,[c,d]=r.useState({action:o.action,location:o.location}),{v7_startTransition:u}=a||{},m=r.useCallback(e=>{u&&Ce?Ce(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>o.listen(m),[o,m]),r.useEffect(()=>xe(a),[a]),r.createElement(ve,{basename:s,children:t,location:c.location,navigationType:c.action,navigator:o,future:a})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ee=r.forwardRef(function(e,s){let t,{onClick:a,relative:n,reloadDocument:i,replace:l,state:o,target:c,to:u,preventScrollReset:m,viewTransition:h}=e,x=ke(e,Se),{basename:f}=r.useContext(G),b=!1;if("string"===typeof u&&Re.test(u)&&(t=u,Pe))try{let e=new URL(window.location.href),s=u.startsWith("//")?new URL(e.protocol+u):new URL(u),t=D(s.pathname,f);s.origin===e.origin&&null!=t?u=t+s.search+s.hash:b=!0}catch(Rl){}let v=function(e,s){let{relative:t}=void 0===s?{}:s;X()||d(!1);let{basename:a,navigator:n}=r.useContext(G),{hash:i,pathname:l,search:o}=te(e,{relative:t}),c=l;return"/"!==a&&(c="/"===l?a:F([a,l])),n.createHref({pathname:c,search:o,hash:i})}(u,{relative:n}),g=function(e,s){let{target:t,replace:a,state:n,preventScrollReset:i,relative:l,viewTransition:o}=void 0===s?{}:s,c=se(),d=Z(),u=te(e,{relative:l});return r.useCallback(s=>{if(function(e,s){return 0===e.button&&(!s||"_self"===s)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(s,t)){s.preventDefault();let t=void 0!==a?a:p(d)===p(u);c(e,{replace:t,state:n,preventScrollReset:i,relative:l,viewTransition:o})}},[d,c,u,a,n,t,e,i,l,o])}(u,{replace:l,state:o,target:c,preventScrollReset:m,relative:n,viewTransition:h});return r.createElement("a",we({},x,{href:t||v,onClick:b||i?a:function(e){a&&a(e),e.defaultPrevented||g(e)},ref:s,target:c}))});var _e,Ae;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(_e||(_e={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ae||(Ae={}));function De(e,s){return function(){return e.apply(s,arguments)}}const{toString:Le}=Object.prototype,{getPrototypeOf:Oe}=Object,{iterator:Ie,toStringTag:Me}=Symbol,Fe=($e=Object.create(null),e=>{const s=Le.call(e);return $e[s]||($e[s]=s.slice(8,-1).toLowerCase())});var $e;const ze=e=>(e=e.toLowerCase(),s=>Fe(s)===e),He=e=>s=>typeof s===e,{isArray:Ue}=Array,qe=He("undefined");const Be=ze("ArrayBuffer");const We=He("string"),Ve=He("function"),Je=He("number"),Ge=e=>null!==e&&"object"===typeof e,Ke=e=>{if("object"!==Fe(e))return!1;const s=Oe(e);return(null===s||s===Object.prototype||null===Object.getPrototypeOf(s))&&!(Me in e)&&!(Ie in e)},Ye=ze("Date"),Qe=ze("File"),Xe=ze("Blob"),Ze=ze("FileList"),es=ze("URLSearchParams"),[ss,ts,as,ns]=["ReadableStream","Request","Response","Headers"].map(ze);function rs(e,s){let t,a,{allOwnKeys:n=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Ue(e))for(t=0,a=e.length;t<a;t++)s.call(null,e[t],t,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let i;for(t=0;t<r;t++)i=a[t],s.call(null,e[i],i,e)}}function is(e,s){s=s.toLowerCase();const t=Object.keys(e);let a,n=t.length;for(;n-- >0;)if(a=t[n],s===a.toLowerCase())return a;return null}const ls="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,os=e=>!qe(e)&&e!==ls;const cs=(ds="undefined"!==typeof Uint8Array&&Oe(Uint8Array),e=>ds&&e instanceof ds);var ds;const us=ze("HTMLFormElement"),ms=(e=>{let{hasOwnProperty:s}=e;return(e,t)=>s.call(e,t)})(Object.prototype),hs=ze("RegExp"),ps=(e,s)=>{const t=Object.getOwnPropertyDescriptors(e),a={};rs(t,(t,n)=>{let r;!1!==(r=s(t,n,e))&&(a[n]=r||t)}),Object.defineProperties(e,a)};const xs=ze("AsyncFunction"),fs=((e,s)=>{return e?setImmediate:s?(t=`axios@${Math.random()}`,a=[],ls.addEventListener("message",e=>{let{source:s,data:n}=e;s===ls&&n===t&&a.length&&a.shift()()},!1),e=>{a.push(e),ls.postMessage(t,"*")}):e=>setTimeout(e);var t,a})("function"===typeof setImmediate,Ve(ls.postMessage)),bs="undefined"!==typeof queueMicrotask?queueMicrotask.bind(ls):"undefined"!==typeof process&&process.nextTick||fs,vs={isArray:Ue,isArrayBuffer:Be,isBuffer:function(e){return null!==e&&!qe(e)&&null!==e.constructor&&!qe(e.constructor)&&Ve(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let s;return e&&("function"===typeof FormData&&e instanceof FormData||Ve(e.append)&&("formdata"===(s=Fe(e))||"object"===s&&Ve(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let s;return s="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Be(e.buffer),s},isString:We,isNumber:Je,isBoolean:e=>!0===e||!1===e,isObject:Ge,isPlainObject:Ke,isReadableStream:ss,isRequest:ts,isResponse:as,isHeaders:ns,isUndefined:qe,isDate:Ye,isFile:Qe,isBlob:Xe,isRegExp:hs,isFunction:Ve,isStream:e=>Ge(e)&&Ve(e.pipe),isURLSearchParams:es,isTypedArray:cs,isFileList:Ze,forEach:rs,merge:function e(){const{caseless:s}=os(this)&&this||{},t={},a=(a,n)=>{const r=s&&is(t,n)||n;Ke(t[r])&&Ke(a)?t[r]=e(t[r],a):Ke(a)?t[r]=e({},a):Ue(a)?t[r]=a.slice():t[r]=a};for(let n=0,r=arguments.length;n<r;n++)arguments[n]&&rs(arguments[n],a);return t},extend:function(e,s,t){let{allOwnKeys:a}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return rs(s,(s,a)=>{t&&Ve(s)?e[a]=De(s,t):e[a]=s},{allOwnKeys:a}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,s,t,a)=>{e.prototype=Object.create(s.prototype,a),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:s.prototype}),t&&Object.assign(e.prototype,t)},toFlatObject:(e,s,t,a)=>{let n,r,i;const l={};if(s=s||{},null==e)return s;do{for(n=Object.getOwnPropertyNames(e),r=n.length;r-- >0;)i=n[r],a&&!a(i,e,s)||l[i]||(s[i]=e[i],l[i]=!0);e=!1!==t&&Oe(e)}while(e&&(!t||t(e,s))&&e!==Object.prototype);return s},kindOf:Fe,kindOfTest:ze,endsWith:(e,s,t)=>{e=String(e),(void 0===t||t>e.length)&&(t=e.length),t-=s.length;const a=e.indexOf(s,t);return-1!==a&&a===t},toArray:e=>{if(!e)return null;if(Ue(e))return e;let s=e.length;if(!Je(s))return null;const t=new Array(s);for(;s-- >0;)t[s]=e[s];return t},forEachEntry:(e,s)=>{const t=(e&&e[Ie]).call(e);let a;for(;(a=t.next())&&!a.done;){const t=a.value;s.call(e,t[0],t[1])}},matchAll:(e,s)=>{let t;const a=[];for(;null!==(t=e.exec(s));)a.push(t);return a},isHTMLForm:us,hasOwnProperty:ms,hasOwnProp:ms,reduceDescriptors:ps,freezeMethods:e=>{ps(e,(s,t)=>{if(Ve(e)&&-1!==["arguments","caller","callee"].indexOf(t))return!1;const a=e[t];Ve(a)&&(s.enumerable=!1,"writable"in s?s.writable=!1:s.set||(s.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")}))})},toObjectSet:(e,s)=>{const t={},a=e=>{e.forEach(e=>{t[e]=!0})};return Ue(e)?a(e):a(String(e).split(s)),t},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,s,t){return s.toUpperCase()+t}),noop:()=>{},toFiniteNumber:(e,s)=>null!=e&&Number.isFinite(e=+e)?e:s,findKey:is,global:ls,isContextDefined:os,isSpecCompliantForm:function(e){return!!(e&&Ve(e.append)&&"FormData"===e[Me]&&e[Ie])},toJSONObject:e=>{const s=new Array(10),t=(e,a)=>{if(Ge(e)){if(s.indexOf(e)>=0)return;if(!("toJSON"in e)){s[a]=e;const n=Ue(e)?[]:{};return rs(e,(e,s)=>{const r=t(e,a+1);!qe(r)&&(n[s]=r)}),s[a]=void 0,n}}return e};return t(e,0)},isAsyncFn:xs,isThenable:e=>e&&(Ge(e)||Ve(e))&&Ve(e.then)&&Ve(e.catch),setImmediate:fs,asap:bs,isIterable:e=>null!=e&&Ve(e[Ie])};function gs(e,s,t,a,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",s&&(this.code=s),t&&(this.config=t),a&&(this.request=a),n&&(this.response=n,this.status=n.status?n.status:null)}vs.inherits(gs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:vs.toJSONObject(this.config),code:this.code,status:this.status}}});const js=gs.prototype,ys={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ys[e]={value:e}}),Object.defineProperties(gs,ys),Object.defineProperty(js,"isAxiosError",{value:!0}),gs.from=(e,s,t,a,n,r)=>{const i=Object.create(js);return vs.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),gs.call(i,e.message,s,t,a,n),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};const Ns=gs;function ws(e){return vs.isPlainObject(e)||vs.isArray(e)}function ks(e){return vs.endsWith(e,"[]")?e.slice(0,-2):e}function Ss(e,s,t){return e?e.concat(s).map(function(e,s){return e=ks(e),!t&&s?"["+e+"]":e}).join(t?".":""):s}const Cs=vs.toFlatObject(vs,{},null,function(e){return/^is[A-Z]/.test(e)});const Ts=function(e,s,t){if(!vs.isObject(e))throw new TypeError("target must be an object");s=s||new FormData;const a=(t=vs.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,s){return!vs.isUndefined(s[e])})).metaTokens,n=t.visitor||c,r=t.dots,i=t.indexes,l=(t.Blob||"undefined"!==typeof Blob&&Blob)&&vs.isSpecCompliantForm(s);if(!vs.isFunction(n))throw new TypeError("visitor must be a function");function o(e){if(null===e)return"";if(vs.isDate(e))return e.toISOString();if(vs.isBoolean(e))return e.toString();if(!l&&vs.isBlob(e))throw new Ns("Blob is not supported. Use a Buffer instead.");return vs.isArrayBuffer(e)||vs.isTypedArray(e)?l&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,t,n){let l=e;if(e&&!n&&"object"===typeof e)if(vs.endsWith(t,"{}"))t=a?t:t.slice(0,-2),e=JSON.stringify(e);else if(vs.isArray(e)&&function(e){return vs.isArray(e)&&!e.some(ws)}(e)||(vs.isFileList(e)||vs.endsWith(t,"[]"))&&(l=vs.toArray(e)))return t=ks(t),l.forEach(function(e,a){!vs.isUndefined(e)&&null!==e&&s.append(!0===i?Ss([t],a,r):null===i?t:t+"[]",o(e))}),!1;return!!ws(e)||(s.append(Ss(n,t,r),o(e)),!1)}const d=[],u=Object.assign(Cs,{defaultVisitor:c,convertValue:o,isVisitable:ws});if(!vs.isObject(e))throw new TypeError("data must be an object");return function e(t,a){if(!vs.isUndefined(t)){if(-1!==d.indexOf(t))throw Error("Circular reference detected in "+a.join("."));d.push(t),vs.forEach(t,function(t,r){!0===(!(vs.isUndefined(t)||null===t)&&n.call(s,t,vs.isString(r)?r.trim():r,a,u))&&e(t,a?a.concat(r):[r])}),d.pop()}}(e),s};function Ps(e){const s={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return s[e]})}function Rs(e,s){this._pairs=[],e&&Ts(e,this,s)}const Es=Rs.prototype;Es.append=function(e,s){this._pairs.push([e,s])},Es.toString=function(e){const s=e?function(s){return e.call(this,s,Ps)}:Ps;return this._pairs.map(function(e){return s(e[0])+"="+s(e[1])},"").join("&")};const _s=Rs;function As(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ds(e,s,t){if(!s)return e;const a=t&&t.encode||As;vs.isFunction(t)&&(t={serialize:t});const n=t&&t.serialize;let r;if(r=n?n(s,t):vs.isURLSearchParams(s)?s.toString():new _s(s,t).toString(a),r){const s=e.indexOf("#");-1!==s&&(e=e.slice(0,s)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}const Ls=class{constructor(){this.handlers=[]}use(e,s,t){return this.handlers.push({fulfilled:e,rejected:s,synchronous:!!t&&t.synchronous,runWhen:t?t.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){vs.forEach(this.handlers,function(s){null!==s&&e(s)})}},Os={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Is={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:_s,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ms="undefined"!==typeof window&&"undefined"!==typeof document,Fs="object"===typeof navigator&&navigator||void 0,$s=Ms&&(!Fs||["ReactNative","NativeScript","NS"].indexOf(Fs.product)<0),zs="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Hs=Ms&&window.location.href||"http://localhost",Us={...a,...Is};const qs=function(e){function s(e,t,a,n){let r=e[n++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),l=n>=e.length;if(r=!r&&vs.isArray(a)?a.length:r,l)return vs.hasOwnProp(a,r)?a[r]=[a[r],t]:a[r]=t,!i;a[r]&&vs.isObject(a[r])||(a[r]=[]);return s(e,t,a[r],n)&&vs.isArray(a[r])&&(a[r]=function(e){const s={},t=Object.keys(e);let a;const n=t.length;let r;for(a=0;a<n;a++)r=t[a],s[r]=e[r];return s}(a[r])),!i}if(vs.isFormData(e)&&vs.isFunction(e.entries)){const t={};return vs.forEachEntry(e,(e,a)=>{s(function(e){return vs.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),a,t,0)}),t}return null};const Bs={transitional:Os,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const t=s.getContentType()||"",a=t.indexOf("application/json")>-1,n=vs.isObject(e);n&&vs.isHTMLForm(e)&&(e=new FormData(e));if(vs.isFormData(e))return a?JSON.stringify(qs(e)):e;if(vs.isArrayBuffer(e)||vs.isBuffer(e)||vs.isStream(e)||vs.isFile(e)||vs.isBlob(e)||vs.isReadableStream(e))return e;if(vs.isArrayBufferView(e))return e.buffer;if(vs.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(n){if(t.indexOf("application/x-www-form-urlencoded")>-1)return function(e,s){return Ts(e,new Us.classes.URLSearchParams,Object.assign({visitor:function(e,s,t,a){return Us.isNode&&vs.isBuffer(e)?(this.append(s,e.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},s))}(e,this.formSerializer).toString();if((r=vs.isFileList(e))||t.indexOf("multipart/form-data")>-1){const s=this.env&&this.env.FormData;return Ts(r?{"files[]":e}:e,s&&new s,this.formSerializer)}}return n||a?(s.setContentType("application/json",!1),function(e,s,t){if(vs.isString(e))try{return(s||JSON.parse)(e),vs.trim(e)}catch(Rl){if("SyntaxError"!==Rl.name)throw Rl}return(t||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const s=this.transitional||Bs.transitional,t=s&&s.forcedJSONParsing,a="json"===this.responseType;if(vs.isResponse(e)||vs.isReadableStream(e))return e;if(e&&vs.isString(e)&&(t&&!this.responseType||a)){const t=!(s&&s.silentJSONParsing)&&a;try{return JSON.parse(e)}catch(Rl){if(t){if("SyntaxError"===Rl.name)throw Ns.from(Rl,Ns.ERR_BAD_RESPONSE,this,null,this.response);throw Rl}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Us.classes.FormData,Blob:Us.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};vs.forEach(["delete","get","head","post","put","patch"],e=>{Bs.headers[e]={}});const Ws=Bs,Vs=vs.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Js=Symbol("internals");function Gs(e){return e&&String(e).trim().toLowerCase()}function Ks(e){return!1===e||null==e?e:vs.isArray(e)?e.map(Ks):String(e)}function Ys(e,s,t,a,n){return vs.isFunction(a)?a.call(this,s,t):(n&&(s=t),vs.isString(s)?vs.isString(a)?-1!==s.indexOf(a):vs.isRegExp(a)?a.test(s):void 0:void 0)}class Qs{constructor(e){e&&this.set(e)}set(e,s,t){const a=this;function n(e,s,t){const n=Gs(s);if(!n)throw new Error("header name must be a non-empty string");const r=vs.findKey(a,n);(!r||void 0===a[r]||!0===t||void 0===t&&!1!==a[r])&&(a[r||s]=Ks(e))}const r=(e,s)=>vs.forEach(e,(e,t)=>n(e,t,s));if(vs.isPlainObject(e)||e instanceof this.constructor)r(e,s);else if(vs.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const s={};let t,a,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),t=e.substring(0,n).trim().toLowerCase(),a=e.substring(n+1).trim(),!t||s[t]&&Vs[t]||("set-cookie"===t?s[t]?s[t].push(a):s[t]=[a]:s[t]=s[t]?s[t]+", "+a:a)}),s})(e),s);else if(vs.isObject(e)&&vs.isIterable(e)){let t,a,n={};for(const s of e){if(!vs.isArray(s))throw TypeError("Object iterator must return a key-value pair");n[a=s[0]]=(t=n[a])?vs.isArray(t)?[...t,s[1]]:[t,s[1]]:s[1]}r(n,s)}else null!=e&&n(s,e,t);return this}get(e,s){if(e=Gs(e)){const t=vs.findKey(this,e);if(t){const e=this[t];if(!s)return e;if(!0===s)return function(e){const s=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=t.exec(e);)s[a[1]]=a[2];return s}(e);if(vs.isFunction(s))return s.call(this,e,t);if(vs.isRegExp(s))return s.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=Gs(e)){const t=vs.findKey(this,e);return!(!t||void 0===this[t]||s&&!Ys(0,this[t],t,s))}return!1}delete(e,s){const t=this;let a=!1;function n(e){if(e=Gs(e)){const n=vs.findKey(t,e);!n||s&&!Ys(0,t[n],n,s)||(delete t[n],a=!0)}}return vs.isArray(e)?e.forEach(n):n(e),a}clear(e){const s=Object.keys(this);let t=s.length,a=!1;for(;t--;){const n=s[t];e&&!Ys(0,this[n],n,e,!0)||(delete this[n],a=!0)}return a}normalize(e){const s=this,t={};return vs.forEach(this,(a,n)=>{const r=vs.findKey(t,n);if(r)return s[r]=Ks(a),void delete s[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,t)=>s.toUpperCase()+t)}(n):String(n).trim();i!==n&&delete s[n],s[i]=Ks(a),t[i]=!0}),this}concat(){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];return this.constructor.concat(this,...s)}toJSON(e){const s=Object.create(null);return vs.forEach(this,(t,a)=>{null!=t&&!1!==t&&(s[a]=e&&vs.isArray(t)?t.join(", "):t)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[s,t]=e;return s+": "+t}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const s=new this(e);for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];return a.forEach(e=>s.set(e)),s}static accessor(e){const s=(this[Js]=this[Js]={accessors:{}}).accessors,t=this.prototype;function a(e){const a=Gs(e);s[a]||(!function(e,s){const t=vs.toCamelCase(" "+s);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+t,{value:function(e,t,n){return this[a].call(this,s,e,t,n)},configurable:!0})})}(t,e),s[a]=!0)}return vs.isArray(e)?e.forEach(a):a(e),this}}Qs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),vs.reduceDescriptors(Qs.prototype,(e,s)=>{let{value:t}=e,a=s[0].toUpperCase()+s.slice(1);return{get:()=>t,set(e){this[a]=e}}}),vs.freezeMethods(Qs);const Xs=Qs;function Zs(e,s){const t=this||Ws,a=s||t,n=Xs.from(a.headers);let r=a.data;return vs.forEach(e,function(e){r=e.call(t,r,n.normalize(),s?s.status:void 0)}),n.normalize(),r}function et(e){return!(!e||!e.__CANCEL__)}function st(e,s,t){Ns.call(this,null==e?"canceled":e,Ns.ERR_CANCELED,s,t),this.name="CanceledError"}vs.inherits(st,Ns,{__CANCEL__:!0});const tt=st;function at(e,s,t){const a=t.config.validateStatus;t.status&&a&&!a(t.status)?s(new Ns("Request failed with status code "+t.status,[Ns.ERR_BAD_REQUEST,Ns.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t)):e(t)}const nt=function(e,s){e=e||10;const t=new Array(e),a=new Array(e);let n,r=0,i=0;return s=void 0!==s?s:1e3,function(l){const o=Date.now(),c=a[i];n||(n=o),t[r]=l,a[r]=o;let d=i,u=0;for(;d!==r;)u+=t[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),o-n<s)return;const m=c&&o-c;return m?Math.round(1e3*u/m):void 0}};const rt=function(e,s){let t,a,n=0,r=1e3/s;const i=function(s){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();n=r,t=null,a&&(clearTimeout(a),a=null),e.apply(null,s)};return[function(){const e=Date.now(),s=e-n;for(var l=arguments.length,o=new Array(l),c=0;c<l;c++)o[c]=arguments[c];s>=r?i(o,e):(t=o,a||(a=setTimeout(()=>{a=null,i(t)},r-s)))},()=>t&&i(t)]},it=function(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,a=0;const n=nt(50,250);return rt(t=>{const r=t.loaded,i=t.lengthComputable?t.total:void 0,l=r-a,o=n(l);a=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:l,rate:o||void 0,estimated:o&&i&&r<=i?(i-r)/o:void 0,event:t,lengthComputable:null!=i,[s?"download":"upload"]:!0})},t)},lt=(e,s)=>{const t=null!=e;return[a=>s[0]({lengthComputable:t,total:e,loaded:a}),s[1]]},ot=e=>function(){for(var s=arguments.length,t=new Array(s),a=0;a<s;a++)t[a]=arguments[a];return vs.asap(()=>e(...t))},ct=Us.hasStandardBrowserEnv?((e,s)=>t=>(t=new URL(t,Us.origin),e.protocol===t.protocol&&e.host===t.host&&(s||e.port===t.port)))(new URL(Us.origin),Us.navigator&&/(msie|trident)/i.test(Us.navigator.userAgent)):()=>!0,dt=Us.hasStandardBrowserEnv?{write(e,s,t,a,n,r){const i=[e+"="+encodeURIComponent(s)];vs.isNumber(t)&&i.push("expires="+new Date(t).toGMTString()),vs.isString(a)&&i.push("path="+a),vs.isString(n)&&i.push("domain="+n),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const s=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return s?decodeURIComponent(s[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function ut(e,s,t){let a=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(s);return e&&(a||0==t)?function(e,s){return s?e.replace(/\/?\/$/,"")+"/"+s.replace(/^\/+/,""):e}(e,s):s}const mt=e=>e instanceof Xs?{...e}:e;function ht(e,s){s=s||{};const t={};function a(e,s,t,a){return vs.isPlainObject(e)&&vs.isPlainObject(s)?vs.merge.call({caseless:a},e,s):vs.isPlainObject(s)?vs.merge({},s):vs.isArray(s)?s.slice():s}function n(e,s,t,n){return vs.isUndefined(s)?vs.isUndefined(e)?void 0:a(void 0,e,0,n):a(e,s,0,n)}function r(e,s){if(!vs.isUndefined(s))return a(void 0,s)}function i(e,s){return vs.isUndefined(s)?vs.isUndefined(e)?void 0:a(void 0,e):a(void 0,s)}function l(t,n,r){return r in s?a(t,n):r in e?a(void 0,t):void 0}const o={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:l,headers:(e,s,t)=>n(mt(e),mt(s),0,!0)};return vs.forEach(Object.keys(Object.assign({},e,s)),function(a){const r=o[a]||n,i=r(e[a],s[a],a);vs.isUndefined(i)&&r!==l||(t[a]=i)}),t}const pt=e=>{const s=ht({},e);let t,{data:a,withXSRFToken:n,xsrfHeaderName:r,xsrfCookieName:i,headers:l,auth:o}=s;if(s.headers=l=Xs.from(l),s.url=Ds(ut(s.baseURL,s.url,s.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&l.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),vs.isFormData(a))if(Us.hasStandardBrowserEnv||Us.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(!1!==(t=l.getContentType())){const[e,...s]=t?t.split(";").map(e=>e.trim()).filter(Boolean):[];l.setContentType([e||"multipart/form-data",...s].join("; "))}if(Us.hasStandardBrowserEnv&&(n&&vs.isFunction(n)&&(n=n(s)),n||!1!==n&&ct(s.url))){const e=r&&i&&dt.read(i);e&&l.set(r,e)}return s},xt="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(s,t){const a=pt(e);let n=a.data;const r=Xs.from(a.headers).normalize();let i,l,o,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=a;function p(){c&&c(),d&&d(),a.cancelToken&&a.cancelToken.unsubscribe(i),a.signal&&a.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const a=Xs.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());at(function(e){s(e),p()},function(e){t(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:a,config:e,request:x}),x=null}x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(t(new Ns("Request aborted",Ns.ECONNABORTED,e,x)),x=null)},x.onerror=function(){t(new Ns("Network Error",Ns.ERR_NETWORK,e,x)),x=null},x.ontimeout=function(){let s=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const n=a.transitional||Os;a.timeoutErrorMessage&&(s=a.timeoutErrorMessage),t(new Ns(s,n.clarifyTimeoutError?Ns.ETIMEDOUT:Ns.ECONNABORTED,e,x)),x=null},void 0===n&&r.setContentType(null),"setRequestHeader"in x&&vs.forEach(r.toJSON(),function(e,s){x.setRequestHeader(s,e)}),vs.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),u&&"json"!==u&&(x.responseType=a.responseType),h&&([o,d]=it(h,!0),x.addEventListener("progress",o)),m&&x.upload&&([l,c]=it(m),x.upload.addEventListener("progress",l),x.upload.addEventListener("loadend",c)),(a.cancelToken||a.signal)&&(i=s=>{x&&(t(!s||s.type?new tt(null,e,x):s),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(i),a.signal&&(a.signal.aborted?i():a.signal.addEventListener("abort",i)));const b=function(e){const s=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return s&&s[1]||""}(a.url);b&&-1===Us.protocols.indexOf(b)?t(new Ns("Unsupported protocol "+b+":",Ns.ERR_BAD_REQUEST,e)):x.send(n||null)})},ft=(e,s)=>{const{length:t}=e=e?e.filter(Boolean):[];if(s||t){let t,a=new AbortController;const n=function(e){if(!t){t=!0,i();const s=e instanceof Error?e:this.reason;a.abort(s instanceof Ns?s:new tt(s instanceof Error?s.message:s))}};let r=s&&setTimeout(()=>{r=null,n(new Ns(`timeout ${s} of ms exceeded`,Ns.ETIMEDOUT))},s);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:l}=a;return l.unsubscribe=()=>vs.asap(i),l}},bt=function*(e,s){let t=e.byteLength;if(!s||t<s)return void(yield e);let a,n=0;for(;n<t;)a=n+s,yield e.slice(n,a),n=a},vt=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const s=e.getReader();try{for(;;){const{done:e,value:t}=await s.read();if(e)break;yield t}}finally{await s.cancel()}},gt=(e,s,t,a)=>{const n=async function*(e,s){for await(const t of vt(e))yield*bt(t,s)}(e,s);let r,i=0,l=e=>{r||(r=!0,a&&a(e))};return new ReadableStream({async pull(e){try{const{done:s,value:a}=await n.next();if(s)return l(),void e.close();let r=a.byteLength;if(t){let e=i+=r;t(e)}e.enqueue(new Uint8Array(a))}catch(s){throw l(s),s}},cancel:e=>(l(e),n.return())},{highWaterMark:2})},jt="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,yt=jt&&"function"===typeof ReadableStream,Nt=jt&&("function"===typeof TextEncoder?(wt=new TextEncoder,e=>wt.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var wt;const kt=function(e){try{for(var s=arguments.length,t=new Array(s>1?s-1:0),a=1;a<s;a++)t[a-1]=arguments[a];return!!e(...t)}catch(Rl){return!1}},St=yt&&kt(()=>{let e=!1;const s=new Request(Us.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!s}),Ct=yt&&kt(()=>vs.isReadableStream(new Response("").body)),Tt={stream:Ct&&(e=>e.body)};var Pt;jt&&(Pt=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Tt[e]&&(Tt[e]=vs.isFunction(Pt[e])?s=>s[e]():(s,t)=>{throw new Ns(`Response type '${e}' is not supported`,Ns.ERR_NOT_SUPPORT,t)})}));const Rt=async(e,s)=>{const t=vs.toFiniteNumber(e.getContentLength());return null==t?(async e=>{if(null==e)return 0;if(vs.isBlob(e))return e.size;if(vs.isSpecCompliantForm(e)){const s=new Request(Us.origin,{method:"POST",body:e});return(await s.arrayBuffer()).byteLength}return vs.isArrayBufferView(e)||vs.isArrayBuffer(e)?e.byteLength:(vs.isURLSearchParams(e)&&(e+=""),vs.isString(e)?(await Nt(e)).byteLength:void 0)})(s):t},Et=jt&&(async e=>{let{url:s,method:t,data:a,signal:n,cancelToken:r,timeout:i,onDownloadProgress:l,onUploadProgress:o,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:m}=pt(e);c=c?(c+"").toLowerCase():"text";let h,p=ft([n,r&&r.toAbortSignal()],i);const x=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let f;try{if(o&&St&&"get"!==t&&"head"!==t&&0!==(f=await Rt(d,a))){let e,t=new Request(s,{method:"POST",body:a,duplex:"half"});if(vs.isFormData(a)&&(e=t.headers.get("content-type"))&&d.setContentType(e),t.body){const[e,s]=lt(f,it(ot(o)));a=gt(t.body,65536,e,s)}}vs.isString(u)||(u=u?"include":"omit");const n="credentials"in Request.prototype;h=new Request(s,{...m,signal:p,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:n?u:void 0});let r=await fetch(h,m);const i=Ct&&("stream"===c||"response"===c);if(Ct&&(l||i&&x)){const e={};["status","statusText","headers"].forEach(s=>{e[s]=r[s]});const s=vs.toFiniteNumber(r.headers.get("content-length")),[t,a]=l&&lt(s,it(ot(l),!0))||[];r=new Response(gt(r.body,65536,t,()=>{a&&a(),x&&x()}),e)}c=c||"text";let b=await Tt[vs.findKey(Tt,c)||"text"](r,e);return!i&&x&&x(),await new Promise((s,t)=>{at(s,t,{data:b,headers:Xs.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:h})})}catch(b){if(x&&x(),b&&"TypeError"===b.name&&/Load failed|fetch/i.test(b.message))throw Object.assign(new Ns("Network Error",Ns.ERR_NETWORK,e,h),{cause:b.cause||b});throw Ns.from(b,b&&b.code,e,h)}}),_t={http:null,xhr:xt,fetch:Et};vs.forEach(_t,(e,s)=>{if(e){try{Object.defineProperty(e,"name",{value:s})}catch(Rl){}Object.defineProperty(e,"adapterName",{value:s})}});const At=e=>`- ${e}`,Dt=e=>vs.isFunction(e)||null===e||!1===e,Lt=e=>{e=vs.isArray(e)?e:[e];const{length:s}=e;let t,a;const n={};for(let r=0;r<s;r++){let s;if(t=e[r],a=t,!Dt(t)&&(a=_t[(s=String(t)).toLowerCase()],void 0===a))throw new Ns(`Unknown adapter '${s}'`);if(a)break;n[s||"#"+r]=a}if(!a){const e=Object.entries(n).map(e=>{let[s,t]=e;return`adapter ${s} `+(!1===t?"is not supported by the environment":"is not available in the build")});let t=s?e.length>1?"since :\n"+e.map(At).join("\n"):" "+At(e[0]):"as no adapter specified";throw new Ns("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return a};function Ot(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tt(null,e)}function It(e){Ot(e),e.headers=Xs.from(e.headers),e.data=Zs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Lt(e.adapter||Ws.adapter)(e).then(function(s){return Ot(e),s.data=Zs.call(e,e.transformResponse,s),s.headers=Xs.from(s.headers),s},function(s){return et(s)||(Ot(e),s&&s.response&&(s.response.data=Zs.call(e,e.transformResponse,s.response),s.response.headers=Xs.from(s.response.headers))),Promise.reject(s)})}const Mt="1.10.0",Ft={};["object","boolean","number","function","string","symbol"].forEach((e,s)=>{Ft[e]=function(t){return typeof t===e||"a"+(s<1?"n ":" ")+e}});const $t={};Ft.transitional=function(e,s,t){function a(e,s){return"[Axios v"+Mt+"] Transitional option '"+e+"'"+s+(t?". "+t:"")}return(t,n,r)=>{if(!1===e)throw new Ns(a(n," has been removed"+(s?" in "+s:"")),Ns.ERR_DEPRECATED);return s&&!$t[n]&&($t[n]=!0,console.warn(a(n," has been deprecated since v"+s+" and will be removed in the near future"))),!e||e(t,n,r)}},Ft.spelling=function(e){return(s,t)=>(console.warn(`${t} is likely a misspelling of ${e}`),!0)};const zt={assertOptions:function(e,s,t){if("object"!==typeof e)throw new Ns("options must be an object",Ns.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let n=a.length;for(;n-- >0;){const r=a[n],i=s[r];if(i){const s=e[r],t=void 0===s||i(s,r,e);if(!0!==t)throw new Ns("option "+r+" must be "+t,Ns.ERR_BAD_OPTION_VALUE);continue}if(!0!==t)throw new Ns("Unknown option "+r,Ns.ERR_BAD_OPTION)}},validators:Ft},Ht=zt.validators;class Ut{constructor(e){this.defaults=e||{},this.interceptors={request:new Ls,response:new Ls}}async request(e,s){try{return await this._request(e,s)}catch(t){if(t instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const s=e.stack?e.stack.replace(/^.+\n/,""):"";try{t.stack?s&&!String(t.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(t.stack+="\n"+s):t.stack=s}catch(Rl){}}throw t}}_request(e,s){"string"===typeof e?(s=s||{}).url=e:s=e||{},s=ht(this.defaults,s);const{transitional:t,paramsSerializer:a,headers:n}=s;void 0!==t&&zt.assertOptions(t,{silentJSONParsing:Ht.transitional(Ht.boolean),forcedJSONParsing:Ht.transitional(Ht.boolean),clarifyTimeoutError:Ht.transitional(Ht.boolean)},!1),null!=a&&(vs.isFunction(a)?s.paramsSerializer={serialize:a}:zt.assertOptions(a,{encode:Ht.function,serialize:Ht.function},!0)),void 0!==s.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),zt.assertOptions(s,{baseUrl:Ht.spelling("baseURL"),withXsrfToken:Ht.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let r=n&&vs.merge(n.common,n[s.method]);n&&vs.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),s.headers=Xs.concat(r,n);const i=[];let l=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(s)||(l=l&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const o=[];let c;this.interceptors.response.forEach(function(e){o.push(e.fulfilled,e.rejected)});let d,u=0;if(!l){const e=[It.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,o),d=e.length,c=Promise.resolve(s);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=s;for(u=0;u<d;){const e=i[u++],s=i[u++];try{m=e(m)}catch(h){s.call(this,h);break}}try{c=It.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=o.length;u<d;)c=c.then(o[u++],o[u++]);return c}getUri(e){return Ds(ut((e=ht(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}vs.forEach(["delete","get","head","options"],function(e){Ut.prototype[e]=function(s,t){return this.request(ht(t||{},{method:e,url:s,data:(t||{}).data}))}}),vs.forEach(["post","put","patch"],function(e){function s(s){return function(t,a,n){return this.request(ht(n||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:t,data:a}))}}Ut.prototype[e]=s(),Ut.prototype[e+"Form"]=s(!0)});const qt=Ut;class Bt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(e){s=e});const t=this;this.promise.then(e=>{if(!t._listeners)return;let s=t._listeners.length;for(;s-- >0;)t._listeners[s](e);t._listeners=null}),this.promise.then=e=>{let s;const a=new Promise(e=>{t.subscribe(e),s=e}).then(e);return a.cancel=function(){t.unsubscribe(s)},a},e(function(e,a,n){t.reason||(t.reason=new tt(e,a,n),s(t.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);-1!==s&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=s=>{e.abort(s)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Bt(function(s){e=s}),cancel:e}}}const Wt=Bt;const Vt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vt).forEach(e=>{let[s,t]=e;Vt[t]=s});const Jt=Vt;const Gt=function e(s){const t=new qt(s),a=De(qt.prototype.request,t);return vs.extend(a,qt.prototype,t,{allOwnKeys:!0}),vs.extend(a,t,null,{allOwnKeys:!0}),a.create=function(t){return e(ht(s,t))},a}(Ws);Gt.Axios=qt,Gt.CanceledError=tt,Gt.CancelToken=Wt,Gt.isCancel=et,Gt.VERSION=Mt,Gt.toFormData=Ts,Gt.AxiosError=Ns,Gt.Cancel=Gt.CanceledError,Gt.all=function(e){return Promise.all(e)},Gt.spread=function(e){return function(s){return e.apply(null,s)}},Gt.isAxiosError=function(e){return vs.isObject(e)&&!0===e.isAxiosError},Gt.mergeConfig=ht,Gt.AxiosHeaders=Xs,Gt.formToJSON=e=>qs(vs.isHTMLForm(e)?new FormData(e):e),Gt.getAdapter=Lt,Gt.HttpStatusCode=Jt,Gt.default=Gt;const Kt=Gt.create({baseURL:"http://localhost:5001/api",timeout:1e4,headers:{"Content-Type":"application/json"}});Kt.interceptors.request.use(e=>{const s=localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e)),Kt.interceptors.response.use(e=>e,e=>{var s;return 401===(null===(s=e.response)||void 0===s?void 0:s.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const Yt=e=>Kt.post("/auth/login",e),Qt=()=>Kt.get("/auth/profile"),Xt=e=>Kt.put("/auth/profile",e),Zt=e=>Kt.post("/auth/verify-current-password",e),ea=e=>Kt.post("/auth/send-password-change-otp",e),sa=e=>Kt.post("/auth/verify-otp-and-change-password",e),ta=()=>Kt.post("/auth/logout"),aa=e=>Kt.post("/attendance/checkin",e),na=e=>Kt.post("/attendance/checkout",e),ra=e=>Kt.get("/attendance/my",{params:e}),ia=()=>Kt.get("/attendance/today"),la=e=>Kt.get("/attendance/summary",{params:e}),oa=e=>Kt.get("/attendance",{params:e}),ca=()=>Kt.post("/attendance/activity"),da=()=>Kt.get("/attendance/auto-checkout-check"),ua=e=>Kt.get("/users",{params:e}),ma=()=>Kt.get("/users/team-leads"),ha=e=>Kt.get("/users/employees",{params:e}),pa=e=>Kt.post("/users",e),xa=(e,s)=>Kt.put(`/users/${e}`,s),fa=e=>Kt.get("/regularization",{params:e}),ba=e=>Kt.post("/regularization",e),va=()=>Kt.get("/regularization/config"),ga=e=>Kt.get("/attendance/employee",{params:e}),ja={getAllRegularizations:e=>Kt.get("/regularization-team-leader",{params:e}),getPendingRegularizations:e=>Kt.get("/regularization-team-leader/pending",{params:e}),getRegularizationDetails:e=>Kt.get(`/regularization-team-leader/${e}`),approveRegularization:(e,s)=>Kt.patch(`/regularization-team-leader/${e}/approve`,s),rejectRegularization:(e,s)=>Kt.patch(`/regularization-team-leader/${e}/reject`,s),getDashboardStats:()=>Kt.get("/regularization-team-leader/stats")},ya={getAllRegularizations:e=>Kt.get("/regularization-team-manager",{params:e}),getPendingRegularizations:e=>Kt.get("/regularization-team-manager/pending",{params:e}),getRegularizationDetails:e=>Kt.get(`/regularization-team-manager/${e}`),approveRegularization:(e,s)=>Kt.patch(`/regularization-team-manager/${e}/approve`,s),rejectRegularization:(e,s)=>Kt.patch(`/regularization-team-manager/${e}/reject`,s),getDashboardStats:()=>Kt.get("/regularization-team-manager/stats")},Na={getAllRegularizations:e=>Kt.get("/regularization-hr",{params:e}),getRegularizationDetails:e=>Kt.get(`/regularization-hr/${e}`),approveRegularization:(e,s)=>Kt.patch(`/regularization-hr/${e}/approve`,s),rejectRegularization:(e,s)=>Kt.patch(`/regularization-hr/${e}/reject`,s),getDashboardStats:()=>Kt.get("/regularization-hr/stats")},wa={getAllRegularizations:e=>Kt.get("/regularization-vp",{params:e}),getPendingRegularizations:e=>Kt.get("/regularization-vp/pending",{params:e}),getRegularizationDetails:e=>Kt.get(`/regularization-vp/${e}`),approveRegularization:(e,s)=>Kt.patch(`/regularization-vp/${e}/approve`,s),rejectRegularization:(e,s)=>Kt.patch(`/regularization-vp/${e}/reject`,s),getDashboardStats:()=>Kt.get("/regularization-vp/stats")},ka=e=>Kt.get("/notifications",{params:e}),Sa=()=>Kt.get("/notifications/unread-count"),Ca=e=>Kt.get("/notifications/recent",{params:e}),Ta=e=>Kt.put(`/notifications/${e}/read`),Pa=e=>Kt.put("/notifications/mark-multiple-read",{notificationIds:e}),Ra=()=>Kt.put("/notifications/mark-all-read"),Ea=e=>Kt.delete(`/notifications/${e}`),_a=e=>Kt.post("/permissions",e),Aa=()=>Kt.get("/permissions/my-requests"),Da=()=>Kt.get("/permissions/pending-approvals"),La=e=>Kt.get(`/permissions/${e}`),Oa=e=>Kt.patch(`/permissions/${e}/approve`),Ia=(e,s)=>Kt.patch(`/permissions/${e}/reject`,s),Ma=Kt;var Fa=t(579);const $a={user:null,token:null,isAuthenticated:!1,isLoading:!0,error:null},za="LOGIN_START",Ha="LOGIN_SUCCESS",Ua="LOGIN_FAILURE",qa="LOGOUT",Ba="SET_LOADING",Wa="CLEAR_ERROR",Va="UPDATE_USER",Ja=(e,s)=>{switch(s.type){case za:return{...e,isLoading:!0,error:null};case Ha:return{...e,user:s.payload.user,token:s.payload.token,isAuthenticated:!0,isLoading:!1,error:null};case Ua:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:s.payload};case qa:return{...e,user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null};case Ba:return{...e,isLoading:s.payload};case Wa:return{...e,error:null};case Va:return{...e,user:{...e.user,...s.payload}};default:return e}},Ga=(0,r.createContext)(),Ka=e=>{let{children:s}=e;const[t,a]=(0,r.useReducer)(Ja,$a);(0,r.useEffect)(()=>{(async()=>{const e=localStorage.getItem("token");if(e)try{const s=(await Qt()).data.user;localStorage.setItem("user",JSON.stringify(s)),a({type:Ha,payload:{token:e,user:s}})}catch(s){localStorage.removeItem("token"),localStorage.removeItem("user"),a({type:qa})}else a({type:Ba,payload:!1})})()},[]);const n=()=>{var e;return{Admin:1,"Vice President":2,"HR BP":3,"HR Manager":4,"HR Executive":5,"Team Manager":6,"Team Leader":7}[null===(e=t.user)||void 0===e?void 0:e.role]||999},i={...t,login:async e=>{try{a({type:za});const s=await Yt(e),{token:t,user:r}=s.data;localStorage.setItem("token",t);try{const e=(await Qt()).data.user;localStorage.setItem("user",JSON.stringify(e)),a({type:Ha,payload:{token:t,user:e}})}catch(n){localStorage.setItem("user",JSON.stringify(r)),a({type:Ha,payload:{token:t,user:r}})}return{success:!0}}catch(r){var s,t;const e=(null===(s=r.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Login failed";return a({type:Ua,payload:e}),{success:!1,error:e}}},logout:async()=>{try{await ta()}catch(e){console.error("Logout error:",e)}finally{localStorage.removeItem("token"),localStorage.removeItem("user"),a({type:qa})}},updateUser:e=>{const s={...t.user,...e};localStorage.setItem("user",JSON.stringify(s)),a({type:Va,payload:e})},refreshUser:async()=>{try{const e=(await Qt()).data.user;return localStorage.setItem("user",JSON.stringify(e)),a({type:Va,payload:e}),e}catch(e){return console.error("Error refreshing user data:",e),null}},clearError:()=>{a({type:Wa})},hasRole:e=>{var s;return(null===(s=t.user)||void 0===s?void 0:s.role)===e},hasAnyRole:e=>{var s;return e.includes(null===(s=t.user)||void 0===s?void 0:s.role)},getRoleLevel:n,canAccess:e=>n()<=({Admin:1,"Vice President":2,"HR BP":3,"HR Manager":4,"HR Executive":5,"Team Manager":6,"Team Leader":7}[e]||999)};return(0,Fa.jsx)(Ga.Provider,{value:i,children:s})},Ya=()=>{const e=(0,r.useContext)(Ga);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Qa=e=>{let{children:s,requiredRoles:t=[],requiredLevel:a=null}=e;const{isAuthenticated:n,isLoading:r,user:i,hasAnyRole:l,canAccess:o}=Ya(),c=Z();return r?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):n?t.length>0&&!l(t)?(0,Fa.jsx)("div",{className:"container mt-5",children:(0,Fa.jsx)("div",{className:"row justify-content-center",children:(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)("div",{className:"card border-danger",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-shield-exclamation text-danger",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h4",{className:"card-title text-danger mt-3",children:"Access Denied"}),(0,Fa.jsx)("p",{className:"card-text",children:"You don't have the required permissions to access this page."}),(0,Fa.jsxs)("p",{className:"text-muted",children:["Required roles: ",t.join(", ")]}),(0,Fa.jsxs)("p",{className:"text-muted",children:["Your role: ",null===i||void 0===i?void 0:i.role]}),(0,Fa.jsx)("button",{className:"btn btn-primary",onClick:()=>window.history.back(),children:"Go Back"})]})})})})}):a&&!o(a)?(0,Fa.jsx)("div",{className:"container mt-5",children:(0,Fa.jsx)("div",{className:"row justify-content-center",children:(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)("div",{className:"card border-warning",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-shield-exclamation text-warning",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h4",{className:"card-title text-warning mt-3",children:"Insufficient Privileges"}),(0,Fa.jsx)("p",{className:"card-text",children:"You don't have sufficient privileges to access this page."}),(0,Fa.jsxs)("p",{className:"text-muted",children:["Your role: ",null===i||void 0===i?void 0:i.role]}),(0,Fa.jsx)("button",{className:"btn btn-primary",onClick:()=>window.history.back(),children:"Go Back"})]})})})})}):s:(0,Fa.jsx)(fe,{to:"/login",state:{from:c},replace:!0})},Xa=()=>{const e=se(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(0),[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(!1),d=(0,r.useRef)(null),u=async()=>{try{const e=await Sa();e.data.success&&n(e.data.unreadCount)}catch(e){console.error("Error fetching unread count:",e)}},m=async e=>{try{await Ta(e),t(s=>s.map(s=>s._id===e?{...s,isRead:!0,readAt:new Date}:s)),n(e=>Math.max(0,e-1))}catch(s){console.error("Error marking notification as read:",s)}};(0,r.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{u();const e=setInterval(u,3e4);return()=>clearInterval(e)},[]);const h=e=>{const s=new Date,t=new Date(e),a=Math.floor((s-t)/6e4);if(a<1)return"Just now";if(a<60)return`${a}m ago`;const n=Math.floor(a/60);if(n<24)return`${n}h ago`;return`${Math.floor(n/24)}d ago`},p=e=>{switch(e){case"checkout_reminder":return"bi-clock";case"auto_checkout":return"bi-robot";case"overtime_alert":return"bi-currency-dollar";case"system":return"bi-gear";default:return"bi-bell"}},x=()=>(0,Fa.jsx)("div",{className:"notification-loading",children:(0,Fa.jsx)("div",{className:"d-flex flex-column gap-3",children:[1,2,3].map(e=>(0,Fa.jsx)("div",{className:"notification-skeleton",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-start",children:[(0,Fa.jsx)("div",{className:"skeleton skeleton-icon"}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("div",{className:"skeleton skeleton-title"}),(0,Fa.jsx)("div",{className:"skeleton skeleton-message"}),(0,Fa.jsx)("div",{className:"skeleton skeleton-time"})]})]})},e))})});return(0,Fa.jsxs)("div",{className:"notification-dropdown",ref:d,children:[(0,Fa.jsxs)("button",{className:"btn notification-button position-relative",onClick:()=>{l(!i),i||(async()=>{try{c(!0);const e=await Ca({limit:5});e.data.success&&(t(e.data.notifications),n(e.data.unreadCount))}catch(e){console.error("Error fetching notifications:",e)}finally{c(!1)}})()},"aria-label":"Notifications",title:`${a} unread notifications`,children:[(0,Fa.jsx)("i",{className:"bi bi-bell fs-5 text-white"}),a>0&&(0,Fa.jsx)("span",{className:"notification-badge",children:a>99?"99+":a})]}),i&&(0,Fa.jsxs)("div",{className:"notification-dropdown-menu show",children:[(0,Fa.jsx)("div",{className:"notification-header",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsx)("h6",{children:"Notifications"}),a>0&&(0,Fa.jsxs)("button",{className:"notification-mark-all-btn",onClick:async()=>{try{await Ra(),t(e=>e.map(e=>({...e,isRead:!0,readAt:new Date}))),n(0)}catch(e){console.error("Error marking all as read:",e)}},title:"Mark all as read",children:[(0,Fa.jsx)("i",{className:"bi bi-check-all me-1"}),"Mark all read"]})]})}),o?(0,Fa.jsx)(x,{}):s.length>0?(0,Fa.jsx)("div",{className:"notification-list",children:s.map(e=>(0,Fa.jsx)("div",{className:"notification-item "+(e.isRead?"":"unread"),onClick:()=>!e.isRead&&m(e._id),role:"button",tabIndex:0,onKeyPress:s=>{"Enter"!==s.key||e.isRead||m(e._id)},children:(0,Fa.jsxs)("div",{className:"d-flex align-items-start",children:[(0,Fa.jsx)("div",{className:`notification-icon ${e.type.replace("_","-")}`,children:(0,Fa.jsx)("i",{className:p(e.type)})}),(0,Fa.jsxs)("div",{className:"notification-content",children:[(0,Fa.jsxs)("div",{className:"notification-title",children:[(0,Fa.jsx)("span",{children:e.title}),!e.isRead&&(0,Fa.jsx)("span",{className:"notification-new-badge",children:"New"})]}),(0,Fa.jsx)("div",{className:"notification-message",children:e.message.length>80?`${e.message.substring(0,80)}...`:e.message}),(0,Fa.jsxs)("div",{className:"notification-time",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),h(e.createdAt)]})]})]})},e._id))}):(0,Fa.jsxs)("div",{className:"notification-empty",children:[(0,Fa.jsx)("div",{className:"notification-empty-icon",children:(0,Fa.jsx)("i",{className:"bi bi-bell-slash"})}),(0,Fa.jsx)("div",{className:"notification-empty-title",children:"No notifications"}),(0,Fa.jsx)("div",{className:"notification-empty-text",children:"You're all caught up! Check back later for updates."})]}),(0,Fa.jsx)("div",{className:"notification-footer",children:(0,Fa.jsxs)("button",{className:"notification-view-all-btn",onClick:()=>{l(!1),e("/notifications")},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-right me-2"}),"View All Notifications"]})})]})]})},Za=e=>{let{onToggleSidebar:s}=e;const{user:t,logout:a,refreshUser:n}=Ya(),i=se(),[l,o]=(0,r.useState)(!1),c=(0,r.useRef)(null);(0,r.useEffect)(()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,r.useEffect)(()=>{const e=()=>{n&&n()};return window.addEventListener("profileUpdated",e),()=>{window.removeEventListener("profileUpdated",e)}},[n]);const d=e=>{i(e),o(!1)},u=(e,s)=>{if(!e&&!s)return"U";return(e?e.charAt(0).toUpperCase():"")+(s?s.charAt(0).toUpperCase():"")};return(0,Fa.jsx)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary shadow-sm fixed-top",children:(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("button",{className:"btn btn-outline-light me-3 d-lg-none",onClick:s,type:"button",children:(0,Fa.jsx)("i",{className:"bi bi-list"})}),(0,Fa.jsxs)("div",{className:"navbar-brand d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:"bi bi-building me-2",style:{fontSize:"1.5rem"}}),(0,Fa.jsx)("span",{className:"fw-bold",children:"HRM System"})]}),(0,Fa.jsx)("div",{className:"d-none d-md-flex flex-grow-1 mx-4",children:(0,Fa.jsxs)("div",{className:"input-group",style:{maxWidth:"400px"},children:[(0,Fa.jsx)("input",{type:"text",className:"form-control",placeholder:"Search employees, departments...",style:{backgroundColor:"rgba(255,255,255,0.1)",border:"none",color:"white","::placeholder":{color:"rgba(255,255,255,0.7)"}}}),(0,Fa.jsx)("button",{className:"btn btn-outline-light",type:"button",children:(0,Fa.jsx)("i",{className:"bi bi-search"})})]})}),(0,Fa.jsxs)("div",{className:"navbar-nav d-flex flex-row align-items-center",children:[(0,Fa.jsx)("div",{className:"nav-item me-3",style:{position:"relative"},children:(0,Fa.jsx)(Xa,{})}),(0,Fa.jsxs)("div",{className:"nav-item dropdown",ref:c,children:[(0,Fa.jsxs)("button",{className:"btn btn-link nav-link dropdown-toggle d-flex align-items-center text-white text-decoration-none p-2",onClick:()=>{o(!l)},style:{border:"none",background:"none"},children:[(0,Fa.jsx)("div",{className:"rounded-circle bg-light text-primary d-flex align-items-center justify-content-center me-2",style:{width:"40px",height:"40px",fontSize:"14px",fontWeight:"bold"},children:null!==t&&void 0!==t&&t.profilePhoto?(0,Fa.jsx)("img",{src:t.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}):u(null===t||void 0===t?void 0:t.firstName,null===t||void 0===t?void 0:t.lastName)}),(0,Fa.jsxs)("div",{className:"d-none d-md-block text-start me-2",children:[(0,Fa.jsxs)("div",{className:"fw-semibold",style:{fontSize:"14px",lineHeight:"1.2"},children:[null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName]}),(0,Fa.jsx)("div",{className:"text-light",style:{fontSize:"12px",opacity:"0.8"},children:null===t||void 0===t?void 0:t.role})]}),(0,Fa.jsx)("i",{className:`bi bi-chevron-${l?"up":"down"} ms-1`})]}),l&&(0,Fa.jsxs)("div",{className:"dropdown-menu dropdown-menu-end show shadow-lg",style:{minWidth:"250px",border:"none",borderRadius:"8px",marginTop:"8px"},children:[(0,Fa.jsx)("div",{className:"dropdown-header bg-light",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"rounded-circle bg-primary text-white d-flex align-items-center justify-content-center me-3",style:{width:"50px",height:"50px",fontSize:"16px",fontWeight:"bold"},children:null!==t&&void 0!==t&&t.profilePhoto?(0,Fa.jsx)("img",{src:t.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"50px",height:"50px",objectFit:"cover"}}):u(null===t||void 0===t?void 0:t.firstName,null===t||void 0===t?void 0:t.lastName)}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"fw-bold text-dark",children:[null===t||void 0===t?void 0:t.firstName," ",null===t||void 0===t?void 0:t.lastName]}),(0,Fa.jsx)("div",{className:"text-muted small",children:null===t||void 0===t?void 0:t.email}),(0,Fa.jsx)("div",{className:"badge bg-primary mt-1",children:null===t||void 0===t?void 0:t.role})]})]})}),(0,Fa.jsx)("div",{className:"dropdown-divider"}),(0,Fa.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:()=>d("/profile"),children:[(0,Fa.jsx)("i",{className:"bi bi-person-circle me-3 text-primary",style:{fontSize:"18px"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:"My Profile"}),(0,Fa.jsx)("div",{className:"text-muted small",children:"View and edit your profile"})]})]}),["Admin","Vice President","HR BP","HR Manager","Team Manager","Team Leader"].includes(null===t||void 0===t?void 0:t.role)&&(0,Fa.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:()=>d("/dashboard"),children:[(0,Fa.jsx)("i",{className:"bi bi-speedometer2 me-3 text-success",style:{fontSize:"18px"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:"Management Dashboard"}),(0,Fa.jsx)("div",{className:"text-muted small",children:"Access management tools"})]})]}),(0,Fa.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:()=>d("/change-password"),children:[(0,Fa.jsx)("i",{className:"bi bi-shield-lock me-3 text-warning",style:{fontSize:"18px"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:"Change Password"}),(0,Fa.jsx)("div",{className:"text-muted small",children:"Update your password securely"})]})]}),(0,Fa.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2",onClick:()=>d("/settings"),children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-3 text-secondary",style:{fontSize:"18px"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:"Settings"}),(0,Fa.jsx)("div",{className:"text-muted small",children:"Preferences and configuration"})]})]}),(0,Fa.jsx)("div",{className:"dropdown-divider"}),(0,Fa.jsxs)("button",{className:"dropdown-item d-flex align-items-center py-2 text-danger",onClick:async()=>{try{await a(),i("/login")}catch(e){console.error("Logout error:",e)}o(!1)},children:[(0,Fa.jsx)("i",{className:"bi bi-box-arrow-right me-3",style:{fontSize:"18px"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:"Logout"}),(0,Fa.jsx)("div",{className:"text-muted small",children:"Sign out of your account"})]})]})]})]})]})]})})},en=e=>{let{isOpen:s,onToggle:t}=e;const{user:a,hasRole:n,hasAnyRole:i,getRoleLevel:l}=Ya(),o=Z(),c=se(),[d,u]=(0,r.useState)({}),[m,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ma.get("/auth/profile");h(e.data.user)}catch(e){console.error("Error fetching profile data:",e)}})()},[]);const p=e=>o.pathname.startsWith(e);return(0,Fa.jsxs)(Fa.Fragment,{children:[s&&(0,Fa.jsx)("div",{className:"position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none",style:{zIndex:1040},onClick:t}),(0,Fa.jsxs)("div",{className:"bg-dark text-white position-fixed start-0 overflow-auto",style:{width:"280px",top:"68px",height:"calc(100vh - 68px)",zIndex:1040,transition:"transform 0.3s ease-in-out",transform:s?"translateX(0)":"translateX(-100%)"},children:[(0,Fa.jsx)("div",{className:"p-3 border-bottom border-secondary",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center flex-grow-1",children:[(0,Fa.jsx)("div",{className:"me-3",style:{width:"40px",height:"40px"},children:null!==m&&void 0!==m&&m.profilePhoto?(0,Fa.jsx)("img",{src:m.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover",border:"2px solid #0d6efd"}}):(0,Fa.jsx)("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:(0,Fa.jsx)("i",{className:"bi bi-person text-white"})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"fw-semibold",children:[null===a||void 0===a?void 0:a.firstName," ",null===a||void 0===a?void 0:a.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:null===a||void 0===a?void 0:a.role})]})]}),(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-light d-lg-none",onClick:t,children:(0,Fa.jsx)("i",{className:"bi bi-x"})})]})}),(0,Fa.jsx)("nav",{className:"p-3",children:(0,Fa.jsx)("ul",{className:"nav flex-column",children:(()=>{const e=[];if(e.push({key:"dashboard",title:"Dashboard",icon:"bi-speedometer2",path:"/dashboard",roles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])&&e.push({key:"user-management",title:"User Management",icon:"bi-people",submenu:[{title:"All Users",path:"/admin/users",icon:"bi-person-lines-fill"},{title:"Add User",path:"/admin/users/add",icon:"bi-person-plus"},{title:"User Roles",path:"/admin/users/roles",icon:"bi-person-badge"}]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive"])&&e.push({key:"dept-team",title:"Departments & Teams",icon:"bi-diagram-3",submenu:[{title:"Departments",path:"/admin/departments",icon:"bi-building"},{title:"Teams",path:"/admin/teams",icon:"bi-people"},{title:"Organization Chart",path:"/admin/org-chart",icon:"bi-diagram-2"}]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"])){const s=[{title:"My Attendance",path:"/admin/leave/my-attendance",icon:"bi-clock-history"}];i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])&&(s.push({title:"Live Employee Status",path:"/admin/leave/live-status",icon:"bi-broadcast"},{title:"Leave Requests",path:"#",icon:"bi-calendar-check"},{title:"Attendance Reports",path:"/admin/reports/attendance",icon:"bi-graph-up"},{title:"Leave Policies",path:"#",icon:"bi-file-text"},{title:"Holiday Calendar",path:"#",icon:"bi-calendar-event"},{title:"Regularization Dashboard",path:"/admin/regularization",icon:"bi-clipboard-check"}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive"])&&s.push({title:"Work Hours Settings",path:"/admin/leave/work-hours",icon:"bi-clock"}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])&&s.push({title:"Permissions",path:"/admin/leave/permissions",icon:"bi-shield-check"})),n("Employee")&&s.push({title:"Request Regularization",path:"/employee/regularization/request",icon:"bi-clock-history"},{title:"My Requests",path:"/employee/regularization",icon:"bi-list-check"}),e.push({key:"leave-attendance",title:"Leave & Attendance",icon:"bi-calendar3",submenu:s})}if(n("Employee")&&e.push({key:"permissions",title:"Permissions",icon:"bi-shield-check",path:"/employee/permissions"}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])){const s=[];i(["Admin","Vice President","HR BP","HR Manager","HR Executive"])?s.push({title:"Salary Structure",path:"/admin/payroll/structure",icon:"bi-calculator"},{title:"Process Payroll",path:"/admin/payroll/process",icon:"bi-gear"},{title:"Payslips",path:"/admin/payroll/payslips",icon:"bi-file-earmark-text"},{title:"Reimbursements",path:"/admin/payroll/reimbursements",icon:"bi-receipt"}):i(["Team Manager","Team Leader"])&&s.push({title:"Reimbursements",path:"/admin/payroll/reimbursements",icon:"bi-receipt"}),e.push({key:"payroll",title:"Payroll Management",icon:"bi-currency-dollar",submenu:s})}else n("Employee")&&e.push({key:"employee-payroll",title:"Payroll Management",icon:"bi-currency-dollar",submenu:[{title:"Payslip",path:"/employee/payroll/payslip",icon:"bi-file-earmark-text"},{title:"Reimbursements",path:"/employee/payroll/reimbursements",icon:"bi-receipt"}]});if(i(["Admin","Vice President","HR BP","HR Manager","HR Executive"])&&e.push({key:"recruitment",title:"Recruitment",icon:"bi-person-plus",submenu:[{title:"Job Postings",path:"/admin/recruitment/jobs",icon:"bi-briefcase"},{title:"Applications",path:"/admin/recruitment/applications",icon:"bi-file-person"},{title:"Interviews",path:"/admin/recruitment/interviews",icon:"bi-chat-dots"},{title:"Offer Letters",path:"/admin/recruitment/offers",icon:"bi-envelope-check"}]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])?e.push({key:"performance",title:"Performance",icon:"bi-graph-up-arrow",submenu:[{title:"Performance Reviews",path:"/admin/performance/reviews",icon:"bi-clipboard-check"},{title:"Goals & KPIs",path:"/admin/performance/goals",icon:"bi-target"},{title:"Appraisals",path:"/admin/performance/appraisals",icon:"bi-star"},{title:"Feedback",path:"/admin/performance/feedback",icon:"bi-chat-square-text"}]}):n("Employee")&&e.push({key:"my-performance",title:"My Performance",icon:"bi-graph-up-arrow",submenu:[{title:"My Goals",path:"/employee/performance/goals",icon:"bi-target"},{title:"My Reviews",path:"/employee/performance/reviews",icon:"bi-clipboard-check"},{title:"Self Assessment",path:"/employee/performance/self-assessment",icon:"bi-pencil-square"}]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])?e.push({key:"training",title:"Training",icon:"bi-book",submenu:[{title:"Training Programs",path:"/admin/training/programs",icon:"bi-collection"},{title:"Training Calendar",path:"/admin/training/calendar",icon:"bi-calendar-week"},{title:"Certifications",path:"/admin/training/certifications",icon:"bi-award"},{title:"Training Reports",path:"/admin/training/reports",icon:"bi-graph-up"}]}):n("Employee")&&e.push({key:"my-training",title:"My Training",icon:"bi-book",submenu:[{title:"Available Trainings",path:"/employee/training/available",icon:"bi-collection"},{title:"My Trainings",path:"/employee/training/enrolled",icon:"bi-bookmark-check"},{title:"Certificates",path:"/employee/training/certificates",icon:"bi-award"}]}),i(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])){const s=[{title:"Employee Reports",path:"/admin/reports/employees",icon:"bi-people"},{title:"Attendance Reports",path:"/admin/reports/attendance",icon:"bi-clock"},{title:"Leave Reports",path:"/admin/reports/leave",icon:"bi-calendar"},{title:"Performance Reports",path:"/admin/reports/performance",icon:"bi-graph-up"}];i(["Admin","Vice President","HR BP","HR Manager","HR Executive"])&&s.push({title:"Payroll Reports",path:"/admin/reports/payroll",icon:"bi-currency-dollar"},{title:"Training Reports",path:"/admin/reports/training",icon:"bi-book"},{title:"Custom Reports",path:"/admin/reports/custom",icon:"bi-sliders"}),e.push({key:"reports",title:"Reports & Analytics",icon:"bi-bar-chart",submenu:s})}return n("Admin")&&e.push({key:"settings",title:"System Settings",icon:"bi-gear",submenu:[{title:"General Settings",path:"/admin/settings/general",icon:"bi-sliders"},{title:"User Roles & Permissions",path:"/admin/settings/roles",icon:"bi-shield-check"},{title:"Approval Workflows",path:"/admin/settings/workflows",icon:"bi-diagram-2"},{title:"Email Templates",path:"/admin/settings/email-templates",icon:"bi-envelope"},{title:"Audit Logs",path:"/admin/settings/audit-logs",icon:"bi-journal-text"},{title:"Backup & Restore",path:"/admin/settings/backup",icon:"bi-cloud-download"}]}),e.push({key:"profile",title:"My Profile",icon:"bi-person-circle",path:"/profile"}),e})().map(e=>{if(e.submenu){const s=d[e.key],t=e.submenu.some(e=>p(e.path));return(0,Fa.jsxs)("li",{className:"nav-item",children:[(0,Fa.jsxs)("button",{className:"nav-link d-flex align-items-center w-100 border-0 bg-transparent "+(t?"active":""),onClick:()=>{return s=e.key,void u(e=>({...e,[s]:!e[s]}));var s},style:{textAlign:"left"},children:[(0,Fa.jsx)("i",{className:`${e.icon} me-2`}),(0,Fa.jsx)("span",{className:"flex-grow-1",children:e.title}),(0,Fa.jsx)("i",{className:`bi bi-chevron-${s?"down":"right"} ms-auto`})]}),(0,Fa.jsx)("div",{className:"collapse "+(s?"show":""),children:(0,Fa.jsx)("ul",{className:"nav flex-column ms-3",children:e.submenu.map(e=>(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link d-flex align-items-center w-100 border-0 bg-transparent "+(p(e.path)?"active":""),onClick:()=>{"#"===e.path?alert("This feature is under development"):c(e.path)},style:{textAlign:"left"},children:[(0,Fa.jsx)("i",{className:`${e.icon} me-2`}),e.title]})},e.path))})})]},e.key)}return(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link d-flex align-items-center w-100 border-0 bg-transparent "+(p(e.path)?"active":""),onClick:()=>c(e.path),style:{textAlign:"left"},children:[(0,Fa.jsx)("i",{className:`${e.icon} me-2`}),e.title]})},e.key)})})})]})]})},sn=e=>{let{isOpen:s,onToggle:t}=e;const{user:a}=Ya(),n=(Z(),se()),[i,l]=(0,r.useState)("personal"),[o,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const e=await Ma.get("/auth/profile");c(e.data.user)}catch(e){console.error("Error fetching profile data:",e)}})()},[]),(0,r.useEffect)(()=>{window.profileActiveTabChange=e=>{l(e)};const e=window.location.hash.replace("#","");return e&&l(e),()=>{delete window.profileActiveTabChange}},[]);return(0,Fa.jsxs)(Fa.Fragment,{children:[s&&(0,Fa.jsx)("div",{className:"position-fixed top-0 start-0 w-100 h-100 bg-dark bg-opacity-50 d-lg-none",style:{zIndex:1040},onClick:t}),(0,Fa.jsxs)("div",{className:"bg-light border-end position-fixed start-0 overflow-auto",style:{width:"280px",top:"68px",height:"calc(100vh - 68px)",zIndex:1040,transition:"transform 0.3s ease-in-out",transform:s?"translateX(0)":"translateX(-100%)"},children:[(0,Fa.jsx)("div",{className:"p-3 border-bottom",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:"bi bi-person-circle text-primary me-2",style:{fontSize:"1.5rem"}}),(0,Fa.jsx)("h5",{className:"mb-0 text-dark",children:"Profile Sections"})]}),(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-secondary d-lg-none",onClick:t,children:(0,Fa.jsx)("i",{className:"bi bi-x"})})]})}),(0,Fa.jsx)("div",{className:"p-3 bg-primary text-white",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"me-3",style:{width:"50px",height:"50px"},children:null!==o&&void 0!==o&&o.profilePhoto?(0,Fa.jsx)("img",{src:o.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"50px",height:"50px",objectFit:"cover",border:"2px solid white"}}):(0,Fa.jsx)("div",{className:"bg-white rounded-circle d-flex align-items-center justify-content-center",style:{width:"50px",height:"50px"},children:(0,Fa.jsx)("i",{className:"bi bi-person text-primary",style:{fontSize:"1.5rem"}})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"fw-bold",children:[null===a||void 0===a?void 0:a.firstName," ",null===a||void 0===a?void 0:a.lastName]}),(0,Fa.jsx)("small",{className:"opacity-75",children:null===a||void 0===a?void 0:a.email}),(0,Fa.jsx)("div",{className:"mt-1",children:(0,Fa.jsx)("span",{className:"badge bg-light text-primary",children:null===a||void 0===a?void 0:a.role})})]})]})}),(0,Fa.jsx)("nav",{className:"p-3",children:(0,Fa.jsx)("ul",{className:"nav flex-column",children:[{key:"personal-info",title:"Personal Info",icon:"bi-person",path:"/profile",section:"personal"},{key:"work-info",title:"Work Info",icon:"bi-briefcase",path:"/profile",section:"work"},{key:"documents",title:"Documents",icon:"bi-file-text",path:"/profile",section:"documents"},{key:"emergency-contact",title:"Emergency Contact",icon:"bi-person-exclamation",path:"/profile",section:"emergency"},{key:"bank-salary",title:"Bank & Salary",icon:"bi-bank",path:"/profile",section:"bank"},{key:"leave-summary",title:"Leave Summary",icon:"bi-calendar-check",path:"/profile",section:"leave"},{key:"attendance",title:"Attendance",icon:"bi-clock",path:"/profile",section:"attendance"},{key:"payslips",title:"Payslips",icon:"bi-receipt",path:"/profile",section:"payslips"},{key:"performance",title:"Performance",icon:"bi-graph-up",path:"/profile",section:"performance"},{key:"settings",title:"Settings",icon:"bi-gear",path:"/profile",section:"settings"}].map(e=>(0,Fa.jsx)("li",{className:"nav-item mb-1",children:(0,Fa.jsxs)("button",{className:"nav-link d-flex align-items-center w-100 border-0 text-start rounded "+(i===e.section?"active bg-primary text-white":"text-dark bg-transparent"),onClick:()=>{return s=e.section,l(s),n(`/profile#${s}`),void(window.profileSectionChange&&window.profileSectionChange(s));var s},style:{padding:"12px 16px",transition:"all 0.2s ease"},onMouseEnter:s=>{i!==e.section&&(s.target.style.backgroundColor="#f8f9fa")},onMouseLeave:s=>{i!==e.section&&(s.target.style.backgroundColor="transparent")},children:[(0,Fa.jsx)("i",{className:`${e.icon} me-3`,style:{fontSize:"1.1rem",width:"20px"}}),(0,Fa.jsx)("span",{children:e.title})]})},e.key))})}),(0,Fa.jsxs)("div",{className:"p-3 border-top mt-auto",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-3",children:"Quick Actions"}),(0,Fa.jsxs)("div",{className:"d-grid gap-2",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>n("/dashboard"),children:[(0,Fa.jsx)("i",{className:"bi bi-speedometer2 me-2"}),"Go to Dashboard"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",onClick:()=>window.print(),children:[(0,Fa.jsx)("i",{className:"bi bi-printer me-2"}),"Print Profile"]})]})]})]})]})},tn=e=>{let{children:s}=e;const[t,a]=(0,r.useState)(!1),[n,i]=(0,r.useState)(window.innerWidth>=992),l="/profile"===Z().pathname;(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth>=992;i(e),a(!!e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const o=()=>{a(!t)};return(0,Fa.jsxs)("div",{className:"min-vh-100 bg-light",children:[(0,Fa.jsx)(Za,{onToggleSidebar:o}),l?(0,Fa.jsx)(sn,{isOpen:t,onToggle:o}):(0,Fa.jsx)(en,{isOpen:t,onToggle:o}),(0,Fa.jsx)("main",{style:{marginLeft:n&&t?"280px":"0",minHeight:"calc(100vh - 85px)",marginTop:"85px",transition:"margin-left 0.3s ease-in-out",paddingLeft:l&&n&&t?"20px":"0"},children:(0,Fa.jsx)("div",{className:"container-fluid",style:{padding:"1.5rem"},children:s})})]})},an=()=>{var e,s;const[t,a]=(0,r.useState)({email:"",password:""}),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!1),{login:c,isAuthenticated:d,isLoading:u,error:m,clearError:h}=Ya(),p=Z();(0,r.useEffect)(()=>{m&&h()},[t,h,m]);const x=Ya(),f=(null===(e=p.state)||void 0===e||null===(s=e.from)||void 0===s?void 0:s.pathname)||(x.user,"/dashboard");if(d)return(0,Fa.jsx)(fe,{to:f,replace:!0});const b=e=>{const{name:s,value:t}=e.target;a(e=>({...e,[s]:t}))};return u?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsx)("div",{className:"min-vh-100 d-flex align-items-center bg-light",children:(0,Fa.jsx)("div",{className:"container",children:(0,Fa.jsx)("div",{className:"row justify-content-center",children:(0,Fa.jsxs)("div",{className:"col-md-6 col-lg-4",children:[(0,Fa.jsx)("div",{className:"card shadow",children:(0,Fa.jsxs)("div",{className:"card-body p-4",children:[(0,Fa.jsxs)("div",{className:"text-center mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-building text-primary",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h2",{className:"card-title mt-2 mb-1",children:"HRM System"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Sign in to your account"})]}),m&&(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle-fill me-2"}),m,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:h,"aria-label":"Close"})]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(!0);try{(await c(t)).success}catch(m){console.error("Login error:",m)}finally{o(!1)}},children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-envelope"})}),(0,Fa.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:t.email,onChange:b,placeholder:"Enter your email",required:!0,autoComplete:"email",disabled:l})]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"password",className:"form-label",children:"Password"}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-lock"})}),(0,Fa.jsx)("input",{type:n?"text":"password",className:"form-control",id:"password",name:"password",value:t.password,onChange:b,placeholder:"Enter your password",required:!0,autoComplete:"current-password",disabled:l}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{i(!n)},disabled:l,children:(0,Fa.jsx)("i",{className:"bi "+(n?"bi-eye-slash":"bi-eye")})})]})]}),(0,Fa.jsx)("div",{className:"d-grid",children:(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:l||!t.email||!t.password,children:l?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),"Signing in..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-box-arrow-in-right me-2"}),"Sign In"]})})})]}),(0,Fa.jsxs)("div",{className:"mt-4 p-3 bg-light rounded",children:[(0,Fa.jsxs)("h6",{className:"text-muted mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-1"}),"Demo Credentials"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Contact your administrator for login credentials."})]})]})}),(0,Fa.jsx)("div",{className:"text-center mt-3",children:(0,Fa.jsx)("small",{className:"text-muted",children:"\xa9 2024 HRM Management System. All rights reserved."})})]})})})})};class nn extends Error{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",t=arguments.length>2?arguments[2]:void 0;super(e),this.name=s,this.context=t}}class rn extends nn{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ln extends nn{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class on extends nn{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var cn;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(cn||(cn={}));var dn=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};class un{constructor(e){let{headers:s={},customFetch:a,region:n=cn.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=s,this.region=n,this.fetch=(e=>{let s;return s=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return Promise.resolve().then(t.bind(t,630)).then(e=>{let{default:t}=e;return t(...s)})}:fetch),function(){return s(...arguments)}})(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var t;return dn(this,void 0,void 0,function*(){try{const{headers:a,method:n,body:r}=s;let i={},{region:l}=s;l||(l=this.region);const o=new URL(`${this.url}/${e}`);let c;l&&"any"!==l&&(i["x-region"]=l,o.searchParams.set("forceFunctionRegion",l)),r&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&("undefined"!==typeof Blob&&r instanceof Blob||r instanceof ArrayBuffer?(i["Content-Type"]="application/octet-stream",c=r):"string"===typeof r?(i["Content-Type"]="text/plain",c=r):"undefined"!==typeof FormData&&r instanceof FormData?c=r:(i["Content-Type"]="application/json",c=JSON.stringify(r)));const d=yield this.fetch(o.toString(),{method:n||"POST",headers:Object.assign(Object.assign(Object.assign({},i),this.headers),a),body:c}).catch(e=>{throw new rn(e)}),u=d.headers.get("x-relay-error");if(u&&"true"===u)throw new ln(d);if(!d.ok)throw new on(d);let m,h=(null!==(t=d.headers.get("Content-Type"))&&void 0!==t?t:"text/plain").split(";")[0].trim();return m="application/json"===h?yield d.json():"application/octet-stream"===h?yield d.blob():"text/event-stream"===h?d:"multipart/form-data"===h?yield d.formData():yield d.text(),{data:m,error:null,response:d}}catch(a){return{data:null,error:a,response:a instanceof on||a instanceof ln?a.context:void 0}}})}}var mn=t(980);const{PostgrestClient:hn,PostgrestQueryBuilder:pn,PostgrestFilterBuilder:xn,PostgrestTransformBuilder:fn,PostgrestBuilder:bn,PostgrestError:vn}=mn;const gn=function(){if("undefined"!==typeof WebSocket)return WebSocket;if("undefined"!==typeof global.WebSocket)return global.WebSocket;if("undefined"!==typeof window.WebSocket)return window.WebSocket;if("undefined"!==typeof self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var jn,yn,Nn,wn,kn,Sn;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(jn||(jn={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(yn||(yn={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(Nn||(Nn={})),function(e){e.websocket="websocket"}(wn||(wn={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(kn||(kn={}));class Cn{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),t=new TextDecoder;return this._decodeBroadcast(e,s,t)}_decodeBroadcast(e,s,t){const a=s.getUint8(1),n=s.getUint8(2);let r=this.HEADER_LENGTH+2;const i=t.decode(e.slice(r,r+a));r+=a;const l=t.decode(e.slice(r,r+n));r+=n;return{ref:null,topic:i,event:l,payload:JSON.parse(t.decode(e.slice(r,e.byteLength)))}}}class Tn{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(Sn||(Sn={}));const Pn=function(e,s){var t;const a=null!==(t=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==t?t:[];return Object.keys(s).reduce((t,n)=>(t[n]=Rn(n,e,s,a),t),{})},Rn=(e,s,t,a)=>{const n=s.find(s=>s.name===e),r=null===n||void 0===n?void 0:n.type,i=t[e];return r&&!a.includes(r)?En(r,i):_n(i)},En=(e,s)=>{if("_"===e.charAt(0)){const t=e.slice(1,e.length);return On(s,t)}switch(e){case Sn.bool:return An(s);case Sn.float4:case Sn.float8:case Sn.int2:case Sn.int4:case Sn.int8:case Sn.numeric:case Sn.oid:return Dn(s);case Sn.json:case Sn.jsonb:return Ln(s);case Sn.timestamp:return In(s);case Sn.abstime:case Sn.date:case Sn.daterange:case Sn.int4range:case Sn.int8range:case Sn.money:case Sn.reltime:case Sn.text:case Sn.time:case Sn.timestamptz:case Sn.timetz:case Sn.tsrange:case Sn.tstzrange:default:return _n(s)}},_n=e=>e,An=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Dn=e=>{if("string"===typeof e){const s=parseFloat(e);if(!Number.isNaN(s))return s}return e},Ln=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(s){return console.log(`JSON parse error: ${s}`),e}return e},On=(e,s)=>{if("string"!==typeof e)return e;const t=e.length-1,a=e[t];if("{"===e[0]&&"}"===a){let a;const r=e.slice(1,t);try{a=JSON.parse("["+r+"]")}catch(n){a=r?r.split(","):[]}return a.map(e=>En(s,e))}return e},In=e=>"string"===typeof e?e.replace(" ","T"):e,Mn=e=>{let s=e;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")};class Fn{constructor(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e4;this.channel=e,this.event=s,this.payload=t,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var t;return this._hasReceived(e)&&s(null===(t=this.receivedResp)||void 0===t?void 0:t.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:s,response:t}=e;this.recHooks.filter(e=>e.status===s).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $n,zn,Hn,Un;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}($n||($n={}));class qn{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const t=(null===s||void 0===s?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},e=>{const{onJoin:s,onLeave:t,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=qn.syncState(this.state,e,s,t),this.pendingDiffs.forEach(e=>{this.state=qn.syncDiff(this.state,e,s,t)}),this.pendingDiffs=[],a()}),this.channel._on(t.diff,{},e=>{const{onJoin:s,onLeave:t,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=qn.syncDiff(this.state,e,s,t),a())}),this.onJoin((e,s,t)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:s,newPresences:t})}),this.onLeave((e,s,t)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:s,leftPresences:t})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,t,a){const n=this.cloneDeep(e),r=this.transformState(s),i={},l={};return this.map(n,(e,s)=>{r[e]||(l[e]=s)}),this.map(r,(e,s)=>{const t=n[e];if(t){const a=s.map(e=>e.presence_ref),n=t.map(e=>e.presence_ref),r=s.filter(e=>n.indexOf(e.presence_ref)<0),o=t.filter(e=>a.indexOf(e.presence_ref)<0);r.length>0&&(i[e]=r),o.length>0&&(l[e]=o)}else i[e]=s}),this.syncDiff(n,{joins:i,leaves:l},t,a)}static syncDiff(e,s,t,a){const{joins:n,leaves:r}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return t||(t=()=>{}),a||(a=()=>{}),this.map(n,(s,a)=>{var n;const r=null!==(n=e[s])&&void 0!==n?n:[];if(e[s]=this.cloneDeep(a),r.length>0){const t=e[s].map(e=>e.presence_ref),a=r.filter(e=>t.indexOf(e.presence_ref)<0);e[s].unshift(...a)}t(s,r,a)}),this.map(r,(s,t)=>{let n=e[s];if(!n)return;const r=t.map(e=>e.presence_ref);n=n.filter(e=>r.indexOf(e.presence_ref)<0),e[s]=n,a(s,n,t),0===n.length&&delete e[s]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(t=>s(t,e[t]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,t)=>{const a=e[t];return s[t]="metas"in a?a.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):a,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(zn||(zn={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(Hn||(Hn={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Un||(Un={}));class Bn{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},t=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=s,this.socket=t,this.bindings={},this.state=yn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new Fn(this,Nn.join,this.params,this.timeout),this.rejoinTimer=new Tn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yn.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Nn.reply,{},(e,s)=>{this._trigger(this._replyEventName(s),e)}),this.presence=new qn(this),this.broadcastEndpointURL=Mn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var t,a;if(this.socket.isConnected()||this.socket.connect(),this.state==yn.closed){const{config:{broadcast:n,presence:r,private:i}}=this.params;this._onError(s=>null===e||void 0===e?void 0:e(Un.CHANNEL_ERROR,s)),this._onClose(()=>null===e||void 0===e?void 0:e(Un.CLOSED));const l={},o={broadcast:n,presence:r,postgres_changes:null!==(a=null===(t=this.bindings.postgres_changes)||void 0===t?void 0:t.map(e=>e.filter))&&void 0!==a?a:[],private:i};this.socket.accessTokenValue&&(l.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:o},l)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async s=>{let{postgres_changes:t}=s;var a;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,n=null!==(a=null===s||void 0===s?void 0:s.length)&&void 0!==a?a:0,r=[];for(let a=0;a<n;a++){const n=s[a],{filter:{event:i,schema:l,table:o,filter:c}}=n,d=t&&t[a];if(!d||d.event!==i||d.schema!==l||d.table!==o||d.filter!==c)return this.unsubscribe(),this.state=yn.errored,void(null===e||void 0===e||e(Un.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));r.push(Object.assign(Object.assign({},n),{id:d.id}))}return this.bindings.postgres_changes=r,void(e&&e(Un.SUBSCRIBED))}null===e||void 0===e||e(Un.SUBSCRIBED)}).receive("error",s=>{this.state=yn.errored,null===e||void 0===e||e(Un.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(s).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(Un.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,s,t){return this._on(e,s,t)}async send(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var t,a;if(this._canPush()||"broadcast"!==e.type)return new Promise(t=>{var a,n,r;const i=this._push(e.type,e,s.timeout||this.timeout);"broadcast"!==e.type||(null===(r=null===(n=null===(a=this.params)||void 0===a?void 0:a.config)||void 0===n?void 0:n.broadcast)||void 0===r?void 0:r.ack)||t("ok"),i.receive("ok",()=>t("ok")),i.receive("error",()=>t("error")),i.receive("timeout",()=>t("timed out"))});{const{event:r,payload:i}=e,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,l,null!==(t=s.timeout)&&void 0!==t?t:this.timeout);return await(null===(a=e.body)||void 0===a?void 0:a.cancel()),e.ok?"ok":"error"}catch(n){return"AbortError"===n.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=yn.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Nn.close,"leave",this._joinRef())};this.joinPush.destroy();let t=null;return new Promise(a=>{t=new Fn(this,Nn.leave,{},e),t.receive("ok",()=>{s(),a("ok")}).receive("timeout",()=>{s(),a("timed out")}).receive("error",()=>{a("error")}),t.send(),this._canPush()||t.trigger("ok",{})}).finally(()=>{null===t||void 0===t||t.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,t){const a=new AbortController,n=setTimeout(()=>a.abort(),t),r=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:a.signal}));return clearTimeout(n),r}_push(e,s){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Fn(this,e,s,t);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(e,s,t){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,t){var a,n;const r=e.toLocaleLowerCase(),{close:i,error:l,leave:o,join:c}=Nn;if(t&&[i,l,o,c].indexOf(r)>=0&&t!==this._joinRef())return;let d=this._onMessage(r,s,t);if(s&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(r)?null===(a=this.bindings.postgres_changes)||void 0===a||a.filter(e=>{var s,t,a;return"*"===(null===(s=e.filter)||void 0===s?void 0:s.event)||(null===(a=null===(t=e.filter)||void 0===t?void 0:t.event)||void 0===a?void 0:a.toLocaleLowerCase())===r}).map(e=>e.callback(d,t)):null===(n=this.bindings[r])||void 0===n||n.filter(e=>{var t,a,n,i,l,o;if(["broadcast","presence","postgres_changes"].includes(r)){if("id"in e){const r=e.id,i=null===(t=e.filter)||void 0===t?void 0:t.event;return r&&(null===(a=s.ids)||void 0===a?void 0:a.includes(r))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(n=s.data)||void 0===n?void 0:n.type.toLocaleLowerCase()))}{const t=null===(l=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===l?void 0:l.toLocaleLowerCase();return"*"===t||t===(null===(o=null===s||void 0===s?void 0:s.event)||void 0===o?void 0:o.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===r}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:s,table:t,commit_timestamp:a,type:n,errors:r}=e,i={schema:s,table:t,commit_timestamp:a,eventType:n,new:{},old:{},errors:r};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,t)})}_isClosed(){return this.state===yn.closed}_isJoined(){return this.state===yn.joined}_isJoining(){return this.state===yn.joining}_isLeaving(){return this.state===yn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,t){const a=e.toLocaleLowerCase(),n={type:a,filter:s,callback:t};return this.bindings[a]?this.bindings[a].push(n):this.bindings[a]=[n],this}_off(e,s){const t=e.toLocaleLowerCase();return this.bindings[t]=this.bindings[t].filter(e=>{var a;return!((null===(a=e.type)||void 0===a?void 0:a.toLocaleLowerCase())===t&&Bn.isEqual(e.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const t in e)if(e[t]!==s[t])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Nn.close,{},e)}_onError(e){this._on(Nn.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(s.new=Pn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(s.old=Pn(e.columns,e.old_record)),s}}const Wn=()=>{};class Vn{constructor(e,s){var a;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wn,this.ref=0,this.logger=Wn,this.conn=null,this.sendBuffer=[],this.serializer=new Cn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let s;return s=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return Promise.resolve().then(t.bind(t,630)).then(e=>{let{default:t}=e;return t(...s)})}:fetch),function(){return s(...arguments)}},this.endPoint=`${e}/${wn.websocket}`,this.httpEndpoint=Mn(e),(null===s||void 0===s?void 0:s.transport)?this.transport=s.transport:this.transport=null,(null===s||void 0===s?void 0:s.params)&&(this.params=s.params),(null===s||void 0===s?void 0:s.timeout)&&(this.timeout=s.timeout),(null===s||void 0===s?void 0:s.logger)&&(this.logger=s.logger),((null===s||void 0===s?void 0:s.logLevel)||(null===s||void 0===s?void 0:s.log_level))&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null===s||void 0===s?void 0:s.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const n=null===(a=null===s||void 0===s?void 0:s.params)||void 0===a?void 0:a.apikey;if(n&&(this.accessTokenValue=n,this.apiKey=n),this.reconnectAfterMs=(null===s||void 0===s?void 0:s.reconnectAfterMs)?s.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null===s||void 0===s?void 0:s.encode)?s.encode:(e,s)=>s(JSON.stringify(e)),this.decode=(null===s||void 0===s?void 0:s.decode)?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Tn(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null===s||void 0===s?void 0:s.fetch),null===s||void 0===s?void 0:s.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null===s||void 0===s?void 0:s.worker)||!1,this.workerUrl=null===s||void 0===s?void 0:s.workerUrl}this.accessToken=(null===s||void 0===s?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=gn),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==s&&void 0!==s?s:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,t){this.logger(e,s,t)}connectionState(){switch(this.conn&&this.conn.readyState){case jn.connecting:return kn.Connecting;case jn.open:return kn.Open;case jn.closing:return kn.Closing;default:return kn.Closed}}isConnected(){return this.connectionState()===kn.Open}channel(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const t=`realtime:${e}`,a=this.getChannels().find(e=>e.topic===t);if(a)return a;{const t=new Bn(`realtime:${e}`,s,this);return this.channels.push(t),t}}push(e){const{topic:s,event:t,payload:a,ref:n}=e,r=()=>{this.encode(e,e=>{var s;null===(s=this.conn)||void 0===s||s.send(e)})};this.log("push",`${s} ${t} (${n})`,a),this.isConnected()?r():this.sendBuffer.push(r)}async setAuth(){let e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:null)||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(s=>{const t={access_token:e,version:"realtime-js/2.11.15"};e&&s.updateJoinPayload(t),s.joinedOnce&&s._isJoined()&&s._push(Nn.access_token,{access_token:e})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(s=>s.topic===e&&(s._isJoined()||s._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:s,event:t,payload:a,ref:n}=e;"phoenix"===s&&"phx_reply"===t&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),n&&n===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${s} ${t} ${n&&"("+n+")"||""}`,a),Array.from(this.channels).filter(e=>e._isMember(s)).forEach(e=>e._trigger(t,a,n)),this.stateChangeCallbacks.message.forEach(s=>s(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(Nn.error))}_appendParams(e,s){if(0===Object.keys(s).length)return e;const t=e.match(/\?/)?"&":"?";return`${e}${t}${new URLSearchParams(s)}`}_workerObjectUrl(e){let s;if(e)s=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});s=URL.createObjectURL(e)}return s}}class Jn extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Gn(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Kn extends Jn{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Yn extends Jn{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var Qn=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};const Xn=e=>{let s;return s=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return Promise.resolve().then(t.bind(t,630)).then(e=>{let{default:t}=e;return t(...s)})}:fetch),function(){return s(...arguments)}},Zn=e=>{if(Array.isArray(e))return e.map(e=>Zn(e));if("function"===typeof e||e!==Object(e))return e;const s={};return Object.entries(e).forEach(e=>{let[t,a]=e;const n=t.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));s[n]=Zn(a)}),s};var er=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};const sr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tr=(e,s,a)=>er(void 0,void 0,void 0,function*(){const n=yield Qn(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(t.bind(t,630))).Response:Response});e instanceof n&&!(null===a||void 0===a?void 0:a.noResolveJson)?e.json().then(t=>{s(new Kn(sr(t),e.status||500))}).catch(e=>{s(new Yn(sr(e),e))}):s(new Yn(sr(e),e))});function ar(e,s,t,a,n,r){return er(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(t,((e,s,t,a)=>{const n={method:e,headers:(null===s||void 0===s?void 0:s.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json"},null===s||void 0===s?void 0:s.headers),a&&(n.body=JSON.stringify(a)),Object.assign(Object.assign({},n),t))})(s,a,n,r)).then(e=>{if(!e.ok)throw e;return(null===a||void 0===a?void 0:a.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>tr(e,l,a))})})}function nr(e,s,t,a){return er(this,void 0,void 0,function*(){return ar(e,"GET",s,t,a)})}function rr(e,s,t,a,n){return er(this,void 0,void 0,function*(){return ar(e,"POST",s,a,n,t)})}function ir(e,s,t,a,n){return er(this,void 0,void 0,function*(){return ar(e,"DELETE",s,a,n,t)})}var lr=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};const or={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cr={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class dr{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=s,this.bucketId=t,this.fetch=Xn(a)}uploadOrUpdate(e,s,t,a){return lr(this,void 0,void 0,function*(){try{let n;const r=Object.assign(Object.assign({},cr),a);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(r.upsert)});const l=r.metadata;"undefined"!==typeof Blob&&t instanceof Blob?(n=new FormData,n.append("cacheControl",r.cacheControl),l&&n.append("metadata",this.encodeMetadata(l)),n.append("",t)):"undefined"!==typeof FormData&&t instanceof FormData?(n=t,n.append("cacheControl",r.cacheControl),l&&n.append("metadata",this.encodeMetadata(l))):(n=t,i["cache-control"]=`max-age=${r.cacheControl}`,i["content-type"]=r.contentType,l&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),(null===a||void 0===a?void 0:a.headers)&&(i=Object.assign(Object.assign({},i),a.headers));const o=this._removeEmptyFolders(s),c=this._getFinalPath(o),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:n,headers:i},(null===r||void 0===r?void 0:r.duplex)?{duplex:r.duplex}:{})),u=yield d.json();if(d.ok)return{data:{path:o,id:u.Id,fullPath:u.Key},error:null};return{data:null,error:u}}catch(n){if(Gn(n))return{data:null,error:n};throw n}})}upload(e,s,t){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,t)})}uploadToSignedUrl(e,s,t,a){return lr(this,void 0,void 0,function*(){const n=this._removeEmptyFolders(e),r=this._getFinalPath(n),i=new URL(this.url+`/object/upload/sign/${r}`);i.searchParams.set("token",s);try{let e;const s=Object.assign({upsert:cr.upsert},a),r=Object.assign(Object.assign({},this.headers),{"x-upsert":String(s.upsert)});"undefined"!==typeof Blob&&t instanceof Blob?(e=new FormData,e.append("cacheControl",s.cacheControl),e.append("",t)):"undefined"!==typeof FormData&&t instanceof FormData?(e=t,e.append("cacheControl",s.cacheControl)):(e=t,r["cache-control"]=`max-age=${s.cacheControl}`,r["content-type"]=s.contentType);const l=yield this.fetch(i.toString(),{method:"PUT",body:e,headers:r}),o=yield l.json();if(l.ok)return{data:{path:n,fullPath:o.Key},error:null};return{data:null,error:o}}catch(l){if(Gn(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(e,s){return lr(this,void 0,void 0,function*(){try{let t=this._getFinalPath(e);const a=Object.assign({},this.headers);(null===s||void 0===s?void 0:s.upsert)&&(a["x-upsert"]="true");const n=yield rr(this.fetch,`${this.url}/object/upload/sign/${t}`,{},{headers:a}),r=new URL(this.url+n.url),i=r.searchParams.get("token");if(!i)throw new Jn("No token returned by API");return{data:{signedUrl:r.toString(),path:e,token:i},error:null}}catch(t){if(Gn(t))return{data:null,error:t};throw t}})}update(e,s,t){return lr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,t)})}move(e,s,t){return lr(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:null===t||void 0===t?void 0:t.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(Gn(a))return{data:null,error:a};throw a}})}copy(e,s,t){return lr(this,void 0,void 0,function*(){try{return{data:{path:(yield rr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:null===t||void 0===t?void 0:t.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(Gn(a))return{data:null,error:a};throw a}})}createSignedUrl(e,s,t){return lr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(e),n=yield rr(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:s},(null===t||void 0===t?void 0:t.transform)?{transform:t.transform}:{}),{headers:this.headers});const r=(null===t||void 0===t?void 0:t.download)?`&download=${!0===t.download?"":t.download}`:"";return n={signedUrl:encodeURI(`${this.url}${n.signedURL}${r}`)},{data:n,error:null}}catch(a){if(Gn(a))return{data:null,error:a};throw a}})}createSignedUrls(e,s,t){return lr(this,void 0,void 0,function*(){try{const a=yield rr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),n=(null===t||void 0===t?void 0:t.download)?`&download=${!0===t.download?"":t.download}`:"";return{data:a.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${n}`):null})),error:null}}catch(a){if(Gn(a))return{data:null,error:a};throw a}})}download(e,s){return lr(this,void 0,void 0,function*(){const t="undefined"!==typeof(null===s||void 0===s?void 0:s.transform)?"render/image/authenticated":"object",a=this.transformOptsToQueryString((null===s||void 0===s?void 0:s.transform)||{}),n=a?`?${a}`:"";try{const s=this._getFinalPath(e),a=yield nr(this.fetch,`${this.url}/${t}/${s}${n}`,{headers:this.headers,noResolveJson:!0});return{data:yield a.blob(),error:null}}catch(r){if(Gn(r))return{data:null,error:r};throw r}})}info(e){return lr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const e=yield nr(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Zn(e),error:null}}catch(t){if(Gn(t))return{data:null,error:t};throw t}})}exists(e){return lr(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield function(e,s,t,a){return er(this,void 0,void 0,function*(){return ar(e,"HEAD",s,Object.assign(Object.assign({},t),{noResolveJson:!0}),a)})}(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(t){if(Gn(t)&&t instanceof Yn){const e=t.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:t}}throw t}})}getPublicUrl(e,s){const t=this._getFinalPath(e),a=[],n=(null===s||void 0===s?void 0:s.download)?`download=${!0===s.download?"":s.download}`:"";""!==n&&a.push(n);const r="undefined"!==typeof(null===s||void 0===s?void 0:s.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===s||void 0===s?void 0:s.transform)||{});""!==i&&a.push(i);let l=a.join("&");return""!==l&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${r}/public/${t}${l}`)}}}remove(e){return lr(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Gn(s))return{data:null,error:s};throw s}})}list(e,s,t){return lr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},or),s),{prefix:e||""});return{data:yield rr(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},t),error:null}}catch(a){if(Gn(a))return{data:null,error:a};throw a}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const ur={"X-Client-Info":"storage-js/2.7.1"};var mr=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};class hr{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;this.url=e,this.headers=Object.assign(Object.assign({},ur),s),this.fetch=Xn(t)}listBuckets(){return mr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Gn(e))return{data:null,error:e};throw e}})}getBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield nr(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Gn(s))return{data:null,error:s};throw s}})}createBucket(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return mr(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(t){if(Gn(t))return{data:null,error:t};throw t}})}updateBucket(e,s){return mr(this,void 0,void 0,function*(){try{const t=yield function(e,s,t,a,n){return er(this,void 0,void 0,function*(){return ar(e,"PUT",s,a,n,t)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers});return{data:t,error:null}}catch(t){if(Gn(t))return{data:null,error:t};throw t}})}emptyBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield rr(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Gn(s))return{data:null,error:s};throw s}})}deleteBucket(e){return mr(this,void 0,void 0,function*(){try{return{data:yield ir(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Gn(s))return{data:null,error:s};throw s}})}}class pr extends hr{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0)}from(e){return new dr(this.url,this.headers,e,this.fetch)}}let xr="";xr="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const fr={headers:{"X-Client-Info":`supabase-js-${xr}/2.50.5`}},br={schema:"public"},vr={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},gr={};var jr=t(630),yr=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};const Nr=e=>{let s;return s=e||("undefined"===typeof fetch?jr.default:fetch),function(){return s(...arguments)}},wr=(e,s,t)=>{const a=Nr(t),n="undefined"===typeof Headers?jr.Headers:Headers;return(t,r)=>yr(void 0,void 0,void 0,function*(){var i;const l=null!==(i=yield s())&&void 0!==i?i:e;let o=new n(null===r||void 0===r?void 0:r.headers);return o.has("apikey")||o.set("apikey",e),o.has("Authorization")||o.set("Authorization",`Bearer ${l}`),a(t,Object.assign(Object.assign({},r),{headers:o}))})};var kr=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};const Sr="2.70.0",Cr=3e4,Tr=9e4,Pr={"X-Client-Info":`gotrue-js/${Sr}`},Rr="X-Supabase-Api-Version",Er={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},_r=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class Ar extends Error{constructor(e,s,t){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=t}}function Dr(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Lr extends Ar{constructor(e,s,t){super(e,s,t),this.name="AuthApiError",this.status=s,this.code=t}}class Or extends Ar{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Ir extends Ar{constructor(e,s,t,a){super(e,t,a),this.name=s,this.status=t}}class Mr extends Ir{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class Fr extends Ir{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $r extends Ir{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class zr extends Ir{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Hr extends Ir{constructor(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ur extends Ir{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function qr(e){return Dr(e)&&"AuthRetryableFetchError"===e.name}class Br extends Ir{constructor(e,s,t){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=t}}class Wr extends Ir{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jr=" \t\n\r=".split(""),Gr=(()=>{const e=new Array(128);for(let s=0;s<e.length;s+=1)e[s]=-1;for(let s=0;s<Jr.length;s+=1)e[Jr[s].charCodeAt(0)]=-2;for(let s=0;s<Vr.length;s+=1)e[Vr[s].charCodeAt(0)]=s;return e})();function Kr(e,s,t){if(null!==e)for(s.queue=s.queue<<8|e,s.queuedBits+=8;s.queuedBits>=6;){const e=s.queue>>s.queuedBits-6&63;t(Vr[e]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const e=s.queue>>s.queuedBits-6&63;t(Vr[e]),s.queuedBits-=6}}function Yr(e,s,t){const a=Gr[e];if(!(a>-1)){if(-2===a)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(s.queue=s.queue<<6|a,s.queuedBits+=6;s.queuedBits>=8;)t(s.queue>>s.queuedBits-8&255),s.queuedBits-=8}function Qr(e){const s=[],t=e=>{s.push(String.fromCodePoint(e))},a={utf8seq:0,codepoint:0},n={queue:0,queuedBits:0},r=e=>{!function(e,s,t){if(0===s.utf8seq){if(e<=127)return void t(e);for(let t=1;t<6;t+=1)if(0===(e>>7-t&1)){s.utf8seq=t;break}if(2===s.utf8seq)s.codepoint=31&e;else if(3===s.utf8seq)s.codepoint=15&e;else{if(4!==s.utf8seq)throw new Error("Invalid UTF-8 sequence");s.codepoint=7&e}s.utf8seq-=1}else if(s.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|63&e,s.utf8seq-=1,0===s.utf8seq&&t(s.codepoint)}}(e,a,t)};for(let i=0;i<e.length;i+=1)Yr(e.charCodeAt(i),n,r);return s.join("")}function Xr(e,s){if(!(e<=127)){if(e<=2047)return s(192|e>>6),void s(128|63&e);if(e<=65535)return s(224|e>>12),s(128|e>>6&63),void s(128|63&e);if(e<=1114111)return s(240|e>>18),s(128|e>>12&63),s(128|e>>6&63),void s(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}s(e)}function Zr(e,s){for(let t=0;t<e.length;t+=1){let a=e.charCodeAt(t);if(a>55295&&a<=56319){const s=1024*(a-55296)&65535;a=65536+(e.charCodeAt(t+1)-56320&65535|s),t+=1}Xr(a,s)}}function ei(e){const s=[],t={queue:0,queuedBits:0},a=e=>{s.push(e)};for(let n=0;n<e.length;n+=1)Yr(e.charCodeAt(n),t,a);return new Uint8Array(s)}function si(e){const s=[],t={queue:0,queuedBits:0},a=e=>{s.push(e)};return e.forEach(e=>Kr(e,t,a)),Kr(null,t,a),s.join("")}const ti=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ai={tested:!1,writable:!1},ni=()=>{if(!ti())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(Rl){return!1}if(ai.tested)return ai.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ai.tested=!0,ai.writable=!0}catch(Rl){ai.tested=!0,ai.writable=!1}return ai.writable};const ri=e=>{let s;return s=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,s=new Array(e),a=0;a<e;a++)s[a]=arguments[a];return Promise.resolve().then(t.bind(t,630)).then(e=>{let{default:t}=e;return t(...s)})}:fetch),function(){return s(...arguments)}},ii=async(e,s,t)=>{await e.setItem(s,JSON.stringify(t))},li=async(e,s)=>{const t=await e.getItem(s);if(!t)return null;try{return JSON.parse(t)}catch(a){return t}},oi=async(e,s)=>{await e.removeItem(s)};class ci{constructor(){this.promise=new ci.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}function di(e){const s=e.split(".");if(3!==s.length)throw new Wr("Invalid JWT structure");for(let t=0;t<s.length;t++)if(!_r.test(s[t]))throw new Wr("JWT not in base64url format");return{header:JSON.parse(Qr(s[0])),payload:JSON.parse(Qr(s[1])),signature:ei(s[2]),raw:{header:s[0],payload:s[1]}}}function ui(e){return("0"+e.toString(16)).substr(-2)}async function mi(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const s=await async function(e){const s=(new TextEncoder).encode(e),t=await crypto.subtle.digest("SHA-256",s),a=new Uint8Array(t);return Array.from(a).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function hi(e,s){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",s=e.length;let t="";for(let a=0;a<56;a++)t+=e.charAt(Math.floor(Math.random()*s));return t}return crypto.getRandomValues(e),Array.from(e,ui).join("")}();let n=a;t&&(n+="/PASSWORD_RECOVERY"),await ii(e,`${s}-code-verifier`,n);const r=await mi(a);return[r,a===r?"plain":"s256"]}ci.promiseConstructor=Promise;const pi=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const xi=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function fi(e){if(!xi.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var bi=function(e,s){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};const vi=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),gi=[502,503,504];async function ji(e){var s,t;if(!("object"===typeof(t=e)&&null!==t&&"status"in t&&"ok"in t&&"json"in t&&"function"===typeof t.json))throw new Ur(vi(e),0);if(gi.includes(e.status))throw new Ur(vi(e),e.status);let a,n;try{a=await e.json()}catch(Rl){throw new Or(vi(Rl),Rl)}const r=function(e){const s=e.headers.get(Rr);if(!s)return null;if(!s.match(pi))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch(Rl){return null}}(e);if(r&&r.getTime()>=Er.timestamp&&"object"===typeof a&&a&&"string"===typeof a.code?n=a.code:"object"===typeof a&&a&&"string"===typeof a.error_code&&(n=a.error_code),n){if("weak_password"===n)throw new Br(vi(a),e.status,(null===(s=a.weak_password)||void 0===s?void 0:s.reasons)||[]);if("session_not_found"===n)throw new Mr}else if("object"===typeof a&&a&&"object"===typeof a.weak_password&&a.weak_password&&Array.isArray(a.weak_password.reasons)&&a.weak_password.reasons.length&&a.weak_password.reasons.reduce((e,s)=>e&&"string"===typeof s,!0))throw new Br(vi(a),e.status,a.weak_password.reasons);throw new Lr(vi(a),e.status||500,n)}async function yi(e,s,t,a){var n;const r=Object.assign({},null===a||void 0===a?void 0:a.headers);r[Rr]||(r[Rr]=Er.name),(null===a||void 0===a?void 0:a.jwt)&&(r.Authorization=`Bearer ${a.jwt}`);const i=null!==(n=null===a||void 0===a?void 0:a.query)&&void 0!==n?n:{};(null===a||void 0===a?void 0:a.redirectTo)&&(i.redirect_to=a.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",o=await async function(e,s,t,a,n,r){const i=((e,s,t,a)=>{const n={method:e,headers:(null===s||void 0===s?void 0:s.headers)||{}};return"GET"===e?n:(n.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===s||void 0===s?void 0:s.headers),n.body=JSON.stringify(a),Object.assign(Object.assign({},n),t))})(s,a,n,r);let l;try{l=await e(t,Object.assign({},i))}catch(Rl){throw console.error(Rl),new Ur(vi(Rl),0)}l.ok||await ji(l);if(null===a||void 0===a?void 0:a.noResolveJson)return l;try{return await l.json()}catch(Rl){await ji(Rl)}}(e,s,t+l,{headers:r,noResolveJson:null===a||void 0===a?void 0:a.noResolveJson},{},null===a||void 0===a?void 0:a.body);return(null===a||void 0===a?void 0:a.xform)?null===a||void 0===a?void 0:a.xform(o):{data:Object.assign({},o),error:null}}function Ni(e){var s;let t=null;var a;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(t=Object.assign({},e),e.expires_at||(t.expires_at=(a=e.expires_in,Math.round(Date.now()/1e3)+a)));return{data:{session:t,user:null!==(s=e.user)&&void 0!==s?s:e},error:null}}function wi(e){const s=Ni(e);return!s.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,s)=>e&&"string"===typeof s,!0)&&(s.data.weak_password=e.weak_password),s}function ki(e){var s;return{data:{user:null!==(s=e.user)&&void 0!==s?s:e},error:null}}function Si(e){return{data:e,error:null}}function Ci(e){const{action_link:s,email_otp:t,hashed_token:a,redirect_to:n,verification_type:r}=e,i=bi(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:s,email_otp:t,hashed_token:a,redirect_to:n,verification_type:r},user:Object.assign({},i)},error:null}}function Ti(e){return e}const Pi=["global","local","others"];var Ri=function(e,s){var t={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&s.indexOf(a)<0&&(t[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(a=Object.getOwnPropertySymbols(e);n<a.length;n++)s.indexOf(a[n])<0&&Object.prototype.propertyIsEnumerable.call(e,a[n])&&(t[a[n]]=e[a[n]])}return t};class Ei{constructor(e){let{url:s="",headers:t={},fetch:a}=e;this.url=s,this.headers=t,this.fetch=ri(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Pi[0];if(Pi.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Pi.join(", ")}`);try{return await yi(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(Dr(t))return{data:null,error:t};throw t}}async inviteUserByEmail(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await yi(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:ki})}catch(t){if(Dr(t))return{data:{user:null},error:t};throw t}}async generateLink(e){try{const{options:s}=e,t=Ri(e,["options"]),a=Object.assign(Object.assign({},t),s);return"newEmail"in t&&(a.new_email=null===t||void 0===t?void 0:t.newEmail,delete a.newEmail),await yi(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:Ci,redirectTo:null===s||void 0===s?void 0:s.redirectTo})}catch(s){if(Dr(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await yi(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ki})}catch(s){if(Dr(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,t,a,n,r,i,l;try{const o={nextPage:null,lastPage:0,total:0},c=await yi(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(t=null===(s=null===e||void 0===e?void 0:e.page)||void 0===s?void 0:s.toString())&&void 0!==t?t:"",per_page:null!==(n=null===(a=null===e||void 0===e?void 0:e.perPage)||void 0===a?void 0:a.toString())&&void 0!==n?n:""},xform:Ti});if(c.error)throw c.error;const d=await c.json(),u=null!==(r=c.headers.get("x-total-count"))&&void 0!==r?r:0,m=null!==(l=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==l?l:[];return m.length>0&&(m.forEach(e=>{const s=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),t=JSON.parse(e.split(";")[1].split("=")[1]);o[`${t}Page`]=s}),o.total=parseInt(u)),{data:Object.assign(Object.assign({},d),o),error:null}}catch(o){if(Dr(o))return{data:{users:[]},error:o};throw o}}async getUserById(e){fi(e);try{return await yi(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ki})}catch(s){if(Dr(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){fi(e);try{return await yi(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:ki})}catch(t){if(Dr(t))return{data:{user:null},error:t};throw t}}async deleteUser(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fi(e);try{return await yi(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:ki})}catch(t){if(Dr(t))return{data:{user:null},error:t};throw t}}async _listFactors(e){fi(e.userId);try{const{data:s,error:t}=await yi(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:s,error:t}}catch(s){if(Dr(s))return{data:null,error:s};throw s}}async _deleteFactor(e){fi(e.userId),fi(e.id);try{return{data:await yi(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}}}const _i={getItem:e=>ni()?globalThis.localStorage.getItem(e):null,setItem:(e,s)=>{ni()&&globalThis.localStorage.setItem(e,s)},removeItem:e=>{ni()&&globalThis.localStorage.removeItem(e)}};function Ai(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:s=>e[s]||null,setItem:(s,t)=>{e[s]=t},removeItem:s=>{delete e[s]}}}const Di=!!(globalThis&&ni()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class Li extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Oi extends Li{}async function Ii(e,s,t){Di&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,s);const a=new globalThis.AbortController;return s>0&&setTimeout(()=>{a.abort(),Di&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===s?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async a=>{if(!a){if(0===s)throw Di&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Oi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Di)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(Rl){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",Rl)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}Di&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await t()}finally{Di&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(Rl){"undefined"!==typeof self&&(self.globalThis=self)}}();const Mi={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Pr,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Fi(e,s,t){return await t()}class $i{constructor(e){var s,t;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$i.nextInstanceID,$i.nextInstanceID+=1,this.instanceID>0&&ti()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},Mi),e);if(this.logDebugMessages=!!a.debug,"function"===typeof a.debug&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new Ei({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=ri(a.fetch),this.lock=a.lock||Fi,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:ti()&&(null===(s=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===s?void 0:s.locks)?this.lock=Ii:this.lock=Fi,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?a.storage?this.storage=a.storage:ni()?this.storage=_i:(this.memoryStorage={},this.storage=Ai(this.memoryStorage)):(this.memoryStorage={},this.storage=Ai(this.memoryStorage)),ti()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(Rl){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",Rl)}null===(t=this.broadcastChannel)||void 0===t||t.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(){if(this.logDebugMessages){for(var e=arguments.length,s=new Array(e),t=0;t<e;t++)s[t]=arguments[t];this.logger(`GoTrueClient@${this.instanceID} (${Sr}) ${(new Date).toISOString()}`,...s)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const s=function(e){const s={},t=new URL(e);if(t.hash&&"#"===t.hash[0])try{new URLSearchParams(t.hash.substring(1)).forEach((e,t)=>{s[t]=e})}catch(Rl){}return t.searchParams.forEach((e,t)=>{s[t]=e}),s}(window.location.href);let t="none";if(this._isImplicitGrantCallback(s)?t="implicit":await this._isPKCECallback(s)&&(t="pkce"),ti()&&this.detectSessionInUrl&&"none"!==t){const{data:a,error:n}=await this._getSessionFromURL(s,t);if(n){if(this._debug("#_initialize()","error detecting session from URL",n),function(e){return Dr(e)&&"AuthImplicitGrantRedirectError"===e.name}(n)){const s=null===(e=n.details)||void 0===e?void 0:e.code;if("identity_already_exists"===s||"identity_not_found"===s||"single_identity_not_deletable"===s)return{error:n}}return await this._removeSession(),{error:n}}const{session:r,redirectType:i}=a;return this._debug("#_initialize()","detected session in URL",r,"redirect type",i),await this._saveSession(r),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",r):await this._notifyAllSubscribers("SIGNED_IN",r)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return Dr(s)?{error:s}:{error:new Or("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,t,a;try{const n=await yi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(t=null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken}},xform:Ni}),{data:r,error:i}=n;if(i||!r)return{data:{user:null,session:null},error:i};const l=r.session,o=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(n){if(Dr(n))return{data:{user:null,session:null},error:n};throw n}}async signUp(e){var s,t,a;try{let n;if("email"in e){const{email:t,password:a,options:r}=e;let i=null,l=null;"pkce"===this.flowType&&([i,l]=await hi(this.storage,this.storageKey)),n=await yi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo,body:{email:t,password:a,data:null!==(s=null===r||void 0===r?void 0:r.data)&&void 0!==s?s:{},gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:l},xform:Ni})}else{if(!("phone"in e))throw new $r("You must provide either an email or phone number and a password");{const{phone:s,password:r,options:i}=e;n=await yi(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:s,password:r,data:null!==(t=null===i||void 0===i?void 0:i.data)&&void 0!==t?t:{},channel:null!==(a=null===i||void 0===i?void 0:i.channel)&&void 0!==a?a:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:Ni})}}const{data:r,error:i}=n;if(i||!r)return{data:{user:null,session:null},error:i};const l=r.session,o=r.user;return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(n){if(Dr(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithPassword(e){try{let s;if("email"in e){const{email:t,password:a,options:n}=e;s=await yi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:t,password:a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:wi})}else{if(!("phone"in e))throw new $r("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:n}=e;s=await yi(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:t,password:a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:wi})}}const{data:t,error:a}=s;return a?{data:{user:null,session:null},error:a}:t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({user:t.user,session:t.session},t.weak_password?{weakPassword:t.weak_password}:null),error:a}):{data:{user:null,session:null},error:new Fr}}catch(s){if(Dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,t,a,n;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(s=e.options)||void 0===s?void 0:s.redirectTo,scopes:null===(t=e.options)||void 0===t?void 0:t.scopes,queryParams:null===(a=e.options)||void 0===a?void 0:a.queryParams,skipBrowserRedirect:null===(n=e.options)||void 0===n?void 0:n.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if("solana"===s)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,t,a,n,r,i,l,o,c,d,u,m;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:u,wallet:m,statement:x,options:f}=e;let b;if(ti())if("object"===typeof m)b=m;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");b=e.solana}else{if("object"!==typeof m||!(null===f||void 0===f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=m}const v=new URL(null!==(s=null===f||void 0===f?void 0:f.url)&&void 0!==s?s:window.location.href);if("signIn"in b&&b.signIn){const e=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===f||void 0===f?void 0:f.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),x?{statement:x}:null));let s;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])s=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");s=e}if(!("signedMessage"in s&&"signature"in s&&("string"===typeof s.signedMessage||s.signedMessage instanceof Uint8Array)&&s.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");h="string"===typeof s.signedMessage?s.signedMessage:(new TextDecoder).decode(s.signedMessage),p=s.signature}else{if(!("signMessage"in b)||"function"!==typeof b.signMessage||!("publicKey"in b)||"object"!==typeof b||!b.publicKey||!("toBase58"in b.publicKey)||"function"!==typeof b.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");h=[`${v.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...x?["",x,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(a=null===(t=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===t?void 0:t.issuedAt)&&void 0!==a?a:(new Date).toISOString()}`,...(null===(n=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===n?void 0:n.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(r=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===r?void 0:r.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(i=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(l=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===l?void 0:l.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(o=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===o?void 0:o.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null===f||void 0===f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await b.signMessage((new TextEncoder).encode(h),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");p=e}}try{const{data:s,error:t}=await yi(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:h,signature:si(p)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(m=e.options)||void 0===m?void 0:m.captchaToken}}:null),xform:Ni});if(t)throw t;return s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign({},s),error:t}):{data:{user:null,session:null},error:new Fr}}catch(x){if(Dr(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const s=await li(this.storage,`${this.storageKey}-code-verifier`),[t,a]=(null!==s&&void 0!==s?s:"").split("/");try{const{data:s,error:n}=await yi(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:t},xform:Ni});if(await oi(this.storage,`${this.storageKey}-code-verifier`),n)throw n;return s&&s.session&&s.user?(s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:Object.assign(Object.assign({},s),{redirectType:null!==a&&void 0!==a?a:null}),error:n}):{data:{user:null,session:null,redirectType:null},error:new Fr}}catch(n){if(Dr(n))return{data:{user:null,session:null,redirectType:null},error:n};throw n}}async signInWithIdToken(e){try{const{options:s,provider:t,token:a,access_token:n,nonce:r}=e,i=await yi(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:t,id_token:a,access_token:n,nonce:r,gotrue_meta_security:{captcha_token:null===s||void 0===s?void 0:s.captchaToken}},xform:Ni}),{data:l,error:o}=i;return o?{data:{user:null,session:null},error:o}:l&&l.session&&l.user?(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:o}):{data:{user:null,session:null},error:new Fr}}catch(s){if(Dr(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,t,a,n,r;try{if("email"in e){const{email:a,options:n}=e;let r=null,i=null;"pkce"===this.flowType&&([r,i]=await hi(this.storage,this.storageKey));const{error:l}=await yi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(t=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===t||t,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},code_challenge:r,code_challenge_method:i},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:l}}if("phone"in e){const{phone:s,options:t}=e,{data:i,error:l}=await yi(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:s,data:null!==(a=null===t||void 0===t?void 0:t.data)&&void 0!==a?a:{},create_user:null===(n=null===t||void 0===t?void 0:t.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken},channel:null!==(r=null===t||void 0===t?void 0:t.channel)&&void 0!==r?r:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:l}}throw new $r("You must provide either an email or phone number.")}catch(i){if(Dr(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var s,t;try{let a,n;"options"in e&&(a=null===(s=e.options)||void 0===s?void 0:s.redirectTo,n=null===(t=e.options)||void 0===t?void 0:t.captchaToken);const{data:r,error:i}=await yi(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:n}}),redirectTo:a,xform:Ni});if(i)throw i;if(!r)throw new Error("An error occurred on token verification.");const l=r.session,o=r.user;return(null===l||void 0===l?void 0:l.access_token)&&(await this._saveSession(l),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:o,session:l},error:null}}catch(a){if(Dr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(e){var s,t,a;try{let n=null,r=null;return"pkce"===this.flowType&&([n,r]=await hi(this.storage,this.storageKey)),await yi(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(t=null===(s=e.options)||void 0===s?void 0:s.redirectTo)&&void 0!==t?t:void 0}),(null===(a=null===e||void 0===e?void 0:e.options)||void 0===a?void 0:a.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:n,code_challenge_method:r}),headers:this.headers,xform:Si})}catch(n){if(Dr(n))return{data:null,error:n};throw n}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:t}=e;if(t)throw t;if(!s)throw new Mr;const{error:a}=await yi(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:a}})}catch(e){if(Dr(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:t,type:a,options:n}=e,{error:r}=await yi(this.fetch,"POST",s,{headers:this.headers,body:{email:t,type:a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},redirectTo:null===n||void 0===n?void 0:n.emailRedirectTo});return{data:{user:null,session:null},error:r}}if("phone"in e){const{phone:t,type:a,options:n}=e,{data:r,error:i}=await yi(this.fetch,"POST",s,{headers:this.headers,body:{phone:t,type:a,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}}});return{data:{user:null,session:null,messageId:null===r||void 0===r?void 0:r.message_id},error:i}}throw new $r("You must provide either an email or phone number and a type")}catch(s){if(Dr(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),t=(async()=>(await e,await s()))();return this.pendingInLock.push((async()=>{try{await t}catch(Rl){}})()),t}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=s();for(this.pendingInLock.push((async()=>{try{await e}catch(Rl){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const s=await li(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),null!==s&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const t=!!e.expires_at&&1e3*e.expires_at-Date.now()<Tr;if(this._debug("#__loadSession()",`session has${t?"":" not"} expired`,"expires_at",e.expires_at),!t){if(this.storage.isServer){let s=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,t,a)=>(s||"user"!==t||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),s=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,t,a))})}return{data:{session:e},error:null}}const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{session:null},error:n}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await yi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ki}):await this._useSession(async e=>{var s,t,a;const{data:n,error:r}=e;if(r)throw r;return(null===(s=n.session)||void 0===s?void 0:s.access_token)||this.hasCustomAuthorizationHeader?await yi(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(a=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==a?a:void 0,xform:ki}):{data:{user:null},error:new Mr}})}catch(s){if(Dr(s))return function(e){return Dr(e)&&"AuthSessionMissingError"===e.name}(s)&&(await this._removeSession(),await oi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async t=>{const{data:a,error:n}=t;if(n)throw n;if(!a.session)throw new Mr;const r=a.session;let i=null,l=null;"pkce"===this.flowType&&null!=e.email&&([i,l]=await hi(this.storage,this.storageKey));const{data:o,error:c}=await yi(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null===s||void 0===s?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:l}),jwt:r.access_token,xform:ki});if(c)throw c;return r.user=o.user,await this._saveSession(r),await this._notifyAllSubscribers("USER_UPDATED",r),{data:{user:r.user},error:null}})}catch(t){if(Dr(t))return{data:{user:null},error:t};throw t}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Mr;const s=Date.now()/1e3;let t=s,a=!0,n=null;const{payload:r}=di(e.access_token);if(r.exp&&(t=r.exp,a=t<=s),a){const{session:s,error:t}=await this._callRefreshToken(e.refresh_token);if(t)return{data:{user:null,session:null},error:t};if(!s)return{data:{user:null,session:null},error:null};n=s}else{const{data:a,error:r}=await this._getUser(e.access_token);if(r)throw r;n={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:t-s,expires_at:t},await this._saveSession(n),await this._notifyAllSubscribers("SIGNED_IN",n)}return{data:{user:n.user,session:n},error:null}}catch(s){if(Dr(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var t;if(!e){const{data:a,error:n}=s;if(n)throw n;e=null!==(t=a.session)&&void 0!==t?t:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Mr;const{session:a,error:n}=await this._callRefreshToken(e.refresh_token);return n?{data:{user:null,session:null},error:n}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(Dr(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!ti())throw new zr("No browser detected.");if(e.error||e.error_description||e.error_code)throw new zr(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if("pkce"===this.flowType)throw new Hr("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new zr("Not a valid implicit grant flow url.")}if("pkce"===s){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Hr("No code detected.");const{data:s,error:t}=await this._exchangeCodeForSession(e.code);if(t)throw t;const a=new URL(window.location.href);return a.searchParams.delete("code"),window.history.replaceState(window.history.state,"",a.toString()),{data:{session:s.session,redirectType:null},error:null}}const{provider_token:t,provider_refresh_token:a,access_token:n,refresh_token:r,expires_in:i,expires_at:l,token_type:o}=e;if(!n||!i||!r||!o)throw new zr("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;l&&(u=parseInt(l));const m=u-c;1e3*m<=Cr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${d}s`);const h=u-d;c-h>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",h,u,c):c-h<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",h,u,c);const{data:p,error:x}=await this._getUser(n);if(x)throw x;const f={provider_token:t,provider_refresh_token:a,access_token:n,expires_in:d,expires_at:u,refresh_token:r,token_type:o,user:p.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(t){if(Dr(t))return{data:{session:null,redirectType:null},error:t};throw t}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await li(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!s)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async s=>{var t;const{data:a,error:n}=s;if(n)return{error:n};const r=null===(t=a.session)||void 0===t?void 0:t.access_token;if(r){const{error:s}=await this.admin.signOut(r,e);if(s&&(!function(e){return Dr(e)&&"AuthApiError"===e.name}(s)||404!==s.status&&401!==s.status&&403!==s.status))return{error:s}}return"others"!==e&&(await this._removeSession(),await oi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const s=16*Math.random()|0;return("x"==e?s:3&s|8).toString(16)}),t={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,t),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})})(),{data:{subscription:t}}}async _emitInitialSession(e){return await this._useSession(async s=>{var t,a;try{const{data:{session:a},error:n}=s;if(n)throw n;await(null===(t=this.stateChangeEmitters.get(e))||void 0===t?void 0:t.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(n){await(null===(a=this.stateChangeEmitters.get(e))||void 0===a?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",n),console.error(n)}})}async resetPasswordForEmail(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=null,a=null;"pkce"===this.flowType&&([t,a]=await hi(this.storage,this.storageKey,!0));try{return await yi(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:t,code_challenge_method:a,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(n){if(Dr(n))return{data:null,error:n};throw n}}async getUserIdentities(){var e;try{const{data:s,error:t}=await this.getUser();if(t)throw t;return{data:{identities:null!==(e=s.user.identities)&&void 0!==e?e:[]},error:null}}catch(s){if(Dr(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:t,error:a}=await this._useSession(async s=>{var t,a,n,r,i;const{data:l,error:o}=s;if(o)throw o;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(a=e.options)||void 0===a?void 0:a.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:!0});return await yi(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(r=l.session)||void 0===r?void 0:r.access_token)&&void 0!==i?i:void 0})});if(a)throw a;return ti()&&!(null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect)&&window.location.assign(null===t||void 0===t?void 0:t.url),{data:{provider:e.provider,url:null===t||void 0===t?void 0:t.url},error:null}}catch(t){if(Dr(t))return{data:{provider:e.provider,url:null},error:t};throw t}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var t,a;const{data:n,error:r}=s;if(r)throw r;return await yi(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(a=null===(t=n.session)||void 0===t?void 0:t.access_token)&&void 0!==a?a:void 0})})}catch(s){if(Dr(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await(t=async t=>(t>0&&await async function(e){return await new Promise(s=>{setTimeout(()=>s(null),e)})}(200*Math.pow(2,t-1)),this._debug(s,"refreshing attempt",t),await yi(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ni})),a=(e,s)=>{const t=200*Math.pow(2,e);return s&&qr(s)&&Date.now()+t-n<Cr},new Promise((e,s)=>{(async()=>{for(let n=0;n<1/0;n++)try{const s=await t(n);if(!a(n,null,s))return void e(s)}catch(Rl){if(!a(n,Rl))return void s(Rl)}})()}))}catch(n){if(this._debug(s,"error",n),Dr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}var t,a}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const t=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",t),ti()&&!s.skipBrowserRedirect&&window.location.assign(t),{data:{provider:e,url:t},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const t=await li(this.storage,this.storageKey);if(this._debug(s,"session from storage",t),!this._isValidSession(t))return this._debug(s,"session is not valid"),void(null!==t&&await this._removeSession());const a=1e3*(null!==(e=t.expires_at)&&void 0!==e?e:1/0)-Date.now()<Tr;if(this._debug(s,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&t.refresh_token){const{error:e}=await this._callRefreshToken(t.refresh_token);e&&(console.error(e),qr(e)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){return this._debug(s,"error",t),void console.error(t)}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,t;if(!e)throw new Mr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ci;const{data:s,error:t}=await this._refreshAccessToken(e);if(t)throw t;if(!s.session)throw new Mr;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);const a={session:s.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(n){if(this._debug(a,"error",n),Dr(n)){const e={session:null,error:n};return qr(n)||await this._removeSession(),null===(s=this.refreshingDeferred)||void 0===s||s.resolve(e),e}throw null===(t=this.refreshingDeferred)||void 0===t||t.reject(n),n}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(e,s){let t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",s,`broadcast = ${t}`);try{this.broadcastChannel&&t&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],n=Array.from(this.stateChangeEmitters.values()).map(async t=>{try{await t.callback(e,s)}catch(Rl){a.push(Rl)}});if(await Promise.all(n),a.length>0){for(let e=0;e<a.length;e+=1)console.error(a[e]);throw a[0]}}finally{this._debug(a,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await ii(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await oi(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ti()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(Rl){console.error("removing visibilitychange callback failed",Rl)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Cr);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:t}}=s;if(!t||!t.refresh_token||!t.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const a=Math.floor((1e3*t.expires_at-e)/Cr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),a<=3&&await this._callRefreshToken(t.refresh_token)})}catch(Rl){console.error("Auto refresh tick failed with error. This is likely a transient error.",Rl)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(Rl){if(!(Rl.isAcquireTimeout||Rl instanceof Li))throw Rl;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ti()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,t){const a=[`provider=${encodeURIComponent(s)}`];if((null===t||void 0===t?void 0:t.redirectTo)&&a.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),(null===t||void 0===t?void 0:t.scopes)&&a.push(`scopes=${encodeURIComponent(t.scopes)}`),"pkce"===this.flowType){const[e,s]=await hi(this.storage,this.storageKey),t=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(t.toString())}if(null===t||void 0===t?void 0:t.queryParams){const e=new URLSearchParams(t.queryParams);a.push(e.toString())}return(null===t||void 0===t?void 0:t.skipBrowserRedirect)&&a.push(`skip_http_redirect=${t.skipBrowserRedirect}`),`${e}?${a.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var t;const{data:a,error:n}=s;return n?{data:null,error:n}:await yi(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(t=null===a||void 0===a?void 0:a.session)||void 0===t?void 0:t.access_token})})}catch(s){if(Dr(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var t,a;const{data:n,error:r}=s;if(r)return{data:null,error:r};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:l,error:o}=await yi(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(t=null===n||void 0===n?void 0:n.session)||void 0===t?void 0:t.access_token});return o?{data:null,error:o}:("totp"===e.factorType&&(null===(a=null===l||void 0===l?void 0:l.totp)||void 0===a?void 0:a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(s){if(Dr(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var t;const{data:a,error:n}=s;if(n)return{data:null,error:n};const{data:r,error:i}=await yi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(t=null===a||void 0===a?void 0:a.session)||void 0===t?void 0:t.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+r.expires_in},r)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",r),{data:r,error:i})})}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var t;const{data:a,error:n}=s;return n?{data:null,error:n}:await yi(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(t=null===a||void 0===a?void 0:a.session)||void 0===t?void 0:t.access_token})})}catch(s){if(Dr(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:t}=await this._challenge({factorId:e.factorId});return t?{data:null,error:t}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const t=(null===e||void 0===e?void 0:e.factors)||[],a=t.filter(e=>"totp"===e.factor_type&&"verified"===e.status),n=t.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:t,totp:a,phone:n},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,t;const{data:{session:a},error:n}=e;if(n)return{data:null,error:n};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:r}=di(a.access_token);let i=null;r.aal&&(i=r.aal);let l=i;(null!==(t=null===(s=a.user.factors)||void 0===s?void 0:s.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(l="aal2");return{data:{currentLevel:i,nextLevel:l,currentAuthenticationMethods:r.amr||[]},error:null}}))}async fetchJwk(e){let s=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(s=>s.kid===e);if(s)return s;if(s=this.jwks.keys.find(s=>s.kid===e),s&&this.jwks_cached_at+6e5>Date.now())return s;const{data:t,error:a}=await yi(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!t.keys||0===t.keys.length)throw new Wr("JWKS is empty");if(this.jwks=t,this.jwks_cached_at=Date.now(),s=t.keys.find(s=>s.kid===e),!s)throw new Wr("No matching signing key found in JWKS");return s}async getClaims(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]};try{let t=e;if(!t){const{data:e,error:s}=await this.getSession();if(s||!e.session)return{data:null,error:s};t=e.session.access_token}const{header:a,payload:n,signature:r,raw:{header:i,payload:l}}=di(t);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(n.exp),!a.kid||"HS256"===a.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(t);if(e)throw e;return{data:{claims:n,header:a,signature:r},error:null}}const o=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(a.alg),c=await this.fetchJwk(a.kid,s),d=await crypto.subtle.importKey("jwk",c,o,!0,["verify"]);if(!await crypto.subtle.verify(o,d,r,function(e){const s=[];return Zr(e,e=>s.push(e)),new Uint8Array(s)}(`${i}.${l}`)))throw new Wr("Invalid JWT signature");return{data:{claims:n,header:a,signature:r},error:null}}catch(t){if(Dr(t))return{data:null,error:t};throw t}}}$i.nextInstanceID=0;const zi=$i;class Hi extends zi{constructor(e){super(e)}}var Ui=function(e,s,t,a){return new(t||(t=Promise))(function(n,r){function i(e){try{o(a.next(e))}catch(Rl){r(Rl)}}function l(e){try{o(a.throw(e))}catch(Rl){r(Rl)}}function o(e){var s;e.done?n(e.value):(s=e.value,s instanceof t?s:new t(function(e){e(s)})).then(i,l)}o((a=a.apply(e,s||[])).next())})};class qi{constructor(e,s,t){var a,n,r;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const i=(l=e).endsWith("/")?l:l+"/";var l;const o=new URL(i);this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);const c=`sb-${o.hostname.split(".")[0]}-auth-token`,d=function(e,s){var t,a;const{db:n,auth:r,realtime:i,global:l}=e,{db:o,auth:c,realtime:d,global:u}=s,m={db:Object.assign(Object.assign({},o),n),auth:Object.assign(Object.assign({},c),r),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},u),l),{headers:Object.assign(Object.assign({},null!==(t=null===u||void 0===u?void 0:u.headers)&&void 0!==t?t:{}),null!==(a=null===l||void 0===l?void 0:l.headers)&&void 0!==a?a:{})}),accessToken:()=>kr(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}(null!==t&&void 0!==t?t:{},{db:br,realtime:gr,auth:Object.assign(Object.assign({},vr),{storageKey:c}),global:fr});this.storageKey=null!==(a=d.auth.storageKey)&&void 0!==a?a:"",this.headers=null!==(n=d.global.headers)&&void 0!==n?n:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,s)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(s)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(r=d.auth)&&void 0!==r?r:{},this.headers,d.global.fetch),this.fetch=wr(s,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new hn(new URL("rest/v1",o).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new un(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new pr(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,s,t)}channel(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Ui(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:t}=yield this.auth.getSession();return null!==(s=null===(e=t.session)||void 0===e?void 0:e.access_token)&&void 0!==s?s:null})}_initSupabaseAuthClient(e,s,t){let{autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:i,storageKey:l,flowType:o,lock:c,debug:d}=e;const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Hi({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),s),storageKey:l,autoRefreshToken:a,persistSession:n,detectSessionInUrl:r,storage:i,flowType:o,lock:c,debug:d,fetch:t,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Vn(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,s)=>{this._handleTokenChanged(e,"CLIENT",null===s||void 0===s?void 0:s.access_token)})}_handleTokenChanged(e,s,t){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==s&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=t}}((e,s,t)=>{new qi(e,s,t)})("https://etvdufporvnfpgdzpcrr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImV0dmR1ZnBvcnZuZnBnZHpwY3JyIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc1MjEzODI0MSwiZXhwIjoyMDY3NzE0MjQxfQ.ij-v-aNRdKuAOfReghfw_usAwlG8PFXdthre0_a8278");const Bi=()=>{var e,s;const{user:t}=Ya(),a=se(),[n,i]=(0,r.useState)("personal"),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[u,m]=(0,r.useState)(1),[h,p]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:"",otp:""}),[x,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[]),(0,r.useEffect)(()=>{const e=()=>{y()};return window.addEventListener("profileUpdated",e),()=>{window.removeEventListener("profileUpdated",e)}},[]);const y=async()=>{try{const e=await Ma.get("/auth/profile");o(e.data.user)}catch(e){console.error("Error fetching profile:",e)}finally{d(!1)}},N=[{id:"personal",label:"Personal Info",icon:"bi-person"},{id:"work",label:"Work Info",icon:"bi-briefcase"},{id:"documents",label:"Documents",icon:"bi-file-text"},{id:"emergency",label:"Emergency Contact",icon:"bi-person-exclamation"},{id:"bank",label:"Bank & Salary",icon:"bi-bank"},{id:"leave",label:"Leave Summary",icon:"bi-calendar-check"},{id:"attendance",label:"Attendance",icon:"bi-clock"},{id:"payslips",label:"Payslips",icon:"bi-receipt"},{id:"performance",label:"Performance",icon:"bi-graph-up"},{id:"settings",label:"Settings",icon:"bi-gear"},{id:"trainings",label:"Trainings",icon:"bi-book"},{id:"notifications",label:"Notifications",icon:"bi-bell"},{id:"security",label:"Security",icon:"bi-shield-lock"}],w=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not provided";return(0,r.useEffect)(()=>{window.profileSectionChange=e=>{i(e)};const e=window.location.hash.replace("#","");return e&&N.find(s=>s.id===e)&&i(e),()=>{delete window.profileSectionChange}},[]),(0,r.useEffect)(()=>{window.profileActiveTabChange&&window.profileActiveTabChange(n)},[n]),(0,Fa.jsxs)("div",{className:"container-fluid py-4",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h2",{className:"mb-1",children:"My Profile"}),(0,Fa.jsxs)("p",{className:"text-muted mb-0",children:["Welcome back, ",null===t||void 0===t?void 0:t.firstName,"! Manage your profile information."]})]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>a("/profile/edit"),children:[(0,Fa.jsx)("i",{className:"bi bi-pencil-square me-2"}),"Edit Profile"]})})]})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:`${null===(e=N.find(e=>e.id===n))||void 0===e?void 0:e.icon} me-2`}),null===(s=N.find(e=>e.id===n))||void 0===s?void 0:s.label]})}),(0,Fa.jsx)("div",{className:"card-body",children:(()=>{var e,s,t,a,r,i,o,d,x,g,y,N,k,S,C,T,P;if(c)return(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});if(!l)return(0,Fa.jsx)("div",{className:"alert alert-warning",children:"Unable to load profile data"});switch(n){case"personal":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-4 d-flex justify-content-center align-items-start mb-4",style:{paddingTop:"10px"},children:(0,Fa.jsx)("div",{className:"profile-photo-container",children:(0,Fa.jsx)("div",{className:"rounded-circle mb-3 d-flex align-items-center justify-content-center bg-light border",style:{width:"150px",height:"150px"},children:l.profilePhoto?(0,Fa.jsx)("img",{src:l.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"150px",height:"150px",objectFit:"cover"}}):(0,Fa.jsx)("i",{className:"bi bi-person-circle text-muted",style:{fontSize:"80px"}})})})}),(0,Fa.jsx)("div",{className:"col-md-8",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Full Name"}),(0,Fa.jsxs)("p",{className:"form-control-plaintext",children:[l.firstName," ",l.lastName]})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Date of Birth"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:w(l.dateOfBirth)})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Gender"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.gender||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Phone Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.phoneNumber||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Email"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.email})]}),(0,Fa.jsxs)("div",{className:"col-12 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Address"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.address?`${l.address.street||""}, ${l.address.city||""}, ${l.address.state||""} ${l.address.zipCode||""}, ${l.address.country||""}`.replace(/^,\s*|,\s*$/g,""):"Not provided"})]})]})})]});case"work":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Employee ID"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.employeeId})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Department"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.department})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Team Name"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.teamName||"Not assigned"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Role/Designation"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:l.role})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Reporting Manager"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(e=l.reportingManager)||void 0===e?void 0:e.firstName)||"Not assigned"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Joining Date"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:w(l.joiningDate)})]})]});case"documents":const n=[{key:"idProof",name:"ID Proof (Aadhar Card)",icon:"bi-person-badge",required:!0},{key:"offerLetter",name:"Offer Letter",icon:"bi-briefcase",required:!0},{key:"educationalCertificates",name:"Educational Certificates",icon:"bi-mortarboard",required:!0},{key:"experienceLetters",name:"Experience Letters",icon:"bi-briefcase",required:!1},{key:"passport",name:"Passport",icon:"bi-person-badge",required:!1}],c=e=>{if(!e)return"N/A";if(0===e)return"0 Byte";const s=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]},R=async e=>{if(e.fileUrl||e.fileName)try{let s=e.fileUrl;!s&&e.fileName&&(s=`https://etvdufporvnfpgdzpcrr.supabase.co/storage/v1/object/public/documents/${e.fileName}`);const t=await fetch(s);if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const a=await t.blob(),n=window.URL.createObjectURL(a),r=document.createElement("a");r.href=n,r.download=e.originalName||e.fileName||"document",r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n),console.log("Download initiated for:",e.originalName||e.fileName)}catch(s){console.error("Download failed:",s),alert("Unable to download file. Please contact support.")}else alert("Document not available for download")};return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-file-text me-2"}),"Personal Documents"]}),(0,Fa.jsx)("p",{children:"View and download your personal documents"})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("h6",{className:"mb-3",children:"Required Documents"}),(0,Fa.jsx)("div",{className:"list-group",children:n.filter(e=>e.required).map(e=>{var s;const t=null===(s=l.documents)||void 0===s?void 0:s[e.key];return(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Fa.jsx)("i",{className:`${e.icon} text-primary me-2`}),(0,Fa.jsx)("h6",{className:"mb-0",children:e.name}),(0,Fa.jsx)("span",{className:"badge bg-danger ms-2",children:"Required"}),t&&t.fileName?(0,Fa.jsx)("span",{className:"badge bg-success ms-2",children:"Uploaded"}):(0,Fa.jsx)("span",{className:"badge bg-warning ms-2",children:"Pending"})]}),t&&t.fileName?(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("strong",{children:"File:"})," ",t.originalName||t.fileName,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Uploaded:"})," ",w(t.uploadedAt),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Size:"})," ",c(t.fileSize)]})}):(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsx)("small",{className:"text-muted",children:"No document uploaded yet"})})]}),(0,Fa.jsx)("div",{className:"ms-3",children:t&&t.fileName?(0,Fa.jsxs)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>R(t),title:"Download",children:[(0,Fa.jsx)("i",{className:"bi bi-download me-1"}),"Download"]}):(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",disabled:!0,title:"No document available",children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-x me-1"}),"Not Available"]})})]})},e.key)})})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsx)("h6",{className:"mb-3",children:"Optional Documents"}),(0,Fa.jsx)("div",{className:"list-group",children:n.filter(e=>!e.required).map(e=>{var s;const t=null===(s=l.documents)||void 0===s?void 0:s[e.key];return(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Fa.jsx)("i",{className:`${e.icon} text-secondary me-2`}),(0,Fa.jsx)("h6",{className:"mb-0",children:e.name}),(0,Fa.jsx)("span",{className:"badge bg-secondary ms-2",children:"Optional"}),t&&t.fileName?(0,Fa.jsx)("span",{className:"badge bg-success ms-2",children:"Uploaded"}):(0,Fa.jsx)("span",{className:"badge bg-light text-dark ms-2",children:"Not Uploaded"})]}),t&&t.fileName?(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("strong",{children:"File:"})," ",t.originalName||t.fileName,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Uploaded:"})," ",w(t.uploadedAt),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Size:"})," ",c(t.fileSize)]})}):(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsx)("small",{className:"text-muted",children:"No document uploaded"})})]}),(0,Fa.jsx)("div",{className:"ms-3",children:t&&t.fileName?(0,Fa.jsxs)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>R(t),title:"Download",children:[(0,Fa.jsx)("i",{className:"bi bi-download me-1"}),"Download"]}):(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary btn-sm",disabled:!0,title:"No document available",children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-x me-1"}),"Not Available"]})})]})},e.key)})})]}),(0,Fa.jsx)("div",{className:"card bg-light",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle text-primary me-2"}),"Document Summary"]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("p",{className:"mb-1",children:[(0,Fa.jsx)("strong",{children:"Required Documents:"})," ",n.filter(e=>{var s,t;return e.required&&(null===(s=l.documents)||void 0===s||null===(t=s[e.key])||void 0===t?void 0:t.fileName)}).length," / ",n.filter(e=>e.required).length," uploaded"]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Optional Documents:"})," ",n.filter(e=>{var s,t;return!e.required&&(null===(s=l.documents)||void 0===s||null===(t=s[e.key])||void 0===t?void 0:t.fileName)}).length," / ",n.filter(e=>!e.required).length," uploaded"]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("p",{className:"mb-1",children:[(0,Fa.jsx)("strong",{children:"Total Documents:"})," ",n.filter(e=>{var s,t;return null===(s=l.documents)||void 0===s||null===(t=s[e.key])||void 0===t?void 0:t.fileName}).length," / ",n.length]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Profile Completion:"})," ",Math.round(n.filter(e=>{var s,t;return null===(s=l.documents)||void 0===s||null===(t=s[e.key])||void 0===t?void 0:t.fileName}).length/n.length*100),"%"]})]})]})]})})]})});case"emergency":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Contact Name"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(s=l.emergencyContact)||void 0===s?void 0:s.name)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Relationship"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(t=l.emergencyContact)||void 0===t?void 0:t.relationship)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Phone Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(a=l.emergencyContact)||void 0===a?void 0:a.phone)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-12 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Address"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(r=l.emergencyContact)||void 0===r?void 0:r.address)||"Not provided"})]})]});case"bank":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-12 mb-3",children:(0,Fa.jsx)("div",{className:"alert alert-warning",children:(0,Fa.jsxs)("small",{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-lock me-2"}),"Sensitive information is masked for security"]})})}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Account Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(P=null===(i=l.bankDetails)||void 0===i?void 0:i.accountNumber,P?"*".repeat(P.length-4)+P.slice(-4):"Not provided")})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Bank Name"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(o=l.bankDetails)||void 0===o?void 0:o.bankName)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"IFSC Code"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(d=l.bankDetails)||void 0===d?void 0:d.ifscCode)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"PF Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(x=l.bankDetails)||void 0===x?void 0:x.pfNumber)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"ESI Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(g=l.bankDetails)||void 0===g?void 0:g.esiNumber)||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"PAN Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(y=l.bankDetails)||void 0===y?void 0:y.panNumber)||"Not provided"})]})]});case"leave":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-12 mb-4",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up me-2"}),"Current Leave Balance"]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-2 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-primary",children:(null===(N=l.leaveBalance)||void 0===N?void 0:N.casual)||0}),(0,Fa.jsx)("p",{className:"card-text small",children:"Casual Leave"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-success",children:(null===(k=l.leaveBalance)||void 0===k?void 0:k.sick)||0}),(0,Fa.jsx)("p",{className:"card-text small",children:"Sick Leave"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-info",children:(null===(S=l.leaveBalance)||void 0===S?void 0:S.earned)||0}),(0,Fa.jsx)("p",{className:"card-text small",children:"Earned Leave"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-warning",children:(null===(C=l.leaveBalance)||void 0===C?void 0:C.maternity)||0}),(0,Fa.jsx)("p",{className:"card-text small",children:"Maternity"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-secondary",children:(null===(T=l.leaveBalance)||void 0===T?void 0:T.paternity)||0}),(0,Fa.jsx)("p",{className:"card-text small",children:"Paternity"})]})})})]})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-event me-2"}),"Upcoming Leave Dates"]}),(0,Fa.jsx)("div",{className:"alert alert-light",children:(0,Fa.jsx)("p",{className:"mb-0",children:"No upcoming leaves scheduled"})})]})]});case"attendance":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-12 mb-4",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up me-2"}),"Monthly Attendance Overview"]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-success",children:"22"}),(0,Fa.jsx)("p",{className:"card-text small",children:"Present Days"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-danger",children:"2"}),(0,Fa.jsx)("p",{className:"card-text small",children:"Absent Days"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-warning",children:"1"}),(0,Fa.jsx)("p",{className:"card-text small",children:"Late Arrivals"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3 col-6 mb-3",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"card-title text-info",children:"176"}),(0,Fa.jsx)("p",{className:"card-text small",children:"Total Hours"})]})})})]})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Recent Punch Records"]}),(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-sm",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Punch In"}),(0,Fa.jsx)("th",{children:"Punch Out"}),(0,Fa.jsx)("th",{children:"Total Hours"})]})}),(0,Fa.jsxs)("tbody",{children:[(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:"Today"}),(0,Fa.jsx)("td",{children:"09:15 AM"}),(0,Fa.jsx)("td",{children:"-"}),(0,Fa.jsx)("td",{children:"-"})]}),(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:"Yesterday"}),(0,Fa.jsx)("td",{children:"09:00 AM"}),(0,Fa.jsx)("td",{children:"06:30 PM"}),(0,Fa.jsx)("td",{children:"9h 30m"})]})]})]})})]})]});case"payslips":return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-receipt me-2"}),"Monthly Payslips"]}),(0,Fa.jsxs)("div",{className:"list-group",children:[(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"December 2024"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Generated on: Jan 1, 2025"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"Download PDF"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"November 2024"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Generated on: Dec 1, 2024"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"Download PDF"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"October 2024"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Generated on: Nov 1, 2024"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"Download PDF"})]})]})]})});case"performance":return(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-12 mb-4",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-target me-2"}),"Current Goals & KPIs"]}),l.currentGoals&&l.currentGoals.length>0?(0,Fa.jsx)("div",{className:"list-group",children:l.currentGoals.map((e,s)=>(0,Fa.jsxs)("div",{className:"list-group-item",children:[(0,Fa.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,Fa.jsx)("h6",{className:"mb-1",children:e.title}),(0,Fa.jsx)("span",{className:"badge "+("Completed"===e.status?"bg-success":"In Progress"===e.status?"bg-warning":"bg-secondary"),children:e.status})]}),(0,Fa.jsx)("p",{className:"mb-1",children:e.description}),(0,Fa.jsxs)("small",{children:["Target Date: ",w(e.targetDate)]})]},s))}):(0,Fa.jsx)("div",{className:"alert alert-light",children:"No current goals assigned"})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up-arrow me-2"}),"Last Appraisal"]}),l.lastAppraisal?(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:["Rating: ",l.lastAppraisal.rating]}),(0,Fa.jsx)("p",{className:"card-text",children:l.lastAppraisal.feedback}),(0,Fa.jsxs)("small",{className:"text-muted",children:["Date: ",w(l.lastAppraisal.date)]})]})}):(0,Fa.jsx)("div",{className:"alert alert-light",children:"No appraisal data available"})]})]});case"trainings":return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-book me-2"}),"Training Programs"]}),(0,Fa.jsxs)("div",{className:"list-group",children:[(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"React Advanced Concepts"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Assigned on: Dec 15, 2024"})]}),(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Progress"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Leadership Skills"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Completed on: Nov 20, 2024"})]}),(0,Fa.jsx)("span",{className:"badge bg-success",children:"Completed"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Data Security Awareness"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Assigned on: Jan 5, 2025"})]}),(0,Fa.jsx)("span",{className:"badge bg-secondary",children:"Not Started"})]})]})]})});case"notifications":return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-bell me-2"}),"Recent Notifications"]}),(0,Fa.jsxs)("div",{className:"list-group",children:[(0,Fa.jsxs)("div",{className:"list-group-item",children:[(0,Fa.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Leave Request Approved"}),(0,Fa.jsx)("small",{children:"2 hours ago"})]}),(0,Fa.jsx)("p",{className:"mb-1",children:"Your leave request for Jan 15-16 has been approved by your manager."})]}),(0,Fa.jsxs)("div",{className:"list-group-item",children:[(0,Fa.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"New Training Assigned"}),(0,Fa.jsx)("small",{children:"1 day ago"})]}),(0,Fa.jsx)("p",{className:"mb-1",children:'You have been assigned a new training: "Data Security Awareness"'})]}),(0,Fa.jsxs)("div",{className:"list-group-item",children:[(0,Fa.jsxs)("div",{className:"d-flex w-100 justify-content-between",children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Payslip Generated"}),(0,Fa.jsx)("small",{children:"3 days ago"})]}),(0,Fa.jsx)("p",{className:"mb-1",children:"Your payslip for December 2024 is now available for download."})]})]})]})});case"settings":const E=e=>{const{name:s,value:t}=e.target;p(e=>({...e,[s]:t}))},_=async e=>{if(e.preventDefault(),h.currentPassword){v(!0);try{(await Zt({currentPassword:h.currentPassword})).data.success&&(j(!0),m(2),alert("Current password verified. Please enter your new password."))}catch(a){var s,t;alert((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Current password is incorrect")}finally{v(!1)}}else alert("Please enter your current password")},A=async e=>{if(e.preventDefault(),h.newPassword&&h.confirmPassword)if(h.newPassword===h.confirmPassword)if(h.newPassword.length<8)alert("New password must be at least 8 characters long");else{v(!0);try{(await ea({currentPassword:h.currentPassword,newPassword:h.newPassword})).data.success&&(f(!0),m(3),alert("OTP sent to your email address"))}catch(a){var s,t;alert((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to send OTP")}finally{v(!1)}}else alert("New passwords do not match");else alert("Please fill in all password fields")},D=async e=>{if(e.preventDefault(),h.otp){v(!0);try{(await sa({currentPassword:h.currentPassword,newPassword:h.newPassword,otp:h.otp})).data.success&&(alert("Password changed successfully"),p({currentPassword:"",newPassword:"",confirmPassword:"",otp:""}),m(1),f(!1),j(!1))}catch(a){var s,t;alert((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to change password")}finally{v(!1)}}else alert("Please enter the OTP")},L=()=>{p({currentPassword:"",newPassword:"",confirmPassword:"",otp:""}),m(1),f(!1),j(!1)};return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Account Settings"]}),(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("h6",{className:"mb-3",children:"Change Password"}),1===u?(0,Fa.jsxs)("form",{onSubmit:_,children:[(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"First, please verify your current password to proceed with password change."]}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"currentPassword",className:"form-label",children:"Current Password"}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:h.currentPassword,onChange:E,placeholder:"Enter your current password",required:!0})]})}),(0,Fa.jsx)("div",{className:"d-flex justify-content-start",children:(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:b,children:b?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Verifying..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-check me-2"}),"Verify Current Password"]})})})]}):2===u?(0,Fa.jsxs)("form",{onSubmit:A,children:[(0,Fa.jsxs)("div",{className:"alert alert-success",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"Current password verified! Now enter your new password."]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"newPassword",className:"form-label",children:"New Password"}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:h.newPassword,onChange:E,placeholder:"Enter new password",required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm New Password"}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:h.confirmPassword,onChange:E,placeholder:"Confirm new password",required:!0})]})]}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary me-2",disabled:b,children:b?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Sending OTP..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-envelope me-2"}),"Send OTP"]})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:L,children:"Cancel"})]})]}):(0,Fa.jsxs)("form",{onSubmit:D,children:[(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"An OTP has been sent to your email address: ",null===l||void 0===l?void 0:l.email]}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"otp",className:"form-label",children:"Enter OTP"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"otp",name:"otp",value:h.otp,onChange:E,placeholder:"Enter 6-digit OTP",maxLength:"6",required:!0})]})}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-start",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-success me-2",disabled:b,children:b?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Verifying..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-check me-2"}),"Verify & Change Password"]})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:L,children:"Cancel"})]})]}),(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-1"}),"Password must be at least 8 characters long and contain uppercase, lowercase, numbers, and special characters."]})})]})})})})]})});case"security":return(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-lock me-2"}),"Security & Settings"]}),(0,Fa.jsxs)("div",{className:"list-group",children:[(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Change Password"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Last changed: 30 days ago"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",children:"Change"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Two-Factor Authentication"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Status: Disabled"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-success btn-sm",children:"Enable"})]}),(0,Fa.jsxs)("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h6",{className:"mb-1",children:"Active Sessions"}),(0,Fa.jsx)("small",{className:"text-muted",children:"2 active sessions"})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-danger btn-sm",children:"Manage"})]})]})]})});default:return(0,Fa.jsx)("div",{children:"Select a tab to view content"})}})()})]})})})]})},Wi=(0,r.forwardRef)((e,s)=>{let{data:t,onChange:a}=e;const{user:n}=Ya(),[i,l]=(0,r.useState)({firstName:"",lastName:"",email:"",phoneNumber:"",dateOfBirth:"",gender:"",profilePhoto:"",address:{street:"",city:"",state:"",zipCode:"",country:""}}),[o,c]=(0,r.useState)({});(0,r.useImperativeHandle)(s,()=>({getFormData:()=>i})),(0,r.useEffect)(()=>{var e,s,a,n,r;t&&l({firstName:t.firstName||"",lastName:t.lastName||"",email:t.email||"",phoneNumber:t.phoneNumber||"",dateOfBirth:t.dateOfBirth?t.dateOfBirth.split("T")[0]:"",gender:t.gender||"",profilePhoto:t.profilePhoto||"",address:{street:(null===(e=t.address)||void 0===e?void 0:e.street)||"",city:(null===(s=t.address)||void 0===s?void 0:s.city)||"",state:(null===(a=t.address)||void 0===a?void 0:a.state)||"",zipCode:(null===(n=t.address)||void 0===n?void 0:n.zipCode)||"",country:(null===(r=t.address)||void 0===r?void 0:r.country)||""}})},[t]);const d=e=>{const{name:s,value:t}=e.target;if(s.startsWith("address.")){const e=s.split(".")[1];l(s=>({...s,address:{...s.address,[e]:t}}))}else l(e=>({...e,[s]:t}));o[s]&&c(e=>({...e,[s]:""})),a&&a()};return(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsx)("div",{className:"text-center",children:(0,Fa.jsxs)("div",{className:"profile-photo-container d-inline-block",children:[(0,Fa.jsx)("div",{className:"rounded-circle mb-3 d-flex align-items-center justify-content-center bg-light border",style:{width:"120px",height:"120px"},children:i.profilePhoto?(0,Fa.jsx)("img",{src:i.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"120px",height:"120px",objectFit:"cover"}}):(0,Fa.jsx)("i",{className:"bi bi-person-circle text-muted",style:{fontSize:"60px"}})}),(0,Fa.jsxs)("div",{className:"d-flex flex-column gap-2 align-items-center justify-content-center",children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary btn-sm d-flex align-items-center",onClick:()=>document.getElementById("profilePhotoInput").click(),style:{minWidth:"120px",height:"32px"},children:[(0,Fa.jsx)("i",{className:"bi bi-camera me-1"}),"Choose Photo"]}),i.profilePhoto&&(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-danger btn-sm d-flex align-items-center justify-content-center",onClick:()=>{l(e=>({...e,profilePhoto:""}));const e=document.getElementById("profilePhotoInput");e&&(e.value=""),a&&a()},title:"Remove photo",style:{minWidth:"120px",height:"32px"},children:[(0,Fa.jsx)("i",{className:"bi bi-trash me-1"}),"Remove"]}),(0,Fa.jsx)("input",{type:"file",id:"profilePhotoInput",accept:"image/*",style:{display:"none"},onChange:e=>{const s=e.target.files[0];if(s){if(s.size>5242880)return void alert("File size should be less than 5MB");if(!s.type.startsWith("image/"))return void alert("Please select a valid image file");const e=new FileReader;e.onload=e=>{l(s=>({...s,profilePhoto:e.target.result})),a&&a()},e.readAsDataURL(s)}}})]})]})})}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"firstName",className:"form-label fw-medium",children:["First Name ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"text",className:"form-control "+(o.firstName?"is-invalid":""),id:"firstName",name:"firstName",value:i.firstName,onChange:d,required:!0}),o.firstName&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.firstName})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"lastName",className:"form-label fw-medium",children:["Last Name ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"text",className:"form-control "+(o.lastName?"is-invalid":""),id:"lastName",name:"lastName",value:i.lastName,onChange:d,required:!0}),o.lastName&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.lastName})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"email",className:"form-label fw-medium",children:["Email ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"email",className:"form-control "+(o.email?"is-invalid":""),id:"email",name:"email",value:i.email,onChange:d,required:!0}),o.email&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.email})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"phoneNumber",className:"form-label fw-medium",children:"Phone Number"}),(0,Fa.jsx)("input",{type:"tel",className:"form-control "+(o.phoneNumber?"is-invalid":""),id:"phoneNumber",name:"phoneNumber",value:i.phoneNumber,onChange:d,placeholder:"+1-555-5397"}),o.phoneNumber&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.phoneNumber})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"dateOfBirth",className:"form-label fw-medium",children:"Date of Birth"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",id:"dateOfBirth",name:"dateOfBirth",value:i.dateOfBirth,onChange:d})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"gender",className:"form-label fw-medium",children:"Gender"}),(0,Fa.jsxs)("select",{className:"form-select",id:"gender",name:"gender",value:i.gender,onChange:d,children:[(0,Fa.jsx)("option",{value:"",children:"Select Gender"}),(0,Fa.jsx)("option",{value:"Male",children:"Male"}),(0,Fa.jsx)("option",{value:"Female",children:"Female"}),(0,Fa.jsx)("option",{value:"Other",children:"Other"}),(0,Fa.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,Fa.jsx)("div",{className:"col-12 mb-3",children:(0,Fa.jsx)("h6",{className:"mb-3 fw-medium",children:"Address Information"})}),(0,Fa.jsxs)("div",{className:"col-12 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address.street",className:"form-label fw-medium",children:"Street Address"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"address.street",name:"address.street",value:i.address.street,onChange:d,placeholder:"123 Main Street"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address.city",className:"form-label fw-medium",children:"City"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"address.city",name:"address.city",value:i.address.city,onChange:d})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address.state",className:"form-label fw-medium",children:"State/Province"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"address.state",name:"address.state",value:i.address.state,onChange:d})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address.zipCode",className:"form-label fw-medium",children:"ZIP/Postal Code"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"address.zipCode",name:"address.zipCode",value:i.address.zipCode,onChange:d})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address.country",className:"form-label fw-medium",children:"Country"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"address.country",name:"address.country",value:i.address.country,onChange:d})]})]})})}),Vi=Wi,Ji=(0,r.forwardRef)((e,s)=>{var t;let{data:a,onChange:n}=e;const[i,l]=(0,r.useState)({designation:"",workLocation:"",employmentType:"",joiningDate:"",probationEndDate:"",confirmationDate:""}),[o,c]=(0,r.useState)({});(0,r.useImperativeHandle)(s,()=>({getFormData:()=>i})),(0,r.useEffect)(()=>{a&&l({designation:a.designation||"",workLocation:a.workLocation||"",employmentType:a.employmentType||"",joiningDate:a.joiningDate?a.joiningDate.split("T")[0]:"",probationEndDate:a.probationEndDate?a.probationEndDate.split("T")[0]:"",confirmationDate:a.confirmationDate?a.confirmationDate.split("T")[0]:""})},[a]);const d=e=>{const{name:s,value:t}=e.target;l(e=>({...e,[s]:t})),o[s]&&c(e=>({...e,[s]:""})),n&&n()};return(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,Fa.jsx)("strong",{children:"Note:"})," Some work information fields like Employee ID, Department, and Role can only be updated by HR or Admin users."]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employee ID"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a?void 0:a.employeeId)||"Not assigned",disabled:!0}),(0,Fa.jsx)("small",{className:"text-muted",children:"This field can only be updated by HR/Admin"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a||null===(t=a.department)||void 0===t?void 0:t.name)||"Not assigned",disabled:!0}),(0,Fa.jsx)("small",{className:"text-muted",children:"This field can only be updated by HR/Admin"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Role"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:(null===a||void 0===a?void 0:a.role)||"Not assigned",disabled:!0}),(0,Fa.jsx)("small",{className:"text-muted",children:"This field can only be updated by HR/Admin"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Reporting Manager"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:null!==a&&void 0!==a&&a.reportingManager?`${a.reportingManager.firstName} ${a.reportingManager.lastName}`:"Not assigned",disabled:!0}),(0,Fa.jsx)("small",{className:"text-muted",children:"This field can only be updated by HR/Admin"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"designation",className:"form-label",children:"Designation/Job Title"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"designation",name:"designation",value:i.designation,onChange:d,placeholder:"e.g., Senior Software Engineer"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"workLocation",className:"form-label",children:"Work Location"}),(0,Fa.jsxs)("select",{className:"form-select",id:"workLocation",name:"workLocation",value:i.workLocation,onChange:d,children:[(0,Fa.jsx)("option",{value:"",children:"Select Work Location"}),(0,Fa.jsx)("option",{value:"Office",children:"Office"}),(0,Fa.jsx)("option",{value:"Remote",children:"Remote"}),(0,Fa.jsx)("option",{value:"Hybrid",children:"Hybrid"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"employmentType",className:"form-label",children:"Employment Type"}),(0,Fa.jsxs)("select",{className:"form-select",id:"employmentType",name:"employmentType",value:i.employmentType,onChange:d,children:[(0,Fa.jsx)("option",{value:"",children:"Select Employment Type"}),(0,Fa.jsx)("option",{value:"Full-time",children:"Full-time"}),(0,Fa.jsx)("option",{value:"Part-time",children:"Part-time"}),(0,Fa.jsx)("option",{value:"Contract",children:"Contract"}),(0,Fa.jsx)("option",{value:"Internship",children:"Internship"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"joiningDate",className:"form-label",children:"Joining Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",id:"joiningDate",name:"joiningDate",value:i.joiningDate,onChange:d})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"probationEndDate",className:"form-label",children:"Probation End Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control "+(o.probationEndDate?"is-invalid":""),id:"probationEndDate",name:"probationEndDate",value:i.probationEndDate,onChange:d}),o.probationEndDate&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.probationEndDate})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"confirmationDate",className:"form-label",children:"Confirmation Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control "+(o.confirmationDate?"is-invalid":""),id:"confirmationDate",name:"confirmationDate",value:i.confirmationDate,onChange:d}),o.confirmationDate&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:o.confirmationDate})]})]})})]})}),Gi=Ji,Ki=(0,r.forwardRef)((e,s)=>{let{data:t,onChange:a}=e;const[n,i]=(0,r.useState)({}),[l,o]=(0,r.useState)({});(0,r.useImperativeHandle)(s,()=>({getFormData:()=>({documents:n})})),(0,r.useEffect)(()=>{null!==t&&void 0!==t&&t.documents&&i(t.documents)},[t]);const c=[{key:"idProof",name:"ID Proof (Aadhar Card)",type:"identity",required:!0,icon:"bi-person-badge"},{key:"offerLetter",name:"Offer Letter",type:"employment",required:!0,icon:"bi-briefcase"},{key:"educationalCertificates",name:"Educational Certificates",type:"education",required:!0,icon:"bi-mortarboard"},{key:"experienceLetters",name:"Experience Letters",type:"employment",required:!1,icon:"bi-briefcase"},{key:"passport",name:"Passport",type:"identity",required:!1,icon:"bi-person-badge"}],d=async(e,s)=>{if(!s)return;if(["application/pdf","image/jpeg","image/png","image/jpg"].includes(s.type))if(s.size>10485760)alert("File size must be less than 10MB");else{o(s=>({...s,[e]:!0}));try{const t=new FormData;t.append("document",s),t.append("documentType",e);const n=await Ma.post("/auth/upload-document",t,{headers:{"Content-Type":"multipart/form-data"}});n.data.document&&(i(s=>({...s,[e]:n.data.document})),a&&a(),alert("Document uploaded successfully!"))}catch(r){var t,n;console.error("Upload failed:",r),alert((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Upload failed. Please try again.")}finally{o(s=>({...s,[e]:!1}))}}else alert("Please upload only PDF, JPG, or PNG files")},u=e=>{if(e.fileUrl||e.fileName)try{let s=e.fileUrl;!s&&e.fileName&&(s=`https://etvdufporvnfpgdzpcrr.supabase.co/storage/v1/object/public/documents/${e.fileName}`);const t=e.createElement("a");t.href=s,t.download=e.originalName||e.fileName||"document",t.target="_self",t.rel="noopener noreferrer",e.body.appendChild(t),t.click(),e.body.removeChild(t),console.log("Download initiated for:",e.originalName||e.fileName)}catch(s){console.error("Download failed:",s),alert("Unable to download file. Please contact support.")}else alert("Document not available for download")},m=async e=>{if(window.confirm("Are you sure you want to delete this document?"))try{await Ma.delete(`/auth/delete-document/${e}`),i(s=>{const t={...s};return delete t[e],t}),a&&a(),alert("Document deleted successfully!")}catch(n){var s,t;console.error("Delete failed:",n),alert((null===(s=n.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Delete failed. Please try again.")}},h=e=>{const s=n[e];return s&&s.fileName?(0,Fa.jsx)("span",{className:"badge bg-success",children:"Uploaded"}):(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Pending"})},p=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",x=e=>{if(!e)return"N/A";if(0===e)return"0 Byte";const s=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,s)*100)/100+" "+["Bytes","KB","MB","GB"][s]};return(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"alert alert-info mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,Fa.jsx)("strong",{children:"Document Guidelines:"})," Upload clear, readable copies of your documents. Accepted formats: PDF, JPG, PNG. Maximum file size: 10MB per document."]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-12 mb-4",children:[(0,Fa.jsx)("h6",{children:"Required Documents"}),(0,Fa.jsx)("div",{className:"list-group",children:c.filter(e=>e.required).map(e=>{const s=n[e.key];return(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-start",children:(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Fa.jsx)("i",{className:`${e.icon} text-primary me-2`}),(0,Fa.jsx)("h6",{className:"mb-0",children:e.name}),(0,Fa.jsx)("span",{className:"badge bg-danger ms-2",children:"Required"}),h(e.key)]}),s&&s.fileName&&(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("strong",{children:"File:"})," ",s.originalName||s.fileName,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Uploaded:"})," ",p(s.uploadedAt),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Size:"})," ",x(s.fileSize)]})}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsx)("input",{type:"file",className:"form-control form-control-sm",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>d(e.key,s.target.files[0]),disabled:l[e.key],style:{maxWidth:"300px"}}),s&&s.fileName&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(s),title:"Download",children:(0,Fa.jsx)("i",{className:"bi bi-download"})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>m(e.key),title:"Delete",children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]})]}),l[e.key]&&(0,Fa.jsxs)("div",{className:"mt-2",children:[(0,Fa.jsx)("div",{className:"progress",style:{height:"4px"},children:(0,Fa.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"100%"}})}),(0,Fa.jsx)("small",{className:"text-muted",children:"Uploading..."})]})]})})},e.key)})})]}),(0,Fa.jsxs)("div",{className:"col-12 mb-4",children:[(0,Fa.jsx)("h6",{children:"Optional Documents"}),(0,Fa.jsx)("div",{className:"list-group",children:c.filter(e=>!e.required).map(e=>{const s=n[e.key];return(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-start",children:(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[(0,Fa.jsx)("i",{className:`${e.icon} text-secondary me-2`}),(0,Fa.jsx)("h6",{className:"mb-0",children:e.name}),(0,Fa.jsx)("span",{className:"badge bg-secondary ms-2",children:"Optional"}),h(e.key)]}),s&&s.fileName&&(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("strong",{children:"File:"})," ",s.originalName||s.fileName,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Uploaded:"})," ",p(s.uploadedAt),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("strong",{children:"Size:"})," ",x(s.fileSize)]})}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsx)("input",{type:"file",className:"form-control form-control-sm",accept:".pdf,.jpg,.jpeg,.png",onChange:s=>d(e.key,s.target.files[0]),disabled:l[e.key],style:{maxWidth:"300px"}}),s&&s.fileName&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-primary btn-sm",onClick:()=>u(s),title:"Download",children:(0,Fa.jsx)("i",{className:"bi bi-download"})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm",onClick:()=>m(e.key),title:"Delete",children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]})]}),l[e.key]&&(0,Fa.jsxs)("div",{className:"mt-2",children:[(0,Fa.jsx)("div",{className:"progress",style:{height:"4px"},children:(0,Fa.jsx)("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:"100%"}})}),(0,Fa.jsx)("small",{className:"text-muted",children:"Uploading..."})]})]})})},e.key)})})]}),(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsx)("div",{className:"card bg-light",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle text-primary me-2"}),"Document Requirements"]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("ul",{className:"mb-0 small",children:[(0,Fa.jsx)("li",{children:"All documents must be clear and readable"}),(0,Fa.jsx)("li",{children:"Scanned copies or high-quality photos are acceptable"}),(0,Fa.jsx)("li",{children:"File formats: PDF, JPG, PNG only"})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("ul",{className:"mb-0 small",children:[(0,Fa.jsx)("li",{children:"Maximum file size: 10MB per document"}),(0,Fa.jsx)("li",{children:"Required documents must be uploaded for account activation"}),(0,Fa.jsx)("li",{children:"Documents are securely stored and encrypted"})]})})]})]})})})]})})]})}),Yi=Ki,Qi=(0,r.forwardRef)((e,s)=>{let{data:t,onChange:a}=e;const[n,i]=(0,r.useState)({emergencyContact:{name:"",relationship:"",phone:"",address:""}}),[l,o]=(0,r.useState)({});(0,r.useImperativeHandle)(s,()=>({getFormData:()=>n})),(0,r.useEffect)(()=>{var e,s,a,n;t&&i({emergencyContact:{name:(null===(e=t.emergencyContact)||void 0===e?void 0:e.name)||"",relationship:(null===(s=t.emergencyContact)||void 0===s?void 0:s.relationship)||"",phone:(null===(a=t.emergencyContact)||void 0===a?void 0:a.phone)||"",address:(null===(n=t.emergencyContact)||void 0===n?void 0:n.address)||""}})},[t]);const c=e=>{const{name:s,value:t}=e.target;i(e=>({emergencyContact:{...e.emergencyContact,[s]:t}})),l[s]&&o(e=>({...e,[s]:""})),a&&a()};return(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"alert alert-warning mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),(0,Fa.jsx)("strong",{children:"Important:"})," This information will be used to contact someone on your behalf in case of an emergency. Please ensure all details are accurate and up-to-date."]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"name",className:"form-label",children:["Contact Name ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"text",className:"form-control "+(l.name?"is-invalid":""),id:"name",name:"name",value:n.emergencyContact.name,onChange:c,placeholder:"Full name of emergency contact",required:!0}),l.name&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.name})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"relationship",className:"form-label",children:["Relationship ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("select",{className:"form-select "+(l.relationship?"is-invalid":""),id:"relationship",name:"relationship",value:n.emergencyContact.relationship,onChange:c,required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Relationship"}),["Spouse","Parent","Child","Sibling","Friend","Relative","Guardian","Other"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))]}),l.relationship&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.relationship})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"phone",className:"form-label",children:["Phone Number ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"tel",className:"form-control "+(l.phone?"is-invalid":""),id:"phone",name:"phone",value:n.emergencyContact.phone,onChange:c,placeholder:"+1 (555) 123-4567",required:!0}),l.phone&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.phone}),(0,Fa.jsx)("small",{className:"text-muted",children:"Include country code for international numbers"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Alternative Contact"}),(0,Fa.jsx)("input",{type:"tel",className:"form-control",placeholder:"+1 (555) 987-6543"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Optional secondary phone number"})]}),(0,Fa.jsxs)("div",{className:"col-12 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"address",className:"form-label",children:"Address"}),(0,Fa.jsx)("textarea",{className:"form-control",id:"address",name:"address",rows:"3",value:n.emergencyContact.address,onChange:c,placeholder:"Complete address of emergency contact"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Include street, city, state, and postal code"})]}),(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsx)("div",{className:"card bg-light",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle text-primary me-2"}),"Emergency Contact Guidelines"]}),(0,Fa.jsxs)("ul",{className:"mb-0 small",children:[(0,Fa.jsx)("li",{children:"Choose someone who is easily reachable and reliable"}),(0,Fa.jsx)("li",{children:"Inform your emergency contact that you've listed them"}),(0,Fa.jsx)("li",{children:"Update this information if your contact details change"}),(0,Fa.jsx)("li",{children:"Consider choosing someone who lives nearby or is familiar with your medical history"})]})]})})})]})})]})}),Xi=Qi,Zi=(0,r.forwardRef)((e,s)=>{let{data:t,onChange:a}=e;const[n,i]=(0,r.useState)({bankDetails:{accountNumber:"",bankName:"",ifscCode:"",pfNumber:"",esiNumber:"",panNumber:""}}),[l,o]=(0,r.useState)({}),[c,d]=(0,r.useState)(!1);(0,r.useImperativeHandle)(s,()=>({getFormData:()=>n})),(0,r.useEffect)(()=>{var e,s,a,n,r,l;t&&i({bankDetails:{accountNumber:(null===(e=t.bankDetails)||void 0===e?void 0:e.accountNumber)||"",bankName:(null===(s=t.bankDetails)||void 0===s?void 0:s.bankName)||"",ifscCode:(null===(a=t.bankDetails)||void 0===a?void 0:a.ifscCode)||"",pfNumber:(null===(n=t.bankDetails)||void 0===n?void 0:n.pfNumber)||"",esiNumber:(null===(r=t.bankDetails)||void 0===r?void 0:r.esiNumber)||"",panNumber:(null===(l=t.bankDetails)||void 0===l?void 0:l.panNumber)||""}})},[t]);const u=e=>{const{name:s,value:t}=e.target;i(e=>({bankDetails:{...e.bankDetails,[s]:t.toUpperCase()}})),l[s]&&o(e=>({...e,[s]:""})),a&&a()};return(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"alert alert-danger mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-shield-exclamation me-2"}),(0,Fa.jsx)("strong",{children:"Security Notice:"})," This information is highly sensitive and encrypted. Only provide accurate details. Account numbers are masked for security."]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"bankName",className:"form-label",children:"Bank Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"bankName",name:"bankName",value:n.bankDetails.bankName,onChange:u,placeholder:"e.g., State Bank of India"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"ifscCode",className:"form-label",children:"IFSC Code"}),(0,Fa.jsx)("input",{type:"text",className:"form-control "+(l.ifscCode?"is-invalid":""),id:"ifscCode",name:"ifscCode",value:n.bankDetails.ifscCode,onChange:u,placeholder:"SBIN0001234",maxLength:"11"}),l.ifscCode&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.ifscCode}),(0,Fa.jsx)("small",{className:"text-muted",children:"11-character alphanumeric code"})]}),(0,Fa.jsxs)("div",{className:"col-md-12 mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"accountNumber",className:"form-label",children:["Account Number",(0,Fa.jsxs)("button",{type:"button",className:"btn btn-sm btn-outline-secondary ms-2",onClick:()=>d(!c),children:[(0,Fa.jsx)("i",{className:"bi "+(c?"bi-eye-slash":"bi-eye")}),c?"Hide":"Show"]})]}),(0,Fa.jsx)("input",{type:c?"text":"password",className:"form-control "+(l.accountNumber?"is-invalid":""),id:"accountNumber",name:"accountNumber",value:n.bankDetails.accountNumber,onChange:u,placeholder:c?"Enter account number":(m=n.bankDetails.accountNumber,m?m.length<=4?m:"*".repeat(m.length-4)+m.slice(-4):"")}),l.accountNumber&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.accountNumber}),(0,Fa.jsx)("small",{className:"text-muted",children:"Your bank account number (will be encrypted)"})]}),(0,Fa.jsx)("div",{className:"col-12 mb-3",children:(0,Fa.jsx)("h6",{className:"mb-3",children:"Government IDs & Numbers"})}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"panNumber",className:"form-label",children:"PAN Number"}),(0,Fa.jsx)("input",{type:"text",className:"form-control "+(l.panNumber?"is-invalid":""),id:"panNumber",name:"panNumber",value:n.bankDetails.panNumber,onChange:u,placeholder:"ABCDE1234F",maxLength:"10"}),l.panNumber&&(0,Fa.jsx)("div",{className:"invalid-feedback",children:l.panNumber}),(0,Fa.jsx)("small",{className:"text-muted",children:"10-character alphanumeric code"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"pfNumber",className:"form-label",children:"PF Number"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"pfNumber",name:"pfNumber",value:n.bankDetails.pfNumber,onChange:u,placeholder:"e.g., DL/12345/67890"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Provident Fund number"})]}),(0,Fa.jsxs)("div",{className:"col-md-6 mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"esiNumber",className:"form-label",children:"ESI Number"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"esiNumber",name:"esiNumber",value:n.bankDetails.esiNumber,onChange:u,placeholder:"e.g., 1234567890"}),(0,Fa.jsx)("small",{className:"text-muted",children:"Employee State Insurance number"})]}),(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsx)("div",{className:"card bg-light",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle text-primary me-2"}),"Important Information"]}),(0,Fa.jsxs)("ul",{className:"mb-0 small",children:[(0,Fa.jsxs)("li",{children:[(0,Fa.jsx)("strong",{children:"Security:"})," All sensitive data is encrypted and stored securely"]}),(0,Fa.jsxs)("li",{children:[(0,Fa.jsx)("strong",{children:"Accuracy:"})," Ensure all details are correct to avoid payroll issues"]}),(0,Fa.jsxs)("li",{children:[(0,Fa.jsx)("strong",{children:"Updates:"})," Notify HR immediately if any bank details change"]}),(0,Fa.jsxs)("li",{children:[(0,Fa.jsx)("strong",{children:"Verification:"})," Some changes may require document verification"]})]})]})})})]})})]});var m}),el=Zi,sl=()=>{const{user:e}=Ya(),s=se(),[t,a]=(0,r.useState)("personal"),[n,i]=(0,r.useState)(null),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),[x,f]=(0,r.useState)({personal:{},work:{},emergency:{},bank:{},documents:{}}),b=(0,r.useRef)(),v=(0,r.useRef)(),g=(0,r.useRef)(),j=(0,r.useRef)(),y=(0,r.useRef)();(0,r.useEffect)(()=>{N()},[]);const N=async()=>{try{const e=await Qt();i(e.data.user)}catch(e){console.error("Error fetching profile:",e),m({type:"error",message:"Failed to load profile data"})}finally{o(!1)}},w=()=>{p(!0)},k=()=>{var e,s,a,n,r;switch(t){case"personal":return null===(e=b.current)||void 0===e?void 0:e.getFormData();case"work":return null===(s=v.current)||void 0===s?void 0:s.getFormData();case"emergency":return null===(a=j.current)||void 0===a?void 0:a.getFormData();case"bank":return null===(n=y.current)||void 0===n?void 0:n.getFormData();case"documents":return null===(r=g.current)||void 0===r?void 0:r.getFormData();default:return null}};return(0,Fa.jsxs)("div",{className:"container-fluid py-4",children:[u&&(0,Fa.jsxs)("div",{className:`alert alert-${"success"===u.type?"success":"danger"} alert-dismissible fade show`,role:"alert",children:[(0,Fa.jsx)("i",{className:`bi ${"success"===u.type?"bi-check-circle":"bi-exclamation-triangle"} me-2`}),u.message,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>m(null)})]}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h2",{className:"mb-1",children:"Edit Profile"}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Update your profile information"})]}),(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>s("/profile"),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back to Profile"]})})]})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("ul",{className:"nav nav-tabs card-header-tabs",role:"tablist",children:[{id:"personal",label:"Personal Info",icon:"bi-person"},{id:"work",label:"Work Info",icon:"bi-briefcase"},{id:"documents",label:"Documents",icon:"bi-file-text"},{id:"emergency",label:"Emergency Contact",icon:"bi-person-exclamation"},{id:"bank",label:"Bank Details",icon:"bi-bank"}].map(e=>(0,Fa.jsx)("li",{className:"nav-item",role:"presentation",children:(0,Fa.jsxs)("button",{className:"nav-link "+(t===e.id?"active":""),onClick:()=>(e=>{const s=k();s&&f(e=>({...e,[t]:s})),a(e)})(e.id),type:"button",role:"tab",children:[(0,Fa.jsx)("i",{className:`${e.icon} me-2`}),e.label]})},e.id))})}),(0,Fa.jsx)("div",{className:"card-body",children:(()=>{if(l)return(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});if(!n)return(0,Fa.jsx)("div",{className:"alert alert-warning",children:"Unable to load profile data"});const e=e=>{const s=x[e];return s&&Object.keys(s).length>0?{...n,...s}:n};switch(t){case"personal":return(0,Fa.jsx)(Vi,{ref:b,data:e("personal"),onChange:w});case"work":return(0,Fa.jsx)(Gi,{ref:v,data:e("work"),onChange:w});case"documents":return(0,Fa.jsx)(Yi,{ref:g,data:e("documents"),onChange:w});case"emergency":return(0,Fa.jsx)(Xi,{ref:j,data:e("emergency"),onChange:w});case"bank":return(0,Fa.jsx)(el,{ref:y,data:e("bank"),onChange:w});default:return(0,Fa.jsx)("div",{children:"Select a tab to edit content"})}})()}),(0,Fa.jsx)("div",{className:"card-footer bg-light",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsx)("div",{children:h&&(0,Fa.jsxs)("small",{className:"text-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),"You have unsaved changes"]})}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{p(!1),N(),m({type:"info",message:"Changes discarded"}),setTimeout(()=>m(null),3e3)},disabled:!h||c,children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Discard Changes"]}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{d(!0);try{const e=k();e&&f(s=>({...s,[t]:e}));const s="personal"===t?e:x.personal,a="work"===t?e:x.work,n="emergency"===t?e:x.emergency,r="bank"===t?e:x.bank,l={};if(null!==s&&void 0!==s&&s.firstName&&(l.firstName=s.firstName),null!==s&&void 0!==s&&s.lastName&&(l.lastName=s.lastName),null!==s&&void 0!==s&&s.email&&(l.email=s.email),null!==s&&void 0!==s&&s.phoneNumber&&(l.phoneNumber=s.phoneNumber),null!==s&&void 0!==s&&s.dateOfBirth){const e=new Date(s.dateOfBirth);l.dateOfBirth=e.toISOString()}if(null!==s&&void 0!==s&&s.gender&&(l.gender=s.gender),void 0!==(null===s||void 0===s?void 0:s.profilePhoto)&&(l.profilePhoto=s.profilePhoto),void 0!==(null===s||void 0===s?void 0:s.profilePhotoPath)&&(l.profilePhotoPath=s.profilePhotoPath),null!==s&&void 0!==s&&s.address&&(l.address=s.address),null!==a&&void 0!==a&&a.designation&&(l.designation=a.designation),null!==a&&void 0!==a&&a.workLocation&&(l.workLocation=a.workLocation),n&&Object.keys(n).length>0){const e={},s=n.emergencyContact||n;s.name&&(e.name=s.name),s.relationship&&(e.relationship=s.relationship),s.phone&&(e.phone=s.phone),s.address&&(e.address=s.address),Object.keys(e).length>0&&(l.emergencyContact=e)}if(r&&Object.keys(r).length>0){const e={},s=r.bankDetails||r;s.accountNumber&&(e.accountNumber=s.accountNumber),s.bankName&&(e.bankName=s.bankName),s.ifscCode&&(e.ifscCode=s.ifscCode),s.pfNumber&&(e.pfNumber=s.pfNumber),s.esiNumber&&(e.esiNumber=s.esiNumber),s.panNumber&&(e.panNumber=s.panNumber),Object.keys(e).length>0&&(l.bankDetails=e)}console.log("Saving profile data:",l);const o=await Xt(l);if(!o.data||!o.data.user)throw new Error("Invalid response from server");i(o.data.user),p(!1),f({personal:{},work:{},emergency:{},bank:{},documents:{}}),m({type:"success",message:o.data.message||"Profile updated successfully!"}),window.dispatchEvent(new CustomEvent("profileUpdated")),setTimeout(()=>m(null),3e3)}catch(r){var e,s,a,n;console.error("Error updating profile:",r);let t="Something went wrong. Please try again.";if(null!==(e=r.response)&&void 0!==e&&null!==(s=e.data)&&void 0!==s&&s.message)t=r.response.data.message;else if(null!==(a=r.response)&&void 0!==a&&null!==(n=a.data)&&void 0!==n&&n.errors){const e=r.response.data.errors;Array.isArray(e)&&(t=e.map(e=>e.message||e.msg||e).join(", "))}else r.message&&(t=r.message);m({type:"error",message:t}),setTimeout(()=>m(null),5e3)}finally{d(!1)}},disabled:!h||c,children:c?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Saving..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-lg me-2"}),"Save All Changes"]})})]})]})})]})})})]})},tl=()=>{const{user:e,logout:s,hasRole:t,hasAnyRole:a,getRoleLevel:n}=Ya(),[i,l]=(0,r.useState)({totalUsers:0,activeUsers:0,departments:0}),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{m()},[]);const m=async()=>{try{if(a(["Admin","Vice President"])){var e,s;const t=await ua({limit:5});c(t.data.users||[]),l({totalUsers:t.data.total||0,activeUsers:(null===(e=t.data.users)||void 0===e?void 0:e.filter(e=>e.isActive).length)||0,departments:[...new Set(null===(s=t.data.users)||void 0===s?void 0:s.map(e=>e.department).filter(Boolean))].length||0})}}catch(t){console.error("Error fetching dashboard data:",t)}finally{u(!1)}},h=e=>({Admin:"danger","Vice President":"primary","HR BP":"info","HR Manager":"success","HR Executive":"warning","Team Manager":"secondary","Team Leader":"dark"}[e]||"secondary"),p=e=>({Admin:"bi-shield-check","Vice President":"bi-star","HR BP":"bi-briefcase","HR Manager":"bi-people","HR Executive":"bi-person-badge","Team Manager":"bi-diagram-3","Team Leader":"bi-person-check"}[e]||"bi-person");return d?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsx)("div",{className:"min-vh-100 bg-light",style:{minHeight:"calc(100vh - 60px)"},children:(0,Fa.jsxs)("div",{className:"container-fluid pt-1 pb-2",children:[(0,Fa.jsx)("div",{className:"row mb-3",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card bg-gradient bg-primary text-white",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row align-items-center",children:[(0,Fa.jsxs)("div",{className:"col-md-8",children:[(0,Fa.jsx)("h2",{className:"card-title mb-1",children:(()=>{const s=(new Date).getHours();let t="Good morning";return s>=12&&s<17?t="Good afternoon":s>=17&&(t="Good evening"),`${t}, ${null===e||void 0===e?void 0:e.firstName}!`})()}),(0,Fa.jsxs)("p",{className:"card-text mb-0",children:["Welcome to your HRM dashboard. You're logged in as"," ",(0,Fa.jsx)("span",{className:`badge bg-${h(null===e||void 0===e?void 0:e.role)} ms-1`,children:null===e||void 0===e?void 0:e.role})]}),(null===e||void 0===e?void 0:e.department)&&(0,Fa.jsxs)("small",{className:"opacity-75",children:["Department: ",e.department]})]}),(0,Fa.jsx)("div",{className:"col-md-4 text-end",children:(0,Fa.jsx)("i",{className:`bi ${p(null===e||void 0===e?void 0:e.role)}`,style:{fontSize:"3rem",opacity:.7}})})]})})})})}),a(["Admin","Vice President"])&&(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("i",{className:"bi bi-people text-primary",style:{fontSize:"2rem"}}),(0,Fa.jsx)("h3",{className:"card-title mt-2",children:i.totalUsers}),(0,Fa.jsx)("p",{className:"card-text text-muted",children:"Total Users"})]})})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("i",{className:"bi bi-person-check text-success",style:{fontSize:"2rem"}}),(0,Fa.jsx)("h3",{className:"card-title mt-2",children:i.activeUsers}),(0,Fa.jsx)("p",{className:"card-text text-muted",children:"Active Users"})]})})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("i",{className:"bi bi-building text-info",style:{fontSize:"2rem"}}),(0,Fa.jsx)("h3",{className:"card-title mt-2",children:i.departments}),(0,Fa.jsx)("p",{className:"card-text text-muted",children:"Departments"})]})})})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-8",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"card-title mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-grid me-2"}),"Available Features"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"row",children:(()=>{const e=[];n();return t("Admin")?e.push({name:"User Management",icon:"bi-people",description:"Manage all users and roles"},{name:"System Settings",icon:"bi-gear",description:"Configure system settings"},{name:"Reports & Analytics",icon:"bi-graph-up",description:"View detailed reports"},{name:"Audit Logs",icon:"bi-journal-text",description:"View system audit logs"}):t("Vice President")?e.push({name:"Executive Dashboard",icon:"bi-speedometer2",description:"High-level overview"},{name:"Department Reports",icon:"bi-bar-chart",description:"Department performance"},{name:"Strategic Planning",icon:"bi-diagram-3",description:"Strategic initiatives"}):a(["HR BP","HR Manager"])?e.push({name:"Employee Records",icon:"bi-person-lines-fill",description:"Manage employee data"},{name:"Recruitment",icon:"bi-person-plus",description:"Hiring and onboarding"},{name:"Performance Reviews",icon:"bi-clipboard-check",description:"Employee evaluations"}):t("HR Executive")?e.push({name:"Employee Support",icon:"bi-headset",description:"Employee assistance"},{name:"Documentation",icon:"bi-file-text",description:"HR documentation"},{name:"Training Records",icon:"bi-book",description:"Training management"}):a(["Team Manager","Team Leader"])&&e.push({name:"Team Overview",icon:"bi-people",description:"Manage your team"},{name:"Task Management",icon:"bi-list-check",description:"Assign and track tasks"},{name:"Team Reports",icon:"bi-graph-up",description:"Team performance metrics"}),e})().map((e,s)=>(0,Fa.jsx)("div",{className:"col-md-6 mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-start",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("i",{className:`bi ${e.icon} text-primary`,style:{fontSize:"1.5rem"}})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsx)("h6",{className:"mb-1",children:e.name}),(0,Fa.jsx)("small",{className:"text-muted",children:e.description})]})]})},s))})})]})}),a(["Admin","Vice President"])&&(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"card-title mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"Recent Users"]})}),(0,Fa.jsx)("div",{className:"card-body",children:o.length>0?(0,Fa.jsx)("div",{className:"list-group list-group-flush",children:o.map(e=>(0,Fa.jsx)("div",{className:"list-group-item px-0",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("i",{className:`bi ${p(e.role)} text-${h(e.role)}`})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsxs)("h6",{className:"mb-0",children:[e.firstName," ",e.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:e.role})]}),(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("span",{className:"badge bg-"+(e.isActive?"success":"secondary"),children:e.isActive?"Active":"Inactive"})})]})},e._id))}):(0,Fa.jsx)("p",{className:"text-muted text-center",children:"No users found"})})]})}),!a(["Admin","Vice President"])&&(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"card-title mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-2"}),"Your Profile"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"text-center",children:[(0,Fa.jsx)("i",{className:`bi ${p(null===e||void 0===e?void 0:e.role)} text-${h(null===e||void 0===e?void 0:e.role)}`,style:{fontSize:"3rem"}}),(0,Fa.jsxs)("h5",{className:"mt-3",children:[null===e||void 0===e?void 0:e.firstName," ",null===e||void 0===e?void 0:e.lastName]}),(0,Fa.jsx)("p",{className:"text-muted",children:null===e||void 0===e?void 0:e.email}),(0,Fa.jsx)("span",{className:`badge bg-${h(null===e||void 0===e?void 0:e.role)}`,children:null===e||void 0===e?void 0:e.role}),(null===e||void 0===e?void 0:e.department)&&(0,Fa.jsx)("p",{className:"mt-2 mb-0",children:(0,Fa.jsxs)("small",{className:"text-muted",children:["Department: ",e.department]})})]})})]})})]})]})})},al=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(""),[p,x]=(0,r.useState)(1),[f,b]=(0,r.useState)(1),[v,g]=(0,r.useState)({}),[j,y]=(0,r.useState)({name:"",code:"",description:"",headOfDepartment:"",budget:"",location:"",isActive:!0});(0,r.useEffect)(()=>{N(),w()},[p,m]);const N=async()=>{try{n(!0);const e=localStorage.getItem("token"),s=await fetch(`/api/departments?page=${p}&limit=10&search=${m}`,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error("Failed to fetch departments");const a=await s.json();t(a.departments),b(a.totalPages)}catch(e){l(e.message)}finally{n(!1)}},w=async()=>{try{const e=localStorage.getItem("token"),s=await fetch("/api/departments/stats",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();g(e)}}catch(e){console.error("Failed to fetch stats:",e)}},k=()=>{c(!1),u(null),y({name:"",code:"",description:"",headOfDepartment:"",budget:"",location:"",isActive:!0}),l("")},S=e=>{const{name:s,value:t,type:a,checked:n}=e.target;y(e=>({...e,[s]:"checkbox"===a?n:t}))};return a&&0===s.length?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h2",{className:"mb-1",children:"Department Management"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Manage company departments and organizational structure"})]}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>c(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Add Department"]})]}),(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-primary text-white",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h5",{className:"card-title",children:"Total Departments"}),(0,Fa.jsx)("h3",{className:"mb-0",children:v.totalDepartments||0})]}),(0,Fa.jsx)("i",{className:"bi bi-building",style:{fontSize:"2rem",opacity:.7}})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-success text-white",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h5",{className:"card-title",children:"Active Departments"}),(0,Fa.jsx)("h3",{className:"mb-0",children:v.activeDepartments||0})]}),(0,Fa.jsx)("i",{className:"bi bi-check-circle",style:{fontSize:"2rem",opacity:.7}})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-warning text-white",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h5",{className:"card-title",children:"Inactive Departments"}),(0,Fa.jsx)("h3",{className:"mb-0",children:v.inactiveDepartments||0})]}),(0,Fa.jsx)("i",{className:"bi bi-x-circle",style:{fontSize:"2rem",opacity:.7}})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-info text-white",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h5",{className:"card-title",children:"Avg Employees"}),(0,Fa.jsx)("h3",{className:"mb-0",children:v.departmentStats&&Math.round(v.departmentStats.reduce((e,s)=>e+s.activeEmployeeCount,0)/v.departmentStats.length)||0})]}),(0,Fa.jsx)("i",{className:"bi bi-people",style:{fontSize:"2rem",opacity:.7}})]})})})})]}),(0,Fa.jsx)("div",{className:"card mb-4",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-search"})}),(0,Fa.jsx)("input",{type:"text",className:"form-control",placeholder:"Search departments...",value:m,onChange:e=>h(e.target.value)})]})}),(0,Fa.jsx)("div",{className:"col-md-6 text-end",children:(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary me-2",onClick:()=>{h(""),x(1)},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset"]})})]})})}),i&&(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[i,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l("")})]}),(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Department"}),(0,Fa.jsx)("th",{children:"Code"}),(0,Fa.jsx)("th",{children:"Head of Department"}),(0,Fa.jsx)("th",{children:"Employees"}),(0,Fa.jsx)("th",{children:"Budget"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:s.map(s=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:s.name}),s.description&&(0,Fa.jsx)("small",{className:"text-muted",children:s.description})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:s.code})}),(0,Fa.jsx)("td",{children:s.headOfDepartment?(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{children:[s.headOfDepartment.firstName," ",s.headOfDepartment.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:s.headOfDepartment.email})]}):(0,Fa.jsx)("span",{className:"text-muted",children:"Not assigned"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-info",children:s.employeeCount||0})}),(0,Fa.jsx)("td",{children:s.budget?(0,Fa.jsxs)("span",{children:["\u20b9",s.budget.toLocaleString()]}):(0,Fa.jsx)("span",{className:"text-muted",children:"Not set"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge "+(s.isActive?"bg-success":"bg-danger"),children:s.isActive?"Active":"Inactive"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group",role:"group",children:[(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>(e=>{var s;u(e),y({name:e.name,code:e.code,description:e.description||"",headOfDepartment:(null===(s=e.headOfDepartment)||void 0===s?void 0:s._id)||"",budget:e.budget||"",location:e.location||"",isActive:e.isActive}),c(!0)})(s),children:(0,Fa.jsx)("i",{className:"bi bi-pencil"})}),"Admin"===(null===e||void 0===e?void 0:e.role)&&(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this department?"))try{const s=localStorage.getItem("token"),t=await fetch(`/api/departments/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to delete department")}await N(),await w()}catch(s){l(s.message)}})(s._id),children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]})})]},s._id))})]})}),f>1&&(0,Fa.jsx)("nav",{className:"mt-4",children:(0,Fa.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===p?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>x(p-1),disabled:1===p,children:"Previous"})}),[...Array(f)].map((e,s)=>(0,Fa.jsx)("li",{className:"page-item "+(p===s+1?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>x(s+1),children:s+1})},s)),(0,Fa.jsx)("li",{className:"page-item "+(p===f?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>x(p+1),disabled:p===f,children:"Next"})})]})})]})}),o&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsx)("h5",{className:"modal-title",children:d?"Edit Department":"Add New Department"}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:k})]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=localStorage.getItem("token"),s=d?`/api/departments/${d._id}`:"/api/departments",t=d?"PUT":"POST",a=await fetch(s,{method:t,headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify(j)});if(!a.ok){const e=await a.json();throw new Error(e.message||"Failed to save department")}await N(),await w(),k(),l("")}catch(s){l(s.message)}},children:[(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"name",value:j.name,onChange:S,required:!0})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department Code *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"code",value:j.code,onChange:S,style:{textTransform:"uppercase"},required:!0})]})})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Description"}),(0,Fa.jsx)("textarea",{className:"form-control",name:"description",value:j.description,onChange:S,rows:"3"})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Budget"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",name:"budget",value:j.budget,onChange:S,min:"0"})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Location"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"location",value:j.location,onChange:S})]})})]}),(0,Fa.jsx)("div",{className:"mb-3",children:(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",name:"isActive",checked:j.isActive,onChange:S}),(0,Fa.jsx)("label",{className:"form-check-label",children:"Active Department"})]})})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:k,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",children:d?"Update Department":"Create Department"})]})]})]})})})]})},nl=()=>{var e;const{user:s}=Ya(),[t,a]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[l,o]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[x,f]=(0,r.useState)(1),[b,v]=(0,r.useState)(1),[g,j]=(0,r.useState)(0),[y,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[T,P]=(0,r.useState)(null),[R,E]=(0,r.useState)({firstName:"",middleName:"",lastName:"",employeeId:"",email:"",phoneNumber:"",dateOfBirth:"",gender:"",joiningDate:"",department:"",designation:"",employmentType:"",reportingManager:"",workLocation:"",role:"Employee",isActive:!0,password:""}),[_,A]=(0,r.useState)({});(0,r.useEffect)(()=>{D()},[x,c,u,h]);const D=async()=>{try{i(!0);const e={page:x,limit:10,search:c,role:u,department:h},s=await ua(e);a(s.data.users),v(s.data.totalPages),j(s.data.total)}catch(t){var e,s;o((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to fetch users")}finally{i(!1)}},L=e=>e?new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not provided",O=e=>({Admin:"bg-danger","Vice President":"bg-primary","HR BP":"bg-info","HR Manager":"bg-info","HR Executive":"bg-info","Team Manager":"bg-warning","Team Leader":"bg-warning",Employee:"bg-secondary"}[e]||"bg-secondary"),I=e=>{const{name:s,value:t}=e.target;E(e=>({...e,[s]:t}))},M=e=>{var s;P(e),A({firstName:e.firstName||"",middleName:e.middleName||"",lastName:e.lastName||"",employeeId:e.employeeId||"",email:e.email||"",phoneNumber:e.phoneNumber||"",dateOfBirth:e.dateOfBirth?e.dateOfBirth.split("T")[0]:"",gender:e.gender||"",joiningDate:e.joiningDate?e.joiningDate.split("T")[0]:"",department:(null===(s=e.department)||void 0===s?void 0:s.name)||e.department||"",designation:e.designation||"",employmentType:e.employmentType||"",manager:e.reportingManager||"",workLocation:e.workLocation||"",status:e.isActive?"Active":"Inactive"}),C(!0)},F=e=>{const{name:s,value:t}=e.target;A(e=>({...e,[s]:t}))};return n&&0===t.length?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("h2",{className:"mb-1",children:"User Management"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Manage all users and their information"})]}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsxs)("span",{className:"badge bg-primary fs-6",children:[g," Total Users"]}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>N(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-1"})," Add User"]})]})]}),(0,Fa.jsx)("div",{className:"card mb-4",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Search Users"}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-search"})}),(0,Fa.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by name, email, or employee ID...",value:c,onChange:e=>{d(e.target.value),f(1)}})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Filter by Role"}),(0,Fa.jsxs)("select",{className:"form-select",value:u,onChange:e=>{m(e.target.value),f(1)},children:[(0,Fa.jsx)("option",{value:"",children:"All Roles"}),(0,Fa.jsx)("option",{value:"Admin",children:"Admin"}),(0,Fa.jsx)("option",{value:"Vice President",children:"Vice President"}),(0,Fa.jsx)("option",{value:"HR BP",children:"HR BP"}),(0,Fa.jsx)("option",{value:"HR Manager",children:"HR Manager"}),(0,Fa.jsx)("option",{value:"HR Executive",children:"HR Executive"}),(0,Fa.jsx)("option",{value:"Team Manager",children:"Team Manager"}),(0,Fa.jsx)("option",{value:"Team Leader",children:"Team Leader"}),(0,Fa.jsx)("option",{value:"Employee",children:"Employee"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Filter by Department"}),(0,Fa.jsxs)("select",{className:"form-select",value:h,onChange:e=>{p(e.target.value),f(1)},children:[(0,Fa.jsx)("option",{value:"",children:"All Departments"}),(0,Fa.jsx)("option",{value:"Management",children:"Management"}),(0,Fa.jsx)("option",{value:"Human Resources",children:"Human Resources"}),(0,Fa.jsx)("option",{value:"Engineering",children:"Engineering"}),(0,Fa.jsx)("option",{value:"Operations",children:"Operations"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"\xa0"}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary w-100",onClick:()=>{d(""),m(""),p(""),f(1)},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset"]})]})]})})}),l&&(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[l,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>o("")})]}),(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsx)("div",{className:"card-body",children:n?(0,Fa.jsx)("div",{className:"text-center py-4",children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===t.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-people text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"mt-3 text-muted",children:"No users found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Try adjusting your search criteria"})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Role"}),(0,Fa.jsx)("th",{children:"Department"}),(0,Fa.jsx)("th",{children:"Employee ID"}),(0,Fa.jsx)("th",{children:"Contact"}),(0,Fa.jsx)("th",{children:"Joining Date"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:t.map(e=>{var t;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px"},children:(0,Fa.jsx)("i",{className:"bi bi-person text-white"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"fw-semibold",children:[e.firstName," ",e.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:e.email})]})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${O(e.role)}`,children:e.role})}),(0,Fa.jsx)("td",{children:(null===(t=e.department)||void 0===t?void 0:t.name)||e.department||"Not assigned"}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("code",{children:e.employeeId||"Not assigned"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("div",{children:(0,Fa.jsx)("small",{className:"d-block",children:e.phoneNumber||"Not provided"})})}),(0,Fa.jsx)("td",{children:L(e.joiningDate)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge "+(e.isActive?"bg-success":"bg-danger"),children:e.isActive?"Active":"Inactive"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group",role:"group",children:[(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",title:"View Profile",onClick:()=>(e=>{P(e),k(!0)})(e),children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),("Admin"===(null===s||void 0===s?void 0:s.role)||"Vice President"===(null===s||void 0===s?void 0:s.role)||"HR Manager"===(null===s||void 0===s?void 0:s.role))&&(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-secondary",title:"Edit User",onClick:()=>M(e),children:(0,Fa.jsx)("i",{className:"bi bi-pencil"})})]})})]},e._id)})})]})}),b>1&&(0,Fa.jsx)("nav",{className:"mt-4",children:(0,Fa.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===x?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>f(x-1),disabled:1===x,children:"Previous"})}),[...Array(b)].map((e,s)=>(0,Fa.jsx)("li",{className:"page-item "+(x===s+1?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>f(s+1),children:s+1})},s)),(0,Fa.jsx)("li",{className:"page-item "+(x===b?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>f(x+1),disabled:x===b,children:"Next"})})]})})]})})}),y&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsx)("div",{className:"modal-content",children:(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={firstName:R.firstName,middleName:R.middleName,lastName:R.lastName,employeeId:R.employeeId,email:R.email,phoneNumber:R.phoneNumber,dateOfBirth:R.dateOfBirth,gender:R.gender,joiningDate:R.joiningDate,department:R.department,designation:R.designation,employmentType:R.employmentType,reportingManager:R.manager,workLocation:R.workLocation,isActive:"Active"===R.status,username:R.username,password:R.password};await pa(e),N(!1),E({firstName:"",middleName:"",lastName:"",employeeId:"",email:"",phoneNumber:"",dateOfBirth:"",gender:"",joiningDate:"",department:"",designation:"",employmentType:"",manager:"",workLocation:"",status:"Active",username:"",password:""}),D(),o("")}catch(a){var s,t;o((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to add user")}},children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsx)("h5",{className:"modal-title",children:"Add New User"}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>N(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"First Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"firstName",value:R.firstName,onChange:I,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Middle Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"middleName",value:R.middleName,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"lastName",value:R.lastName,onChange:I,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employee ID *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"employeeId",value:R.employeeId,onChange:I,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Email Address *"}),(0,Fa.jsx)("input",{type:"email",className:"form-control",name:"email",value:R.email,onChange:I,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Phone Number"}),(0,Fa.jsx)("input",{type:"tel",className:"form-control",name:"phoneNumber",value:R.phoneNumber,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Date of Birth"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"dateOfBirth",value:R.dateOfBirth,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Gender"}),(0,Fa.jsxs)("select",{className:"form-select",name:"gender",value:R.gender,onChange:I,children:[(0,Fa.jsx)("option",{value:"",children:"Select Gender"}),(0,Fa.jsx)("option",{value:"Male",children:"Male"}),(0,Fa.jsx)("option",{value:"Female",children:"Female"}),(0,Fa.jsx)("option",{value:"Other",children:"Other"}),(0,Fa.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Joining Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"joiningDate",value:R.joiningDate,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"department",value:R.department,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Designation / Job Title"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"designation",value:R.designation,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employment Type"}),(0,Fa.jsxs)("select",{className:"form-select",name:"employmentType",value:R.employmentType,onChange:I,children:[(0,Fa.jsx)("option",{value:"",children:"Select Employment Type"}),(0,Fa.jsx)("option",{value:"Full-time",children:"Full-time"}),(0,Fa.jsx)("option",{value:"Part-time",children:"Part-time"}),(0,Fa.jsx)("option",{value:"Contract",children:"Contract"}),(0,Fa.jsx)("option",{value:"Internship",children:"Internship"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Manager / Supervisor"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"manager",value:R.manager,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Work Location"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"workLocation",value:R.workLocation,onChange:I})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",name:"status",value:R.status,onChange:I,children:[(0,Fa.jsx)("option",{value:"Active",children:"Active"}),(0,Fa.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,Fa.jsx)("option",{value:"On leave",children:"On leave"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Username *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"username",value:R.username,onChange:I,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Password *"}),(0,Fa.jsx)("input",{type:"password",className:"form-control",name:"password",value:R.password,onChange:I,required:!0})]})]})}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>N(!1),children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Add User"})]})]})})})}),w&&T&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:["User Profile - ",T.firstName," ",T.lastName]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>k(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center mb-3",children:[(0,Fa.jsx)("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center me-3",style:{width:"60px",height:"60px"},children:(0,Fa.jsx)("i",{className:"bi bi-person text-white fs-3"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h4",{className:"mb-1",children:[T.firstName," ",T.middleName," ",T.lastName]}),(0,Fa.jsx)("span",{className:`badge ${O(T.role)}`,children:T.role})]})]})}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Employee ID"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.employeeId||"Not assigned"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Email Address"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.email})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Phone Number"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.phoneNumber||"Not provided"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Date of Birth"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:L(T.dateOfBirth)})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Gender"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.gender||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Joining Date"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:L(T.joiningDate)})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Department"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(null===(e=T.department)||void 0===e?void 0:e.name)||T.department||"Not assigned"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Designation"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.designation||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Employment Type"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.employmentType||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Work Location"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:T.workLocation||"Not specified"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label fw-bold",children:"Status"}),(0,Fa.jsx)("p",{className:"form-control-plaintext",children:(0,Fa.jsx)("span",{className:"badge "+(T.isActive?"bg-success":"bg-danger"),children:T.isActive?"Active":"Inactive"})})]})]})}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>k(!1),children:"Close"}),("Admin"===(null===s||void 0===s?void 0:s.role)||"Vice President"===(null===s||void 0===s?void 0:s.role)||"HR Manager"===(null===s||void 0===s?void 0:s.role))&&(0,Fa.jsxs)("button",{type:"button",className:"btn btn-primary",onClick:()=>{k(!1),M(T)},children:[(0,Fa.jsx)("i",{className:"bi bi-pencil me-1"}),"Edit User"]})]})]})})}),S&&T&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsx)("div",{className:"modal-content",children:(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={firstName:_.firstName,middleName:_.middleName,lastName:_.lastName,employeeId:_.employeeId,email:_.email,phoneNumber:_.phoneNumber,dateOfBirth:_.dateOfBirth,gender:_.gender,joiningDate:_.joiningDate,department:_.department,designation:_.designation,employmentType:_.employmentType,reportingManager:_.manager,workLocation:_.workLocation,isActive:"Active"===_.status};await xa(T._id,e),C(!1),P(null),A({}),D(),o("")}catch(a){var s,t;o((null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to update user")}},children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:["Edit User - ",T.firstName," ",T.lastName]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>C(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"First Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"firstName",value:_.firstName,onChange:F,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Middle Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"middleName",value:_.middleName,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"lastName",value:_.lastName,onChange:F,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employee ID *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"employeeId",value:_.employeeId,onChange:F,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Email Address *"}),(0,Fa.jsx)("input",{type:"email",className:"form-control",name:"email",value:_.email,onChange:F,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Phone Number"}),(0,Fa.jsx)("input",{type:"tel",className:"form-control",name:"phoneNumber",value:_.phoneNumber,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Date of Birth"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"dateOfBirth",value:_.dateOfBirth,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Gender"}),(0,Fa.jsxs)("select",{className:"form-select",name:"gender",value:_.gender,onChange:F,children:[(0,Fa.jsx)("option",{value:"",children:"Select Gender"}),(0,Fa.jsx)("option",{value:"Male",children:"Male"}),(0,Fa.jsx)("option",{value:"Female",children:"Female"}),(0,Fa.jsx)("option",{value:"Other",children:"Other"}),(0,Fa.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Joining Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"joiningDate",value:_.joiningDate,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"department",value:_.department,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Designation / Job Title"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"designation",value:_.designation,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employment Type"}),(0,Fa.jsxs)("select",{className:"form-select",name:"employmentType",value:_.employmentType,onChange:F,children:[(0,Fa.jsx)("option",{value:"",children:"Select Employment Type"}),(0,Fa.jsx)("option",{value:"Full-time",children:"Full-time"}),(0,Fa.jsx)("option",{value:"Part-time",children:"Part-time"}),(0,Fa.jsx)("option",{value:"Contract",children:"Contract"}),(0,Fa.jsx)("option",{value:"Internship",children:"Internship"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Manager / Supervisor"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"manager",value:_.manager,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Work Location"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"workLocation",value:_.workLocation,onChange:F})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",name:"status",value:_.status,onChange:F,children:[(0,Fa.jsx)("option",{value:"Active",children:"Active"}),(0,Fa.jsx)("option",{value:"Inactive",children:"Inactive"})]})]})]})}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>C(!1),children:"Cancel"}),(0,Fa.jsxs)("button",{type:"submit",className:"btn btn-primary",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-1"}),"Update User"]})]})]})})})})]})},rl=()=>{const e=se(),[s,t]=(0,r.useState)({firstName:"",middleName:"",lastName:"",employeeId:"",email:"",phoneNumber:"",dateOfBirth:"",gender:"",joiningDate:"",department:"",designation:"",employmentType:"",manager:"",workLocation:"",status:"Active",role:"Employee",password:""}),[a,n]=(0,r.useState)(""),[i,l]=(0,r.useState)(!1),o=e=>{const{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))};return(0,Fa.jsxs)("div",{className:"container-fluid py-4",children:[(0,Fa.jsx)("h2",{children:"Add New User"}),a&&(0,Fa.jsx)("div",{className:"alert alert-danger",role:"alert",children:a}),(0,Fa.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),l(!0),n("");try{const t={firstName:s.firstName.trim(),middleName:s.middleName.trim(),lastName:s.lastName.trim(),employeeId:s.employeeId.trim(),email:s.email.trim(),phoneNumber:s.phoneNumber.trim(),dateOfBirth:s.dateOfBirth||void 0,gender:s.gender||void 0,joiningDate:s.joiningDate||void 0,department:s.department.trim()||void 0,designation:s.designation.trim()||void 0,employmentType:s.employmentType||void 0,reportingManager:s.manager.trim()||void 0,workLocation:s.workLocation||void 0,isActive:"Active"===s.status,role:s.role,password:s.password};Object.keys(t).forEach(e=>{""!==t[e]&&void 0!==t[e]||delete t[e]}),await pa(t),e("/admin/users")}catch(c){var a,r;if(console.error("Create user error:",c),null!==(a=c.response)&&void 0!==a&&null!==(r=a.data)&&void 0!==r&&r.errors){const e=c.response.data.errors.map(e=>e.msg||e.message).join(", ");n(e)}else{var i,o;n((null===(i=c.response)||void 0===i||null===(o=i.data)||void 0===o?void 0:o.message)||"Failed to add user")}}finally{l(!1)}},children:[(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"First Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"firstName",value:s.firstName,onChange:o,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Middle Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"middleName",value:s.middleName,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Last Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"lastName",value:s.lastName,onChange:o,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employee ID *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"employeeId",value:s.employeeId,onChange:o,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Email Address *"}),(0,Fa.jsx)("input",{type:"email",className:"form-control",name:"email",value:s.email,onChange:o,required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Phone Number"}),(0,Fa.jsx)("input",{type:"tel",className:"form-control",name:"phoneNumber",value:s.phoneNumber,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Date of Birth"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"dateOfBirth",value:s.dateOfBirth,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Gender"}),(0,Fa.jsxs)("select",{className:"form-select",name:"gender",value:s.gender,onChange:o,children:[(0,Fa.jsx)("option",{value:"",children:"Select Gender"}),(0,Fa.jsx)("option",{value:"Male",children:"Male"}),(0,Fa.jsx)("option",{value:"Female",children:"Female"}),(0,Fa.jsx)("option",{value:"Other",children:"Other"}),(0,Fa.jsx)("option",{value:"Prefer not to say",children:"Prefer not to say"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Joining Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"joiningDate",value:s.joiningDate,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Department"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"department",value:s.department,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Designation / Job Title"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"designation",value:s.designation,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employment Type"}),(0,Fa.jsxs)("select",{className:"form-select",name:"employmentType",value:s.employmentType,onChange:o,children:[(0,Fa.jsx)("option",{value:"",children:"Select Employment Type"}),(0,Fa.jsx)("option",{value:"Full-time",children:"Full-time"}),(0,Fa.jsx)("option",{value:"Part-time",children:"Part-time"}),(0,Fa.jsx)("option",{value:"Contract",children:"Contract"}),(0,Fa.jsx)("option",{value:"Internship",children:"Internship"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Manager / Supervisor"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"manager",value:s.manager,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Work Location"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",name:"workLocation",value:s.workLocation,onChange:o})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Role *"}),(0,Fa.jsxs)("select",{className:"form-select",name:"role",value:s.role,onChange:o,required:!0,children:[(0,Fa.jsx)("option",{value:"Employee",children:"Employee"}),(0,Fa.jsx)("option",{value:"Team Leader",children:"Team Leader"}),(0,Fa.jsx)("option",{value:"Team Manager",children:"Team Manager"}),(0,Fa.jsx)("option",{value:"HR Executive",children:"HR Executive"}),(0,Fa.jsx)("option",{value:"HR Manager",children:"HR Manager"}),(0,Fa.jsx)("option",{value:"HR BP",children:"HR BP"}),(0,Fa.jsx)("option",{value:"Vice President",children:"Vice President"}),(0,Fa.jsx)("option",{value:"Admin",children:"Admin"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",name:"status",value:s.status,onChange:o,children:[(0,Fa.jsx)("option",{value:"Active",children:"Active"}),(0,Fa.jsx)("option",{value:"Inactive",children:"Inactive"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-12",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Password *"}),(0,Fa.jsx)("input",{type:"password",className:"form-control",name:"password",value:s.password,onChange:o,required:!0,minLength:"6",placeholder:"Minimum 6 characters"})]})]}),(0,Fa.jsxs)("div",{className:"mt-4",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),"Adding User..."]}):"Add User"}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary ms-2",onClick:()=>e("/admin/users"),disabled:i,children:"Cancel"})]})]})]})};const il=new class{constructor(){this.isTracking=!1,this.lastActivityTime=Date.now(),this.activityUpdateInterval=null,this.inactivityCheckInterval=null,this.autoCheckoutWarningShown=!1,this.autoCheckoutTimeout=6e5,this.activityUpdateFrequency=12e4,this.inactivityCheckFrequency=3e4,this.handleActivity=this.handleActivity.bind(this),this.updateActivity=this.updateActivity.bind(this),this.checkInactivity=this.checkInactivity.bind(this)}startTracking(){this.isTracking||(this.isTracking=!0,this.lastActivityTime=Date.now(),this.autoCheckoutWarningShown=!1,document.addEventListener("mousemove",this.handleActivity),document.addEventListener("mousedown",this.handleActivity),document.addEventListener("mouseup",this.handleActivity),document.addEventListener("click",this.handleActivity),document.addEventListener("keydown",this.handleActivity),document.addEventListener("keyup",this.handleActivity),document.addEventListener("scroll",this.handleActivity),this.activityUpdateInterval=setInterval(this.updateActivity,this.activityUpdateFrequency),this.inactivityCheckInterval=setInterval(this.checkInactivity,this.inactivityCheckFrequency),console.log("Mouse activity tracking started"))}stopTracking(){this.isTracking&&(this.isTracking=!1,document.removeEventListener("mousemove",this.handleActivity),document.removeEventListener("mousedown",this.handleActivity),document.removeEventListener("mouseup",this.handleActivity),document.removeEventListener("click",this.handleActivity),document.removeEventListener("keydown",this.handleActivity),document.removeEventListener("keyup",this.handleActivity),document.removeEventListener("scroll",this.handleActivity),this.activityUpdateInterval&&(clearInterval(this.activityUpdateInterval),this.activityUpdateInterval=null),this.inactivityCheckInterval&&(clearInterval(this.inactivityCheckInterval),this.inactivityCheckInterval=null),console.log("Mouse activity tracking stopped"))}handleActivity(){this.lastActivityTime=Date.now(),this.autoCheckoutWarningShown=!1}async updateActivity(){if(this.isTracking)try{await ca()}catch(e){console.error("Failed to update activity:",e)}}checkInactivity(){if(!this.isTracking)return;const e=Date.now()-this.lastActivityTime,s=new Date,t=s.getHours(),a=s.getMinutes();if(!(t>18||18===t&&a>=0))return;e>=this.autoCheckoutTimeout-12e4&&!this.autoCheckoutWarningShown&&(this.showAutoCheckoutWarning(),this.autoCheckoutWarningShown=!0),e>=this.autoCheckoutTimeout&&this.handleAutoCheckout()}showAutoCheckoutWarning(){const e=Math.ceil((this.autoCheckoutTimeout-(Date.now()-this.lastActivityTime))/1e3/60),s=document.createElement("div");s.className="modal fade show",s.style.display="block",s.style.backgroundColor="rgba(0,0,0,0.5)",s.innerHTML=`\n      <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n          <div class="modal-header bg-warning text-dark">\n            <h5 class="modal-title">\n              <i class="bi bi-exclamation-triangle me-2"></i>\n              Auto-Checkout Warning\n            </h5>\n          </div>\n          <div class="modal-body text-center">\n            <div class="mb-3">\n              <i class="bi bi-clock text-warning" style="font-size: 3rem;"></i>\n            </div>\n            <h6>You will be automatically checked out in ${e} minute(s) due to inactivity.</h6>\n            <p class="text-muted">Move your mouse or click anywhere to stay active.</p>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-warning" onclick="this.closest('.modal').remove()">\n              <i class="bi bi-check-circle me-1"></i>\n              I'm Still Here\n            </button>\n          </div>\n        </div>\n      </div>\n    `,document.body.appendChild(s),setTimeout(()=>{s.parentNode&&s.remove()},3e4)}async handleAutoCheckout(){try{this.stopTracking(),this.showAutoCheckoutNotification(),await da(),setTimeout(()=>{window.location.reload()},3e3)}catch(e){console.error("Auto-checkout failed:",e)}}showAutoCheckoutNotification(){const e=document.createElement("div");e.className="modal fade show",e.style.display="block",e.style.backgroundColor="rgba(0,0,0,0.5)",e.innerHTML='\n      <div class="modal-dialog modal-dialog-centered">\n        <div class="modal-content">\n          <div class="modal-header bg-info text-white">\n            <h5 class="modal-title">\n              <i class="bi bi-info-circle me-2"></i>\n              Auto-Checkout Completed\n            </h5>\n          </div>\n          <div class="modal-body text-center">\n            <div class="mb-3">\n              <i class="bi bi-check-circle text-success" style="font-size: 3rem;"></i>\n            </div>\n            <h6>You have been automatically checked out due to inactivity.</h6>\n            <p class="text-muted">Your attendance has been updated automatically.</p>\n            <div class="spinner-border text-primary mt-2" role="status">\n              <span class="visually-hidden">Refreshing...</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(e)}getActivityStatus(){const e=Date.now()-this.lastActivityTime;return{isTracking:this.isTracking,lastActivityTime:this.lastActivityTime,inactiveTime:e,inactiveMinutes:Math.floor(e/1e3/60)}}setAutoCheckoutTimeout(e){this.autoCheckoutTimeout=60*e*1e3}},ll=()=>{var e,s,t,a,n,i,l,o,c,d,u,m;const{user:h}=Ya(),p=se(),[x,f]=(0,r.useState)(null),[b,v]=(0,r.useState)([]),[g,j]=(0,r.useState)(null),[y,N]=(0,r.useState)(!0),[w,k]=(0,r.useState)(!1),[S,C]=(0,r.useState)(!1),[T,P]=(0,r.useState)(!1),[R,E]=(0,r.useState)(null),[_,A]=(0,r.useState)((new Date).getMonth()+1),[D,L]=(0,r.useState)((new Date).getFullYear()),[O,I]=(0,r.useState)("Office"),[M,F]=(0,r.useState)(""),[$,z]=(0,r.useState)(new Date),[H,U]=(0,r.useState)([]),[q,B]=(0,r.useState)(!1),[W,V]=(0,r.useState)({checkInTime:"13:00",checkOutTime:"21:00"}),[J,G]=(0,r.useState)(null),[K,Y]=(0,r.useState)({isTracking:!1}),[Q,X]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=setInterval(()=>{z(new Date)},6e4);return()=>clearInterval(e)},[]);const te=(0,r.useCallback)(async()=>{try{const e=await ia();f(e.data.attendance)}catch(e){console.error("Error fetching today attendance:",e)}},[]),ae=(0,r.useCallback)(async()=>{try{const e=await ra({month:_,year:D,limit:31});v(e.data.attendance)}catch(e){console.error("Error fetching attendance history:",e)}},[_,D]),ne=(0,r.useCallback)(async()=>{try{const e=await la({month:_,year:D});j(e.data.summary),N(!1)}catch(e){console.error("Error fetching attendance summary:",e),N(!1)}},[_,D]),re=(0,r.useCallback)(async()=>{try{const e=await fetch("/api/regularization/employee",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();U(s.data||[])}}catch(e){console.error("Error fetching regularizations:",e)}},[]),ie=(0,r.useCallback)(async()=>{try{const e=await fetch("/api/system/work-hours",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();s.success&&s.workHours&&V({checkInTime:s.workHours.checkInTime||"09:00",checkOutTime:s.workHours.checkOutTime||"18:00"})}}catch(e){console.error("Error fetching work hours:",e),V({checkInTime:"09:00",checkOutTime:"18:00"})}},[]);(0,r.useEffect)(()=>{te(),ae(),ne(),re(),ie()},[te,ae,ne,re,ie]),(0,r.useEffect)(()=>{null===x||void 0===x||!x.checkIn||null!==x&&void 0!==x&&x.checkOut?il.stopTracking():il.startTracking();const e=setInterval(()=>{Y(il.getActivityStatus())},3e4);return()=>{clearInterval(e),il.stopTracking()}},[x]);const le=e=>e?new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}):"-",oe=e=>e?new Date(e).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}):"-",ce=e=>{if(!e)return"0h 0m";const s=Math.floor(e);return`${s}h ${Math.round(60*(e-s))}m`},de=e=>{if(!e)return"0m";const s=Math.floor(e/60),t=Math.floor(e%60);let a="";return s>0&&(a+=`${s}h `),(t>0||0===s)&&(a+=`${t}m`),a.trim()},ue=e=>{if(!e)return"";const[s,t]=e.split(":"),a=parseInt(s);return`${0===a?12:a>12?a-12:a}:${t} ${a>=12?"PM":"AM"}`},me=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},he=e=>(null===e||void 0===e?void 0:e.startsWith("image/"))||(null===e||void 0===e?void 0:e.includes("pdf")),pe=e=>{const s=`http://localhost:5001${e.fileUrl}`;window.open(s,"_blank")},xe=e=>{if(!e)return"0h 0m";const s=new Date(e),t=$.getTime()-s.getTime(),a=Math.floor(t/6e4);if(a<=0)return"0h 0m";return`${Math.floor(a/60)}h ${a%60}m`},fe=e=>(0,Fa.jsx)("span",{className:`badge ${{Present:"bg-success",Absent:"bg-danger",Late:"bg-warning","Half Day":"bg-info","On Leave":"bg-secondary",Holiday:"bg-primary"}[e]||"bg-secondary"}`,children:e});return y?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("h2",{children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"My Attendance"]}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-primary",onClick:()=>p("/employee/regularization/request"),children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Request Regularization"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-info",onClick:()=>B(!q),children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Requests (",H.length,")"]}),(0,Fa.jsx)("select",{className:"form-select",value:_,onChange:e=>A(parseInt(e.target.value)),style:{width:"auto"},children:Array.from({length:12},(e,s)=>(0,Fa.jsx)("option",{value:s+1,children:new Date(0,s).toLocaleString("en-US",{month:"long"})},s+1))}),(0,Fa.jsx)("select",{className:"form-select",value:D,onChange:e=>L(parseInt(e.target.value)),style:{width:"auto"},children:Array.from({length:10},(e,s)=>{const t=(new Date).getFullYear()-5+s;return(0,Fa.jsx)("option",{value:t,children:t},t)})})]})]})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-day me-2"}),"Today's Attendance - ",oe(new Date)]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Check In"}),(0,Fa.jsx)("h4",{className:"mb-0 text-success",children:le(null===x||void 0===x?void 0:x.checkIn)})]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Check Out"}),(0,Fa.jsx)("h4",{className:"mb-0 text-danger",children:le(null===x||void 0===x?void 0:x.checkOut)})]})})]}),(0,Fa.jsxs)("div",{className:"row mt-3",children:[(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:null!==x&&void 0!==x&&x.checkOut?"Total Hours":"Current Hours"}),(0,Fa.jsx)("h4",{className:"mb-0 text-info",children:null!==x&&void 0!==x&&x.checkOut?ce(null===x||void 0===x?void 0:x.totalHours):xe(null===x||void 0===x?void 0:x.checkIn)}),!(null!==x&&void 0!==x&&x.checkOut)&&(null===x||void 0===x?void 0:x.checkIn)&&(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),"Live counter"]})]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Status"}),(0,Fa.jsx)("h4",{className:"mb-0",children:fe(x?x.status:"Absent")}),(null===x||void 0===x?void 0:x.autoCheckedOut)&&(0,Fa.jsxs)("small",{className:"text-info d-block mt-1",children:[(0,Fa.jsx)("i",{className:"bi bi-robot"})," Auto-checked out"]})]})})]})]}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)("div",{className:"card bg-light",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h6",{className:"card-title",children:"Quick Actions"}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Location"}),(0,Fa.jsxs)("select",{className:"form-select",value:O,onChange:e=>I(e.target.value),disabled:(null===x||void 0===x?void 0:x.checkIn)&&(null===x||void 0===x?void 0:x.checkOut),children:[(0,Fa.jsx)("option",{value:"Office",children:"Office"}),(0,Fa.jsx)("option",{value:"Remote",children:"Remote"}),(0,Fa.jsx)("option",{value:"Client Site",children:"Client Site"})]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Notes (Optional)"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"2",value:M,onChange:e=>F(e.target.value),placeholder:"Add any notes...",maxLength:"300"})]}),(0,Fa.jsx)("div",{className:"d-grid gap-2",children:null!==x&&void 0!==x&&x.checkIn?null!==x&&void 0!==x&&x.checkOut?(0,Fa.jsxs)("div",{className:"alert alert-success mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"You have completed your attendance for today!",J&&(0,Fa.jsxs)("div",{className:"mt-2",children:[(0,Fa.jsx)("small",{className:"d-block",children:(0,Fa.jsx)("strong",{children:"Smart Overtime Summary:"})}),J.shortageHours>0&&(0,Fa.jsxs)("small",{className:"d-block text-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history"})," Shortage Reduced: ",ce(J.shortageHours)]}),J.adjustedOvertimeHours>0&&(0,Fa.jsxs)("small",{className:"d-block text-success",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle"})," Final Overtime: ",ce(J.adjustedOvertimeHours)]})]})]}):(0,Fa.jsx)("button",{className:"btn btn-danger",onClick:async()=>{C(!0);try{const e=await na({notes:M});if(f(e.data.attendance),G(e.data.smartOvertimeInfo),F(""),il.stopTracking(),e.data.smartOvertimeInfo){const s=e.data.smartOvertimeInfo;let t="Check-out successful!";s.shortageHours>0&&s.adjustedOvertimeHours>0?t+=`\n\nSmart Overtime Applied:\n\u2022 Shortage Hours Reduced: ${ce(s.shortageHours)}\n\u2022 Final Overtime: ${ce(s.adjustedOvertimeHours)}`:s.shortageHours>0?t+=`\n\nShortage Hours Reduced: ${ce(s.shortageHours)}`:s.adjustedOvertimeHours>0&&(t+=`\n\nOvertime Earned: ${ce(s.adjustedOvertimeHours)}`),alert(t)}else alert("Check-out successful!");ae(),ne()}catch(t){var e,s;alert((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Check-out failed")}finally{C(!1)}},disabled:S,children:S?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Checking Out..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-box-arrow-right me-2"}),"Check Out"]})}):(0,Fa.jsx)("button",{className:"btn btn-success",onClick:async()=>{k(!0);try{const e=await aa({location:O,notes:M});f(e.data.attendance),F(""),e.data.isLateArrival&&e.data.lateMinutes>0?(E({lateMinutes:e.data.lateMinutes,checkInTime:e.data.attendance.checkIn}),P(!0)):alert("Check-in successful!"),ae(),ne()}catch(t){var e,s;alert((null===(e=t.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Check-in failed")}finally{k(!1)}},disabled:w,children:w?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Checking In..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-box-arrow-in-right me-2"}),"Check In"]})})})]})})})]})})]})})}),q&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header bg-info bg-opacity-10",children:(0,Fa.jsxs)("h5",{className:"mb-0 text-info",children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Regularization Requests"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[H.length>0?(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-sm",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Type"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Submitted"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:H.slice(0,5).map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{className:"font-monospace",children:e.regularizationId})}),(0,Fa.jsx)("td",{children:new Date(e.attendanceDate).toLocaleDateString()}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-info bg-opacity-75 text-dark",children:e.requestType})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge "+("Pending"===e.status?"bg-warning":"Approved"===e.status?"bg-success":"Rejected"===e.status?"bg-danger":"bg-secondary"),children:e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:new Date(e.submittedDate).toLocaleDateString()})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{ee(e),X(!0)},children:(0,Fa.jsx)("i",{className:"bi bi-eye"})})})]},e._id))})]})}):(0,Fa.jsxs)("div",{className:"text-center py-3",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox text-muted",style:{fontSize:"2rem"}}),(0,Fa.jsx)("p",{className:"text-muted mt-2 mb-0",children:"No regularization requests found"}),(0,Fa.jsxs)("button",{className:"btn btn-primary btn-sm mt-2",onClick:()=>p("/employee/regularization/request"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-1"}),"Create Request"]})]}),H.length>5&&(0,Fa.jsx)("div",{className:"text-center mt-3",children:(0,Fa.jsxs)("button",{className:"btn btn-outline-info btn-sm",onClick:()=>p("/employee/regularization"),children:["View All Requests (",H.length,")"]})})]})]})})}),g&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up me-2"}),"Monthly Summary - ",new Date(0,_-1).toLocaleString("en-US",{month:"long"})," ",D]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row text-center",children:[(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-primary mb-1",children:g.totalDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Total Days"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-success mb-1",children:g.presentDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Present"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-danger mb-1",children:g.absentDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Absent"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-warning mb-1",children:g.lateDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Late Days"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-info mb-1",children:ce(g.totalHours)}),(0,Fa.jsx)("small",{className:"text-muted",children:"Total Hours"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-secondary mb-1",children:ce(g.overtimeHours)}),(0,Fa.jsx)("small",{className:"text-muted",children:"Overtime"})]})}),(0,Fa.jsx)("div",{className:"col-lg-2 col-md-3 col-sm-4 col-6 mb-3",children:(0,Fa.jsxs)("div",{className:"p-3 border rounded h-100",children:[(0,Fa.jsx)("h4",{className:"text-danger mb-1",children:ce(g.shortageHours||0)}),(0,Fa.jsx)("small",{className:"text-muted",children:"Shortage Hours"})]})})]})})]})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Attendance History"]})}),(0,Fa.jsx)("div",{className:"card-body",children:b.length>0?(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-striped",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Check In"}),(0,Fa.jsx)("th",{children:"Check Out"}),(0,Fa.jsx)("th",{children:"Total Hours"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Location"}),(0,Fa.jsx)("th",{children:"Notes"})]})}),(0,Fa.jsx)("tbody",{children:b.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:oe(e.date)}),(0,Fa.jsxs)("td",{children:[le(e.checkIn),e.isLate&&(0,Fa.jsxs)("small",{className:"text-warning ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle"}),"Late by ",de(e.lateMinutes)]})]}),(0,Fa.jsxs)("td",{children:[le(e.checkOut),e.isEarly&&(0,Fa.jsxs)("small",{className:"text-info ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle"}),"Early by ",de(e.earlyMinutes)]})]}),(0,Fa.jsxs)("td",{children:[e.checkOut?ce(e.totalHours):xe(e.checkIn),!e.checkOut&&e.checkIn&&(0,Fa.jsxs)("small",{className:"text-info ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),"Current"]}),e.overtime>0&&(0,Fa.jsxs)("small",{className:"text-success ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle"}),"+",ce(e.overtime)," OT"]}),e.shortageHours>0&&(0,Fa.jsxs)("small",{className:"text-warning ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-dash-circle"}),"-",ce(e.shortageHours)," Shortage"]}),e.adjustedOvertimeHours>0&&e.adjustedOvertimeHours!==e.overtime&&(0,Fa.jsxs)("small",{className:"text-info ms-1",children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-right"}),"Smart: ",ce(e.adjustedOvertimeHours)]})]}),(0,Fa.jsx)("td",{children:fe(e.status)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-light text-dark",children:e.location})}),(0,Fa.jsxs)("td",{children:[e.notes&&(0,Fa.jsx)("small",{className:"text-muted",children:e.notes}),e.isRegularized&&(0,Fa.jsxs)("small",{className:"text-warning d-block",children:[(0,Fa.jsx)("i",{className:"bi bi-pencil-square"}),"Regularized"]}),e.autoCheckedOut&&(0,Fa.jsxs)("small",{className:"text-info d-block",children:[(0,Fa.jsx)("i",{className:"bi bi-robot"}),"Auto-checked out"]})]})]},e._id))})]})}):(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-x text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"text-muted mt-2",children:"No attendance records found"}),(0,Fa.jsxs)("p",{className:"text-muted",children:["No attendance records found for ",new Date(0,_-1).toLocaleString("en-US",{month:"long"})," ",D]})]})})]})})}),Q&&Z&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-file-text me-2"}),"Regularization Request Details"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>X(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-2"}),"Request Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Request ID:"}),(0,Fa.jsx)("p",{className:"mb-2",children:Z.regularizationId})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Date:"}),(0,Fa.jsx)("p",{className:"mb-2",children:oe(Z.attendanceDate)})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Type:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-info",children:Z.requestType})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Priority:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:`badge ${(e=>{switch(e){case"Urgent":return"bg-danger";case"High":return"bg-warning";case"Normal":return"bg-info";default:return"bg-secondary"}})(Z.priority)}`,children:Z.priority})})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Reason:"}),(0,Fa.jsx)("p",{className:"mb-2",children:Z.reason})]})]})})]}),(Z.requestedCheckIn||Z.requestedCheckOut)&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"Requested Times"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[Z.requestedCheckIn&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-In:"}),(0,Fa.jsx)("p",{className:"mb-2",children:le(Z.requestedCheckIn)})]}),Z.requestedCheckOut&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-Out:"}),(0,Fa.jsx)("p",{className:"mb-2",children:le(Z.requestedCheckOut)})]}),Z.requestedStatus&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Requested Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:Z.requestedStatus})})]})]})})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Status Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge "+("Pending"===Z.status?"bg-warning":"Approved"===Z.status?"bg-success":"Rejected"===Z.status?"bg-danger":"bg-secondary"),children:Z.status})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Level:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:Z.currentLevel||"Team Manager"})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Submitted:"}),(0,Fa.jsx)("p",{className:"mb-2",children:oe(Z.submittedDate)})]}),Z.approvedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Approved:"}),(0,Fa.jsx)("p",{className:"mb-2",children:oe(Z.approvedDate)})]}),Z.rejectedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Rejected:"}),(0,Fa.jsx)("p",{className:"mb-2",children:oe(Z.rejectedDate)})]}),Z.rejectionReason&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Rejection Reason:"}),(0,Fa.jsx)("p",{className:"mb-2 text-danger",children:Z.rejectionReason})]})]})})]}),Z.supportingDocuments&&Z.supportingDocuments.length>0&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-paperclip me-2"}),"Supporting Documents (",Z.supportingDocuments.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body",children:Z.supportingDocuments.map((e,s)=>{var t,a;return(0,Fa.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:(a=e.mimeType,null!==a&&void 0!==a&&a.startsWith("image/")?"bi-file-earmark-image":null!==a&&void 0!==a&&a.includes("pdf")?"bi-file-earmark-pdf":null!==a&&void 0!==a&&a.includes("word")?"bi-file-earmark-word":null!==a&&void 0!==a&&a.includes("excel")||null!==a&&void 0!==a&&a.includes("spreadsheet")?"bi-file-earmark-excel":"bi-file-earmark")+" text-primary me-2",style:{fontSize:"1.5rem"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-bold",children:e.originalName}),(0,Fa.jsxs)("small",{className:"text-muted",children:[me(e.fileSize)," \u2022 Uploaded ",oe(e.uploadedAt)]})]})]}),(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",children:[he(e.mimeType)&&(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>pe(e),title:"Preview",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-success",onClick:()=>(e=>{const s=`http://localhost:5001${e.fileUrl}`,t=e.createElement("a");t.href=s,t.download=e.originalName,e.body.appendChild(t),t.click(),e.body.removeChild(t)})(e),title:"Download",children:(0,Fa.jsx)("i",{className:"bi bi-download"})})]})]}),(null===(t=e.mimeType)||void 0===t?void 0:t.startsWith("image/"))&&(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsx)("img",{src:`http://localhost:5001${e.fileUrl}`,alt:e.originalName,className:"img-fluid rounded",style:{maxHeight:"200px",cursor:"pointer"},onClick:()=>pe(e)})})]},s)})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Approval History"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"timeline",children:["Pending"!==(null===(e=Z.teamManagerApproval)||void 0===e?void 0:e.status)&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===(null===(s=Z.teamManagerApproval)||void 0===s?void 0:s.status)?"bg-success":"bg-danger"} me-2`,children:(0,Fa.jsx)("i",{className:"bi "+("Approved"===(null===(t=Z.teamManagerApproval)||void 0===t?void 0:t.status)?"bi-check":"bi-x")})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:"Team Manager"}),(null===(a=Z.teamManagerApproval)||void 0===a?void 0:a.approver)&&(0,Fa.jsxs)("div",{className:"text-muted small",children:[Z.teamManagerApproval.approver.firstName," ",Z.teamManagerApproval.approver.lastName]}),(null===(n=Z.teamManagerApproval)||void 0===n?void 0:n.actionDate)&&(0,Fa.jsx)("div",{className:"text-muted small",children:oe(Z.teamManagerApproval.actionDate)}),(null===(i=Z.teamManagerApproval)||void 0===i?void 0:i.comments)&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',Z.teamManagerApproval.comments,'"']})})]})]})}),"Pending"!==(null===(l=Z.hrApproval)||void 0===l?void 0:l.status)&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===(null===(o=Z.hrApproval)||void 0===o?void 0:o.status)?"bg-success":"bg-danger"} me-2`,children:(0,Fa.jsx)("i",{className:"bi "+("Approved"===(null===(c=Z.hrApproval)||void 0===c?void 0:c.status)?"bi-check":"bi-x")})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:"HR / VP"}),(null===(d=Z.hrApproval)||void 0===d?void 0:d.approver)&&(0,Fa.jsxs)("div",{className:"text-muted small",children:[Z.hrApproval.approver.firstName," ",Z.hrApproval.approver.lastName]}),(null===(u=Z.hrApproval)||void 0===u?void 0:u.actionDate)&&(0,Fa.jsx)("div",{className:"text-muted small",children:oe(Z.hrApproval.actionDate)}),(null===(m=Z.hrApproval)||void 0===m?void 0:m.comments)&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',Z.hrApproval.comments,'"']})})]})]})}),"Pending"===Z.status&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"badge bg-warning me-2",children:(0,Fa.jsx)("i",{className:"bi bi-clock"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:Z.currentLevel||"Team Manager"}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:"Pending approval"})]})]})})]})})]})]})]})}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>X(!1),children:"Close"})})]})})}),T&&(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:(0,Fa.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-warning text-dark",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Late Arrival Notice"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>P(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsx)("div",{className:"text-center mb-3",children:(0,Fa.jsx)("i",{className:"bi bi-clock text-warning",style:{fontSize:"3rem"}})}),(0,Fa.jsxs)("div",{className:"alert alert-warning",children:[(0,Fa.jsx)("h6",{className:"alert-heading",children:"You have arrived late today!"}),(0,Fa.jsx)("hr",{}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Expected Check-in:"}),(0,Fa.jsx)("div",{className:"fw-bold",children:ue(W.checkInTime)})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Your Check-in:"}),(0,Fa.jsx)("div",{className:"fw-bold text-warning",children:R&&le(R.checkInTime)})]})]}),(0,Fa.jsx)("div",{className:"mt-3 text-center",children:(0,Fa.jsxs)("span",{className:"badge bg-warning text-dark fs-6",children:[(0,Fa.jsx)("i",{className:"bi bi-stopwatch me-1"}),"Late by ",R&&de(R.lateMinutes)]})})]}),(0,Fa.jsx)("div",{className:"alert alert-info",children:(0,Fa.jsxs)("small",{children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-1"}),(0,Fa.jsx)("strong",{children:"Note:"}),' Your attendance has been marked as "Late and Present". Late threshold is 59 seconds after the scheduled check-in time (',ue(W.checkInTime),")."]})})]}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsxs)("button",{type:"button",className:"btn btn-warning",onClick:()=>P(!1),children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-1"}),"Understood"]})})]})})})]})},ol=()=>{const[e,s]=(0,r.useState)(1),[t,a]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:"",otp:""}),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),u=e=>{const{name:s,value:t}=e.target;a(e=>({...e,[s]:t}))};return(0,Fa.jsx)("div",{className:"container-fluid py-4",children:(0,Fa.jsx)("div",{className:"row justify-content-center",children:(0,Fa.jsx)("div",{className:"col-md-6 col-lg-5",children:(0,Fa.jsxs)("div",{className:"card shadow",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h4",{className:"card-title mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-shield-lock me-2"}),"Change Password"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[l&&(0,Fa.jsxs)("div",{className:`alert alert-${"success"===l.type?"success":"danger"} alert-dismissible fade show`,role:"alert",children:[(0,Fa.jsx)("i",{className:`bi ${"success"===l.type?"bi-check-circle":"bi-exclamation-triangle"} me-2`}),l.message,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>o(null)})]}),1===e&&(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),t.currentPassword?t.newPassword?t.newPassword.length<6?(o({type:"error",message:"New password must be at least 6 characters long"}),0):t.newPassword!==t.confirmPassword?(o({type:"error",message:"New password and confirm password do not match"}),0):t.currentPassword!==t.newPassword||(o({type:"error",message:"New password must be different from current password"}),0):(o({type:"error",message:"New password is required"}),0):(o({type:"error",message:"Current password is required"}),0)){i(!0),o(null);try{const e=await ea({currentPassword:t.currentPassword,newPassword:t.newPassword});e.data.success?(d(!0),s(2),o({type:"success",message:e.data.message})):o({type:"error",message:e.data.message||"Failed to send OTP"})}catch(r){var a,n;console.error("Send OTP error:",r),o({type:"error",message:(null===(a=r.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)||"Failed to send OTP. Please try again."})}finally{i(!1)}}},children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"currentPassword",className:"form-label",children:["Current Password ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-lock"})}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"currentPassword",name:"currentPassword",value:t.currentPassword,onChange:u,placeholder:"Enter your current password",required:!0,disabled:n})]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsxs)("label",{htmlFor:"newPassword",className:"form-label",children:["New Password ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-key"})}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"newPassword",name:"newPassword",value:t.newPassword,onChange:u,placeholder:"Enter your new password",required:!0,minLength:"6",disabled:n})]}),(0,Fa.jsx)("div",{className:"form-text",children:"Password must be at least 6 characters long"})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("label",{htmlFor:"confirmPassword",className:"form-label",children:["Confirm New Password ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-key-fill"})}),(0,Fa.jsx)("input",{type:"password",className:"form-control",id:"confirmPassword",name:"confirmPassword",value:t.confirmPassword,onChange:u,placeholder:"Confirm your new password",required:!0,disabled:n})]})]}),(0,Fa.jsx)("div",{className:"d-grid",children:(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Sending OTP..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-envelope me-2"}),"Send OTP"]})})})]}),2===e&&(0,Fa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),t.otp)if(6===t.otp.length){i(!0),o(null);try{const e=await sa({currentPassword:t.currentPassword,newPassword:t.newPassword,otp:t.otp});e.data.success?(o({type:"success",message:"Password changed successfully!"}),setTimeout(()=>{s(1),a({currentPassword:"",newPassword:"",confirmPassword:"",otp:""}),d(!1),o(null)},3e3)):o({type:"error",message:e.data.message||"Failed to verify OTP"})}catch(l){var n,r;console.error("Verify OTP error:",l),o({type:"error",message:(null===(n=l.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to verify OTP. Please try again."})}finally{i(!1)}}else o({type:"error",message:"OTP must be 6 digits"});else o({type:"error",message:"OTP is required"})},children:[(0,Fa.jsxs)("div",{className:"text-center mb-4",children:[(0,Fa.jsx)("i",{className:"bi bi-envelope-check text-primary",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"mt-3",children:"OTP Verification"}),(0,Fa.jsx)("p",{className:"text-muted",children:"We've sent a 6-digit OTP to your email address. Please enter it below to complete the password change."})]}),(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("label",{htmlFor:"otp",className:"form-label",children:["Enter OTP ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("span",{className:"input-group-text",children:(0,Fa.jsx)("i",{className:"bi bi-shield-check"})}),(0,Fa.jsx)("input",{type:"text",className:"form-control text-center",id:"otp",name:"otp",value:t.otp,onChange:u,placeholder:"000000",required:!0,maxLength:"6",pattern:"[0-9]{6}",disabled:n,style:{fontSize:"1.2rem",letterSpacing:"0.5rem"}})]}),(0,Fa.jsx)("div",{className:"form-text",children:"Enter the 6-digit code sent to your email"})]}),(0,Fa.jsxs)("div",{className:"d-grid gap-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-success",disabled:n,children:n?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Verifying..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-lg me-2"}),"Verify & Change Password"]})}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary w-100",onClick:()=>{s(1),d(!1),a(e=>({...e,otp:""})),o(null)},disabled:n,children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-primary w-100",onClick:async()=>{i(!0),o(null);try{const e=await ea({currentPassword:t.currentPassword,newPassword:t.newPassword});e.data.success?o({type:"success",message:"OTP resent successfully!"}):o({type:"error",message:e.data.message||"Failed to resend OTP"})}catch(a){var e,s;console.error("Resend OTP error:",a),o({type:"error",message:(null===(e=a.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||"Failed to resend OTP. Please try again."})}finally{i(!1)}},disabled:n,children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Resend OTP"]})})]})]})]}),(0,Fa.jsxs)("div",{className:"mt-4 p-3 bg-light rounded",children:[(0,Fa.jsxs)("h6",{className:"text-muted mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-1"}),"Security Notice"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"For your security, an OTP will be sent to your registered email address to verify this password change request. The OTP will expire in 10 minutes."})]})]})]})})})})},cl=()=>{const e=Z(),[s,t]=(0,r.useState)("overview"),a=s=>e.pathname.includes(s),n=()=>(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsxs)("div",{className:"alert alert-success",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-calendar3 me-2"}),"Leave & Attendance Management"]}),(0,Fa.jsx)("p",{children:"This module includes:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"My Attendance - Track your daily attendance"}),(0,Fa.jsx)("li",{children:"Leave request approval workflow"}),(0,Fa.jsx)("li",{children:"Attendance tracking and reports"}),(0,Fa.jsx)("li",{children:"Holiday calendar management"}),(0,Fa.jsx)("li",{children:"Leave policy configuration"}),(0,Fa.jsx)("li",{children:"Attendance regularization"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-success",children:"My Attendance Available"})," | ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Other Features In Development"})]})]}),(0,Fa.jsxs)("div",{className:"row mt-4",children:[(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history text-primary",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"My Attendance"}),(0,Fa.jsx)("p",{className:"card-text",children:"Track your daily check-in/check-out, view attendance history and monthly summaries."}),(0,Fa.jsxs)(Ee,{to:"/admin/leave/my-attendance",className:"btn btn-primary",children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-right me-2"}),"View My Attendance"]})]})})}),(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-check text-success",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"Leave Requests"}),(0,Fa.jsx)("p",{className:"card-text",children:"Apply for leave, track leave balance and view leave history."}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",disabled:!0,children:[(0,Fa.jsx)("i",{className:"bi bi-tools me-2"}),"Coming Soon"]})]})})}),(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-bar-chart text-info",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"Reports"}),(0,Fa.jsx)("p",{className:"card-text",children:"Generate attendance reports, leave reports and analytics."}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",disabled:!0,children:[(0,Fa.jsx)("i",{className:"bi bi-tools me-2"}),"Coming Soon"]})]})})}),(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar3 text-warning",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"Holiday Calendar"}),(0,Fa.jsx)("p",{className:"card-text",children:"View company holidays and important dates."}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",disabled:!0,children:[(0,Fa.jsx)("i",{className:"bi bi-tools me-2"}),"Coming Soon"]})]})})}),(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-gear text-secondary",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"Policies"}),(0,Fa.jsx)("p",{className:"card-text",children:"Configure leave policies and attendance rules."}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",disabled:!0,children:[(0,Fa.jsx)("i",{className:"bi bi-tools me-2"}),"Coming Soon"]})]})})}),(0,Fa.jsx)("div",{className:"col-md-6 col-lg-4 mb-3",children:(0,Fa.jsx)("div",{className:"card h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-pencil-square text-danger",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"card-title mt-3",children:"Regularization"}),(0,Fa.jsx)("p",{className:"card-text",children:"Request attendance regularization for missed punches."}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",disabled:!0,children:[(0,Fa.jsx)("i",{className:"bi bi-tools me-2"}),"Coming Soon"]})]})})})]})]});return(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h4",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar3 me-2"}),"Leave & Attendance Management"]})}),(0,Fa.jsx)("div",{className:"card-body p-0",children:(0,Fa.jsxs)("nav",{className:"nav nav-tabs",role:"tablist",children:[(0,Fa.jsxs)(Ee,{to:"/admin/leave",className:"nav-link "+(a("my-attendance")?"":"active"),onClick:()=>t("overview"),children:[(0,Fa.jsx)("i",{className:"bi bi-house me-2"}),"Overview"]}),(0,Fa.jsxs)(Ee,{to:"/admin/leave/my-attendance",className:"nav-link "+(a("my-attendance")?"active":""),onClick:()=>t("attendance"),children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"My Attendance"]}),(0,Fa.jsxs)("span",{className:"nav-link disabled",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-check me-2"}),"Leave Requests",(0,Fa.jsx)("small",{className:"ms-1 text-muted",children:"(Coming Soon)"})]}),(0,Fa.jsxs)("span",{className:"nav-link disabled",children:[(0,Fa.jsx)("i",{className:"bi bi-bar-chart me-2"}),"Reports",(0,Fa.jsx)("small",{className:"ms-1 text-muted",children:"(Coming Soon)"})]})]})})]})})}),(0,Fa.jsxs)(ge,{children:[(0,Fa.jsx)(be,{path:"/",element:(0,Fa.jsx)(n,{})}),(0,Fa.jsx)(be,{path:"/my-attendance",element:(0,Fa.jsx)(ll,{})}),(0,Fa.jsx)(be,{path:"/*",element:(0,Fa.jsx)(n,{})})]})]})},dl=()=>{const[e,s]=(0,r.useState)([]),[t,a]=(0,r.useState)([]),[n,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)({employee:"",status:"",startDate:"",endDate:"",searchTerm:""}),[u,m]=(0,r.useState)({page:1,limit:10,totalPages:1}),[h,p]=(0,r.useState)({totalRecords:0,presentDays:0,absentDays:0,lateDays:0,totalOvertimeHours:0,totalWorkHours:0});(0,r.useEffect)(()=>{x(),f()},[c,u.page]),(0,r.useEffect)(()=>{if(c.searchTerm){const e=c.searchTerm.toLowerCase(),s=t.filter(s=>{var t;const a=`${s.firstName} ${s.lastName}`.toLowerCase(),n=(null===(t=s.employeeId)||void 0===t?void 0:t.toLowerCase())||"",r=s.email.toLowerCase();return a.includes(e)||n.includes(e)||r.includes(e)});i(s)}else i(t)},[c.searchTerm,t]);const x=async()=>{try{var e;const s=(null===(e=(await ua({limit:1e3})).data)||void 0===e?void 0:e.users)||[],t=s.filter(e=>"Employee"===e.role||"Team Leader"===e.role||"Team Manager"===e.role).sort((e,s)=>{const t=`${e.firstName} ${e.lastName}`.toLowerCase(),a=`${s.firstName} ${s.lastName}`.toLowerCase();return t.localeCompare(a)});a(t),i(t)}catch(s){console.error("Error fetching employees:",s)}},f=async()=>{o(!0);try{var e;const t={employee:c.employee||void 0,status:c.status||void 0,startDate:c.startDate||void 0,endDate:c.endDate||void 0,page:u.page,limit:u.limit},a=await oa(t);let n=(null===(e=a.data)||void 0===e?void 0:e.attendance)||[];if(c.searchTerm){const e=c.searchTerm.toLowerCase();n=n.filter(s=>{var t,a;if(!s.employee)return!1;const n=`${s.employee.firstName} ${s.employee.lastName}`.toLowerCase(),r=(null===(t=s.employee.employeeId)||void 0===t?void 0:t.toLowerCase())||"",i=(null===(a=s.employee.email)||void 0===a?void 0:a.toLowerCase())||"";return n.includes(e)||r.includes(e)||i.includes(e)})}s(n),m(e=>{var s;return{...e,totalPages:(null===(s=a.data)||void 0===s?void 0:s.totalPages)||1}});const r={totalRecords:n.length,presentDays:n.filter(e=>"Present"===e.status).length,absentDays:n.filter(e=>"Absent"===e.status).length,lateDays:n.filter(e=>e.isLate).length,totalOvertimeHours:n.reduce((e,s)=>e+(s.overtime||0),0),totalWorkHours:n.reduce((e,s)=>{const t=s.totalHours||s.currentWorkHours||0;return e+("number"===typeof t?t:0)},0)};p(r)}catch(t){console.error("Error fetching attendance reports:",t),s([])}finally{o(!1)}},b=e=>{d(s=>({...s,[e.target.name]:e.target.value})),m(e=>({...e,page:1}))},v=e=>{e>=1&&e<=u.totalPages&&m(s=>({...s,page:e}))},g=(e,s)=>{let t="badge ";switch(e){case"Present":t+=s?"bg-warning":"bg-success";break;case"Absent":t+="bg-danger";break;case"Late":t+="bg-warning";break;case"Half Day":t+="bg-info";break;case"On Leave":t+="bg-secondary";break;case"Holiday":t+="bg-primary";break;default:t+="bg-light text-dark"}return t};return(0,Fa.jsxs)("div",{className:"container-fluid mt-4",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsxs)("h3",{children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up me-2"}),"Attendance Reports"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>{d({employee:"",status:"",startDate:"",endDate:"",searchTerm:""}),m(e=>({...e,page:1}))},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Clear Filters"]})]}),(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"text-primary",children:h.totalRecords}),(0,Fa.jsx)("small",{className:"text-muted",children:"Total Records"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"text-success",children:h.presentDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Present Days"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"text-danger",children:h.absentDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Absent Days"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("h5",{className:"text-warning",children:h.lateDays}),(0,Fa.jsx)("small",{className:"text-muted",children:"Late Days"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h5",{className:"text-info",children:[h.totalOvertimeHours.toFixed(2)," hrs"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Total Overtime"})]})})}),(0,Fa.jsx)("div",{className:"col-md-2",children:(0,Fa.jsx)("div",{className:"card text-center",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h5",{className:"text-primary",children:[h.totalWorkHours.toFixed(2)," hrs"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Total Work Hours"})]})})})]}),(0,Fa.jsxs)("div",{className:"card mb-4",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-funnel me-2"}),"Filters"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-md-12 mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Search Employee:"}),(0,Fa.jsx)("input",{type:"text",name:"searchTerm",value:c.searchTerm,onChange:b,className:"form-control",placeholder:"Search by name, employee ID, or email..."}),(0,Fa.jsx)("small",{className:"text-muted",children:"Search employees, team leaders, and managers by name, employee code, or email"})]})}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Employee:"}),(0,Fa.jsxs)("select",{name:"employee",value:c.employee,onChange:b,className:"form-select",children:[(0,Fa.jsx)("option",{value:"",children:"All Employees"}),n.map(e=>(0,Fa.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName,e.employeeId&&` (ID: ${e.employeeId})`," - ",e.role]},e._id))]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status:"}),(0,Fa.jsxs)("select",{name:"status",value:c.status,onChange:b,className:"form-select",children:[(0,Fa.jsx)("option",{value:"",children:"All Statuses"}),(0,Fa.jsx)("option",{value:"Present",children:"Present"}),(0,Fa.jsx)("option",{value:"Absent",children:"Absent"}),(0,Fa.jsx)("option",{value:"Late",children:"Late"}),(0,Fa.jsx)("option",{value:"Half Day",children:"Half Day"}),(0,Fa.jsx)("option",{value:"On Leave",children:"On Leave"}),(0,Fa.jsx)("option",{value:"Holiday",children:"Holiday"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Date:"}),(0,Fa.jsx)("input",{type:"date",name:"startDate",value:c.startDate,onChange:b,className:"form-control"})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Date:"}),(0,Fa.jsx)("input",{type:"date",name:"endDate",value:c.endDate,onChange:b,className:"form-control"})]})]})]})]}),(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-table me-2"}),"Attendance Records"]})}),(0,Fa.jsx)("div",{className:"card-body",children:l?(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Fa.jsx)("p",{className:"mt-2",children:"Loading attendance data..."})]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-striped table-hover",children:[(0,Fa.jsx)("thead",{className:"table-dark",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Check In"}),(0,Fa.jsx)("th",{children:"Check Out"}),(0,Fa.jsx)("th",{children:"Total Hours"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Late Minutes"}),(0,Fa.jsx)("th",{children:"Overtime (hrs)"})]})}),(0,Fa.jsx)("tbody",{children:0===e.length?(0,Fa.jsx)("tr",{children:(0,Fa.jsxs)("td",{colSpan:"8",className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-x text-muted",style:{fontSize:"2rem"}}),(0,Fa.jsx)("p",{className:"text-muted mt-2",children:"No attendance records found"})]})}):e.map(e=>{var s,t,a,n,r,i;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("strong",{children:[null===(s=e.employee)||void 0===s?void 0:s.firstName," ",null===(t=e.employee)||void 0===t?void 0:t.lastName]}),(null===(a=e.employee)||void 0===a?void 0:a.employeeId)&&(0,Fa.jsxs)("span",{className:"badge bg-secondary ms-2",children:["ID: ",e.employee.employeeId]}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:null===(n=e.employee)||void 0===n?void 0:n.email}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-info",children:null===(r=e.employee)||void 0===r?void 0:r.role})]})}),(0,Fa.jsx)("td",{children:e.checkIn?(0,Fa.jsxs)("span",{className:"text-success",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),new Date(e.checkIn).toLocaleTimeString()]}):(0,Fa.jsx)("span",{className:"text-muted",children:"-"})}),(0,Fa.jsx)("td",{children:e.checkOut?(0,Fa.jsxs)("span",{className:"text-danger",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),new Date(e.checkOut).toLocaleTimeString()]}):(0,Fa.jsx)("span",{className:"text-muted",children:"-"})}),(0,Fa.jsxs)("td",{children:[(0,Fa.jsx)("strong",{children:(()=>{const s=e.totalHours||e.currentWorkHours||0;return("number"===typeof s?s:0).toFixed(2)})()}),e.checkIn&&!e.checkOut&&(0,Fa.jsxs)("small",{className:"text-muted d-block",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),"Currently working"]})]}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("span",{className:g(e.status,e.isLate),children:[e.status,e.isLate&&"Present"===e.status&&" (Late)"]})}),(0,Fa.jsx)("td",{children:e.lateMinutes>0?(0,Fa.jsxs)("span",{className:"text-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),e.lateMinutes," min"]}):(0,Fa.jsx)("span",{className:"text-muted",children:"-"})}),(0,Fa.jsx)("td",{children:e.overtime>0?(0,Fa.jsxs)("span",{className:"text-info",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-1"}),null===(i=e.overtime)||void 0===i?void 0:i.toFixed(2)]}):(0,Fa.jsx)("span",{className:"text-muted",children:"0.00"})})]},e._id)})})]})}),u.totalPages>1&&(0,Fa.jsx)("nav",{className:"mt-3",children:(0,Fa.jsxs)("ul",{className:"pagination justify-content-center",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===u.page?"disabled":""),children:(0,Fa.jsxs)("button",{className:"page-link",onClick:()=>v(u.page-1),disabled:1===u.page,children:[(0,Fa.jsx)("i",{className:"bi bi-chevron-left"})," Previous"]})}),[...Array(Math.min(u.totalPages,5)).keys()].map(e=>{const s=e+1;return(0,Fa.jsx)("li",{className:"page-item "+(u.page===s?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>v(s),children:s})},s)}),(0,Fa.jsx)("li",{className:"page-item "+(u.page===u.totalPages?"disabled":""),children:(0,Fa.jsxs)("button",{className:"page-link",onClick:()=>v(u.page+1),disabled:u.page===u.totalPages,children:["Next ",(0,Fa.jsx)("i",{className:"bi bi-chevron-right"})]})})]})})]})})]})]})},ul=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)({checkInTime:"09:00",checkOutTime:"18:00",workingHours:8,minimumWorkHours:6,lateThreshold:30,breakTime:60}),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(9),[m,h]=(0,r.useState)(0),[p,x]=(0,r.useState)(18),[f,b]=(0,r.useState)(0);(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{if(s.checkInTime&&s.checkOutTime){const e=((e,s)=>{const[t,a]=e.split(":").map(Number),[n,r]=s.split(":").map(Number);let i=60*n+r-(60*t+a);i<0&&(i+=1440);const l=i/60;return Math.round(100*l)/100})(s.checkInTime,s.checkOutTime);e!==s.workingHours&&t(s=>({...s,workingHours:e}))}},[s.checkInTime,s.checkOutTime]);const v=async()=>{try{const e=await Ma.get("/system/work-hours");if(e.data.success&&e.data.workHours){const s=e.data.workHours,a={checkInTime:s.checkInTime||"09:00",checkOutTime:s.checkOutTime||"18:00",workingHours:s.workingHours||8,minimumWorkHours:s.minimumWorkHours||6,lateThreshold:30,breakTime:60};t(a);const[n,r]=a.checkInTime.split(":").map(Number),[i,l]=a.checkOutTime.split(":").map(Number);u(n),h(r),x(i),b(l)}}catch(e){console.error("Error fetching settings:",e),c("Error loading settings. Using default values."),setTimeout(()=>c(""),3e3)}finally{n(!1)}},g=(e,s)=>{const a=`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;t(e=>({...e,checkInTime:a}))},j=(e,s)=>{const a=`${e.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;t(e=>({...e,checkOutTime:a}))},y=e=>0===e?12:e>12?e-12:e,N=e=>e>=12?"PM":"AM",w=(e,s)=>"AM"===s?12===e?0:e:12===e?12:e+12,k=(e,s)=>{const t=y(e),a=N(e);return`${t}:${s.toString().padStart(2,"0")} ${a}`},S=e=>{let{hour:s,minute:t,onHourChange:a,onMinuteChange:n,label:r,icon:i,color:l}=e;const o=Array.from({length:12},(e,s)=>s+1),c=Array.from({length:60},(e,s)=>s),d=y(s),u=N(s);return(0,Fa.jsxs)("div",{className:"p-4 border rounded-3 bg-light h-100",children:[(0,Fa.jsxs)("div",{className:"text-center mb-3",children:[(0,Fa.jsx)("div",{className:`text-${l} mb-2`,children:(0,Fa.jsx)("i",{className:i,style:{fontSize:"2.5rem"}})}),(0,Fa.jsx)("h6",{className:"fw-bold text-dark mb-0",children:r})]}),(0,Fa.jsxs)("div",{className:"row g-2",children:[(0,Fa.jsxs)("div",{className:"col-4",children:[(0,Fa.jsx)("label",{className:"form-label small fw-semibold",children:"Hour"}),(0,Fa.jsx)("select",{className:"form-select form-select-lg text-center fw-bold",value:d,onChange:e=>(e=>{const s=w(parseInt(e),u);a(s)})(e.target.value),style:{fontSize:"1.1rem"},children:o.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))})]}),(0,Fa.jsxs)("div",{className:"col-4",children:[(0,Fa.jsx)("label",{className:"form-label small fw-semibold",children:"Minute"}),(0,Fa.jsx)("select",{className:"form-select form-select-lg text-center fw-bold",value:t,onChange:e=>n(parseInt(e.target.value)),style:{fontSize:"1.1rem"},children:c.filter(e=>e%5===0).map(e=>(0,Fa.jsx)("option",{value:e,children:e.toString().padStart(2,"0")},e))})]}),(0,Fa.jsxs)("div",{className:"col-4",children:[(0,Fa.jsx)("label",{className:"form-label small fw-semibold",children:"Period"}),(0,Fa.jsxs)("select",{className:"form-select form-select-lg text-center fw-bold",value:u,onChange:e=>(e=>{const s=w(d,e);a(s)})(e.target.value),style:{fontSize:"1.1rem"},children:[(0,Fa.jsx)("option",{value:"AM",children:"AM"}),(0,Fa.jsx)("option",{value:"PM",children:"PM"})]})]})]}),(0,Fa.jsx)("div",{className:"text-center mt-3",children:(0,Fa.jsx)("div",{className:"badge bg-primary px-3 py-2",style:{fontSize:"1.1rem"},children:k(s,t)})})]})},C=(e,s)=>{t(t=>({...t,[e]:s}))};return a?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid p-4",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h1",{className:"h3 mb-1 text-dark fw-bold",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history text-primary me-3"}),"Work Hours Configuration"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Set standard check-in and check-out timings for all employees"})]}),(0,Fa.jsxs)("div",{className:"badge bg-light text-dark px-3 py-2",children:[(0,Fa.jsx)("i",{className:"bi bi-people me-1"}),"Company-wide Settings"]})]})})}),o&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:`alert ${o.includes("Error")?"alert-danger":"alert-success"} alert-dismissible fade show border-0 shadow-sm`,children:[(0,Fa.jsx)("i",{className:`bi ${o.includes("Error")?"bi-exclamation-triangle":"bi-check-circle"} me-2`}),o,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>c("")})]})})}),(0,Fa.jsxs)("div",{className:"row g-4",children:[(0,Fa.jsx)("div",{className:"col-lg-8",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-gradient",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:(0,Fa.jsxs)("h5",{className:"mb-0 text-white fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-gear-fill me-2"}),"Time Settings Configuration"]})}),(0,Fa.jsxs)("div",{className:"card-body p-4",children:[(0,Fa.jsxs)("div",{className:"row g-4 mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)(S,{hour:d,minute:m,onHourChange:e=>{u(e),g(e,m)},onMinuteChange:e=>{h(e),g(d,e)},label:"Check-in Time",icon:"bi bi-sunrise-fill",color:"success"})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)(S,{hour:p,minute:f,onHourChange:e=>{x(e),j(e,f)},onMinuteChange:e=>{b(e),j(p,e)},label:"Check-out Time",icon:"bi bi-sunset-fill",color:"warning"})})]}),(0,Fa.jsxs)("div",{className:"row g-3 mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded-3 h-100",children:[(0,Fa.jsx)("div",{className:"text-primary mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-hourglass-split",style:{fontSize:"2rem"}})}),(0,Fa.jsxs)("label",{className:"form-label fw-semibold text-dark mb-2",children:["Standard Hours",(0,Fa.jsx)("i",{className:"bi bi-calculator ms-1 text-primary",title:"Auto-calculated"})]}),(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("div",{className:"h4 fw-bold text-primary mb-1",children:[Math.floor(s.workingHours),"h ",Math.round(s.workingHours%1*60),"m"]})}),(0,Fa.jsx)("input",{type:"number",className:"form-control form-control-lg text-center border-2",min:"0.1",max:"12",step:"0.1",value:s.workingHours,readOnly:!0,style:{fontSize:"1rem",fontWeight:"bold",backgroundColor:"#f8f9fa"},title:"Automatically calculated based on check-in and check-out times"}),(0,Fa.jsx)("small",{className:"text-muted mt-1 d-block",children:"Auto-calculated from times"})]})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded-3 h-100",children:[(0,Fa.jsx)("div",{className:"text-success mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-clock-fill",style:{fontSize:"2rem"}})}),(0,Fa.jsx)("label",{className:"form-label fw-semibold text-dark mb-2",children:"Minimum Hours"}),(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("div",{className:"h4 fw-bold text-success mb-1",children:[Math.floor(s.minimumWorkHours),"h ",Math.round(s.minimumWorkHours%1*60),"m"]})}),(0,Fa.jsx)("input",{type:"number",className:"form-control form-control-lg text-center border-2",min:"0.1",max:s.workingHours,step:"0.1",value:s.minimumWorkHours,onChange:e=>C("minimumWorkHours",parseFloat(e.target.value)),style:{fontSize:"1.2rem",fontWeight:"bold"}}),(0,Fa.jsx)("small",{className:"text-muted mt-1 d-block",children:"Required minimum hours"})]})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded-3 h-100",children:[(0,Fa.jsx)("div",{className:"text-danger mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle-fill",style:{fontSize:"2rem"}})}),(0,Fa.jsx)("label",{className:"form-label fw-semibold text-dark mb-2",children:"Late Threshold"}),(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("div",{className:"h4 fw-bold text-danger mb-1",children:[s.lateThreshold,(0,Fa.jsx)("small",{className:"fs-6 text-muted ms-1",children:"min"})]})}),(0,Fa.jsx)("input",{type:"number",className:"form-control form-control-lg text-center border-2",min:"1",max:"120",value:s.lateThreshold,onChange:e=>C("lateThreshold",parseInt(e.target.value)),style:{fontSize:"1.1rem",fontWeight:"bold"}}),(0,Fa.jsx)("small",{className:"text-muted mt-1 d-block",children:'Grace period before "Late"'})]})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("div",{className:"text-center p-3 border rounded-3 h-100",children:[(0,Fa.jsx)("div",{className:"text-info mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-cup-hot-fill",style:{fontSize:"2rem"}})}),(0,Fa.jsx)("label",{className:"form-label fw-semibold text-dark mb-2",children:"Break Duration"}),(0,Fa.jsx)("div",{className:"mb-2",children:(0,Fa.jsxs)("div",{className:"h4 fw-bold text-info mb-1",children:[s.breakTime,(0,Fa.jsx)("small",{className:"fs-6 text-muted ms-1",children:"min"})]})}),(0,Fa.jsx)("input",{type:"number",className:"form-control form-control-lg text-center border-2",min:"0",max:"120",value:s.breakTime,onChange:e=>C("breakTime",parseInt(e.target.value)),style:{fontSize:"1.1rem",fontWeight:"bold"}}),(0,Fa.jsx)("small",{className:"text-muted mt-1 d-block",children:"Default break time"})]})})]}),(0,Fa.jsx)("div",{className:"d-flex justify-content-end mt-4 pt-3 border-top",children:(0,Fa.jsx)("button",{className:"btn btn-primary btn-lg px-4 py-2 shadow-sm",onClick:async()=>{l(!0),console.log("Starting to save work hours settings...");try{const l=[{key:"checkInTime",value:s.checkInTime,description:"Standard check-in time for all employees"},{key:"checkOutTime",value:s.checkOutTime,description:"Standard check-out time for all employees"},{key:"workingHours",value:s.workingHours.toString(),description:"Required working hours per day"},{key:"minimumWorkHours",value:s.minimumWorkHours.toString(),description:"Minimum required working hours per day"},{key:"lateThreshold",value:s.lateThreshold.toString(),description:"Minutes after which employee is marked as late"},{key:"breakTime",value:s.breakTime.toString(),description:"Default break time in minutes"}];for(let s=0;s<l.length;s++){const c=l[s];console.log(`Updating ${c.key} with value: ${c.value}`);try{const e=await Ma.put(`/system/settings/${c.key}`,{settingValue:c.value,description:c.description});if(console.log(`\u2705 ${c.key} updated successfully:`,e.data),!e.data||!e.data.success)throw new Error(`API returned unsuccessful response for ${c.key}: ${JSON.stringify(e.data)}`)}catch(o){var e,t,a,n,r,i;throw console.error(`\u274c Failed to update ${c.key}:`,o),console.error("Error details:",{message:o.message,status:null===(e=o.response)||void 0===e?void 0:e.status,statusText:null===(t=o.response)||void 0===t?void 0:t.statusText,data:null===(a=o.response)||void 0===a?void 0:a.data,config:{url:null===(n=o.config)||void 0===n?void 0:n.url,method:null===(r=o.config)||void 0===r?void 0:r.method,headers:null===(i=o.config)||void 0===i?void 0:i.headers}}),new Error(`Failed to update ${c.key}: ${o.message}`)}}console.log("\ud83c\udf89 All settings updated successfully!"),c("Work hours settings updated successfully!"),setTimeout(()=>c(""),3e3)}catch(d){console.error("\u274c Error updating settings:",d),console.error("Full error object:",{message:d.message,stack:d.stack,response:d.response,request:d.request});const e=d.message.includes("Failed to update")?d.message:`Error updating settings: ${d.message||"Unknown error"}. Please try again.`;c(e),setTimeout(()=>c(""),5e3)}finally{l(!1)}},disabled:i,style:{borderRadius:"10px"},children:i?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Saving Changes..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle-fill me-2"}),"Save Configuration"]})})})]})]})}),(0,Fa.jsx)("div",{className:"col-lg-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm h-100",children:[(0,Fa.jsx)("div",{className:"card-header bg-gradient text-white",style:{background:"linear-gradient(135deg, #11998e 0%, #38ef7d 100%)"},children:(0,Fa.jsxs)("h6",{className:"mb-0 fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-eye-fill me-2"}),"Current Configuration"]})}),(0,Fa.jsxs)("div",{className:"card-body p-4",children:[(0,Fa.jsxs)("div",{className:"text-center mb-4 p-3 bg-light rounded-3",children:[(0,Fa.jsx)("div",{className:"h4 text-primary mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-calendar-week"})}),(0,Fa.jsx)("h6",{className:"fw-bold text-dark mb-1",children:"Work Schedule"}),(0,Fa.jsxs)("div",{className:"h5 text-primary fw-bold",children:[s.checkInTime," - ",s.checkOutTime]})]}),(0,Fa.jsxs)("div",{className:"row g-3 mb-4",children:[(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-2 border rounded",children:[(0,Fa.jsxs)("div",{className:"text-success fw-bold h6 mb-1",children:[s.workingHours,"h"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Standard Hours"})]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-2 border rounded",children:[(0,Fa.jsxs)("div",{className:"text-primary fw-bold h6 mb-1",children:[s.minimumWorkHours,"h"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Minimum Hours"})]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-2 border rounded",children:[(0,Fa.jsxs)("div",{className:"text-warning fw-bold h6 mb-1",children:[s.lateThreshold,"min"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Late Grace"})]})}),(0,Fa.jsx)("div",{className:"col-6",children:(0,Fa.jsxs)("div",{className:"text-center p-2 border rounded",children:[(0,Fa.jsxs)("div",{className:"text-info fw-bold h6 mb-1",children:[s.breakTime,"min"]}),(0,Fa.jsx)("small",{className:"text-muted",children:"Break Time"})]})})]}),(0,Fa.jsx)("div",{className:"alert alert-light border border-primary",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-start",children:[(0,Fa.jsx)("i",{className:"bi bi-lightbulb-fill text-warning me-2 mt-1"}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{className:"text-dark",children:"Important Note:"}),(0,Fa.jsx)("p",{className:"mb-0 small text-muted mt-1",children:"Changes will apply to new attendance records only. Existing attendance data will remain unchanged."})]})]})})]})]})})]})]})},ml=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)({}),[i,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(null);(0,r.useEffect)(()=>{m();const e=setInterval(m,3e4);return()=>clearInterval(e)},[]);const m=async()=>{try{const e=await Ma.get("/attendance/currently-working");e.data.success&&(t(e.data.currentlyWorking),n(e.data.summary),u(new Date),c(""))}catch(o){console.error("Error fetching currently working employees:",o),c("Failed to fetch employee status. Please try again.")}finally{l(!1)}},h=(e,s)=>e?"Late Arrival":s>480?"Full Day":s>240?"Half Day":"Just Started";return i?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid p-4",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h1",{className:"h3 mb-1 text-dark fw-bold",children:[(0,Fa.jsx)("i",{className:"bi bi-people-fill text-success me-3"}),"Live Employee Status"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Real-time view of employees currently working"})]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"badge bg-light text-dark px-3 py-2 me-3",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),"Last updated: ",d?d.toLocaleTimeString():"Never"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-primary",onClick:m,disabled:i,children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Refresh"]})]})]})})}),o&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),o]})})}),(0,Fa.jsxs)("div",{className:"row g-4 mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("div",{className:"text-primary mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-people",style:{fontSize:"2.5rem"}})}),(0,Fa.jsx)("h3",{className:"fw-bold text-primary mb-1",children:a.totalEmployees||0}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Total Employees"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("div",{className:"text-success mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-person-check",style:{fontSize:"2.5rem"}})}),(0,Fa.jsx)("h3",{className:"fw-bold text-success mb-1",children:a.currentlyWorking||0}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Currently Working"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("div",{className:"text-info mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-box-arrow-in-right",style:{fontSize:"2.5rem"}})}),(0,Fa.jsx)("h3",{className:"fw-bold text-info mb-1",children:a.checkedInToday||0}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Checked In Today"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm h-100",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("div",{className:"text-warning mb-2",children:(0,Fa.jsx)("i",{className:"bi bi-box-arrow-right",style:{fontSize:"2.5rem"}})}),(0,Fa.jsx)("h3",{className:"fw-bold text-warning mb-1",children:a.checkedOutToday||0}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Checked Out Today"})]})})})]}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-gradient text-white",style:{background:"linear-gradient(135deg, #28a745 0%, #20c997 100%)"},children:(0,Fa.jsxs)("h5",{className:"mb-0 fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-broadcast me-2"}),"Currently Working Employees (",s.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body p-0",children:0===s.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-person-x text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"text-muted mt-3",children:"No employees currently working"}),(0,Fa.jsx)("p",{className:"text-muted",children:"All employees have either not checked in or have already checked out for today."})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover mb-0",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Department"}),(0,Fa.jsx)("th",{children:"Check-in Time"}),(0,Fa.jsx)("th",{children:"Work Duration"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Location"})]})}),(0,Fa.jsx)("tbody",{children:s.map(e=>{return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"me-3",children:e.employee.profilePhoto?(0,Fa.jsx)("img",{src:e.employee.profilePhoto,alt:"Profile",className:"rounded-circle",style:{width:"40px",height:"40px",objectFit:"cover"}}):(0,Fa.jsx)("div",{className:"bg-primary rounded-circle d-flex align-items-center justify-content-center",style:{width:"40px",height:"40px"},children:(0,Fa.jsx)("i",{className:"bi bi-person text-white"})})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"fw-semibold",children:[e.employee.firstName," ",e.employee.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:e.employee.role})]})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-light text-dark",children:e.employee.department||"N/A"})}),(0,Fa.jsxs)("td",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:(n=e.checkIn,new Date(n).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}))}),e.isLate&&(0,Fa.jsxs)("small",{className:"text-danger",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-1"}),e.lateMinutes,"min late"]})]}),(0,Fa.jsxs)("td",{children:[(0,Fa.jsx)("div",{className:"fw-bold text-primary",children:(a=e.currentWorkMinutes||0,`${Math.floor(a/60)}h ${a%60}m`)}),(0,Fa.jsxs)("small",{className:"text-muted",children:[(e.currentWorkHours||0).toFixed(1)," hours"]})]}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-"+(s=e.isLate,t=e.currentWorkMinutes||0,s?"danger":t>480?"success":t>240?"warning":"info"),children:h(e.isLate,e.currentWorkMinutes||0)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:`bi ${"Office"===e.location?"bi-building":"Remote"===e.location?"bi-house":"bi-geo-alt"} me-1`}),e.location||"Office"]})})]},e._id);var s,t,a,n})})]})})})]})})}),(0,Fa.jsx)("div",{className:"row mt-3",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"text-center",children:(0,Fa.jsxs)("small",{className:"text-muted",children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Auto-refreshes every 30 seconds"]})})})})]})},hl=()=>{const{user:e,hasAnyRole:s}=Ya(),[t,a]=(0,r.useState)("request"),[n,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,m]=(0,r.useState)([]),[h,p]=(0,r.useState)([]),[x,f]=(0,r.useState)([]),[b,v]=(0,r.useState)(null),[g,j]=(0,r.useState)(!1),[y,N]=(0,r.useState)(!1),[w,k]=(0,r.useState)(""),[S,C]=(0,r.useState)({approvalLevel:"All Levels",status:"All Status",year:(new Date).getFullYear().toString()}),[T,P]=(0,r.useState)({total:0,pending:0,approved:0,rejected:0}),[R,E]=(0,r.useState)({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""});(0,r.useEffect)(()=>{_()},[]),(0,r.useEffect)(()=>{"my-requests"===t?A():"approve"===t&&D()},[t]),(0,r.useEffect)(()=>{R.startDate&&R.startTime&&R.endDate&&R.endTime&&M()},[R.startDate,R.startTime,R.endDate,R.endTime]);const _=async()=>{try{const s=(await ua()).data.users||[];let t=[],a=[];["Team Leader","Team Lead"].includes(e.role)?(t=s.filter(e=>["Team Manager","HR Manager","HR BP","Vice President","Admin"].includes(e.role)),a=s.filter(s=>["Team Leader","Team Lead","Employee","Developer","Senior Developer"].includes(s.role)&&s._id!==e._id)):(t=s.filter(e=>["Team Manager","Team Leader","Team Lead","HR Manager","Project Manager"].includes(e.role)),a=s.filter(s=>!["Team Manager","Team Leader","Team Lead","HR Manager","Project Manager"].includes(s.role)&&s._id!==e._id)),o(t),d(a)}catch(s){console.error("Error fetching users:",s)}},A=async()=>{try{i(!0);const e=await Aa();m(e.data.permissions||[])}catch(e){console.error("Error fetching my requests:",e)}finally{i(!1)}},D=async()=>{try{i(!0);const e=(await Da()).data.permissions||[];p(e),f(e),L(e)}catch(e){console.error("Error fetching pending approvals:",e)}finally{i(!1)}},L=e=>{const s={total:e.length,pending:0,approved:0,rejected:0};e.forEach(e=>{"Rejected"===e.status?s.rejected++:"HR Approved"===e.status?s.approved++:s.pending++}),P(s)},O=(e,s)=>{C(t=>({...t,[e]:s}))},I=()=>{C({approvalLevel:"All Levels",status:"All Status",year:(new Date).getFullYear().toString()}),f(h),L(h)};(0,r.useEffect)(()=>{h.length>0&&(()=>{let e=[...h];"All Levels"!==S.approvalLevel&&("Team Leader"===S.approvalLevel?e=e.filter(e=>{var s;return"Team Leader"===e.currentApprovalLevel||(null===(s=e.approvalHistory)||void 0===s?void 0:s.some(e=>"Team Leader"===e.level))}):"Team Manager"===S.approvalLevel?e=e.filter(e=>{var s;return"Team Manager"===e.currentApprovalLevel||(null===(s=e.approvalHistory)||void 0===s?void 0:s.some(e=>"Team Manager"===e.level))}):"HR"===S.approvalLevel&&(e=e.filter(e=>{var s;return"HR"===e.currentApprovalLevel||(null===(s=e.approvalHistory)||void 0===s?void 0:s.some(e=>"HR"===e.level))}))),"All Status"!==S.status&&("Pending"===S.status?e=e.filter(e=>"Pending"===e.status||"Team Leader Approved"===e.status||"Team Manager Approved"===e.status):"Approved"===S.status?e=e.filter(e=>"HR Approved"===e.status):"Rejected"===S.status&&(e=e.filter(e=>"Rejected"===e.status))),"All Years"!==S.year&&(e=e.filter(e=>new Date(e.submittedAt).getFullYear().toString()===S.year)),f(e),L(e)})()},[S,h]);const M=()=>{const e=new Date(`${R.startDate}T${R.startTime}`),s=new Date(`${R.endDate}T${R.endTime}`);if(s>e){const t=s-e,a=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);let r="";a>0&&(r+=`${a} hour${a>1?"s":""}`),n>0&&(r&&(r+=" "),r+=`${n} minute${n>1?"s":""}`),E(e=>({...e,duration:r||"0 minutes"}))}},F=(e,s)=>{E(t=>({...t,[e]:s}))},$=async e=>{e.preventDefault(),i(!0);try{if(!R.startDate||!R.startTime||!R.endDate||!R.endTime||!R.reason||!R.assignedBy||!R.responsiblePerson||!R.workDescription)return void alert("Please fill in all required fields.");await _a(R),alert("Permission request submitted successfully!"),E({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""})}catch(s){console.error("Error submitting permission request:",s),alert("Failed to submit permission request. Please try again.")}finally{i(!1)}},z=async e=>{try{const s=await La(e);v(s.data.permission),j(!0)}catch(s){console.error("Error fetching permission details:",s),alert("Failed to fetch permission details.")}},H=async()=>{try{i(!0),await Ia(b._id,{rejectionReason:w}),alert("Permission request rejected successfully!"),N(!1),k(""),await D()}catch(e){console.error("Error rejecting permission:",e),alert("Failed to reject permission request.")}finally{i(!1)}},U=e=>{const s={Pending:{class:"bg-warning",text:"Pending"},"Team Leader Approved":{class:"bg-info",text:"Team Leader Approved"},"Team Manager Approved":{class:"bg-primary",text:"Team Manager Approved"},"HR Approved":{class:"bg-success",text:"HR Approved"},Rejected:{class:"bg-danger",text:"Rejected"}}[e]||{class:"bg-secondary",text:e};return(0,Fa.jsx)("span",{className:`badge ${s.class}`,children:s.text})},q=e=>new Date(e).toLocaleDateString(),B=(e,s)=>`${new Date(e).toLocaleDateString()} ${s}`;return(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Fa.jsxs)("h2",{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-check me-2"}),"Permission Management"]})})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("ul",{className:"nav nav-tabs",children:[(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link "+("request"===t?"active":""),onClick:()=>a("request"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-2"}),"New Permission Request"]})}),(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link "+("my-requests"===t?"active":""),onClick:()=>a("my-requests"),children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Requests"]})}),s(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])&&(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link "+("approve"===t?"active":""),onClick:()=>a("approve"),children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"Approve Requests"]})})]})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:["request"===t&&(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clipboard-check me-2"}),"Permission Request Form"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("form",{onSubmit:$,children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-range me-2"}),"Date & Time Range"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Date *"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:R.startDate,onChange:e=>F("startDate",e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Time *"}),(0,Fa.jsx)("input",{type:"time",className:"form-control",value:R.startTime,onChange:e=>F("startTime",e.target.value),required:!0})]})]}),(0,Fa.jsxs)("div",{className:"row mt-3",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Date *"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:R.endDate,onChange:e=>F("endDate",e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Time *"}),(0,Fa.jsx)("input",{type:"time",className:"form-control",value:R.endTime,onChange:e=>F("endTime",e.target.value),required:!0})]})]}),R.duration&&(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),(0,Fa.jsx)("strong",{children:"Duration:"})," ",R.duration]})})]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Request Details"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Reason for Permission *"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:R.reason,onChange:e=>F("reason",e.target.value),placeholder:"Please provide a detailed reason for your permission request...",required:!0})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Who Assigned the Work? *"}),(0,Fa.jsxs)("select",{className:"form-select",value:R.assignedBy,onChange:e=>F("assignedBy",e.target.value),required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Team Lead/Manager"}),l.map(e=>(0,Fa.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," - ",e.role]},e._id))]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Who is Responsible During Absence? *"}),(0,Fa.jsxs)("select",{className:"form-select",value:R.responsiblePerson,onChange:e=>F("responsiblePerson",e.target.value),required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Responsible Person"}),c.map(e=>(0,Fa.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," - ",e.role]},e._id))]})]})]})]})})]}),(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-briefcase me-2"}),"Work/Task Description"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Describe the work/task being handled during this time *"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"4",value:R.workDescription,onChange:e=>F("workDescription",e.target.value),placeholder:"Please provide detailed information about the work or task that needs to be handled during your absence...",required:!0})]})})]}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{E({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""})},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset Form"]}),(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:n,children:n?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Submitting..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-send me-1"}),"Submit Request"]})})]})]})})]}),"my-requests"===t&&(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Permission Requests"]})}),(0,Fa.jsx)("div",{className:"card-body",children:n?(0,Fa.jsx)("div",{className:"text-center py-4",children:(0,Fa.jsx)("div",{className:"spinner-border",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===u.length?(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"text-muted mt-2",children:"No permission requests found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"You haven't submitted any permission requests yet."})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-striped",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Date Range"}),(0,Fa.jsx)("th",{children:"Duration"}),(0,Fa.jsx)("th",{children:"Reason"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Submitted"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:u.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:e.permissionId})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:q(e.startDate)}),(0,Fa.jsx)("br",{}),(0,Fa.jsxs)("small",{className:"text-muted",children:[e.startTime," - ",e.endTime]})]})}),(0,Fa.jsx)("td",{children:e.duration}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{title:e.reason,children:e.reason.length>30?`${e.reason.substring(0,30)}...`:e.reason})}),(0,Fa.jsx)("td",{children:U(e.status)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:q(e.submittedAt)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>z(e._id),children:(0,Fa.jsx)("i",{className:"bi bi-eye"})})})]},e._id))})]})})})]}),"approve"===t&&s(["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"])&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-primary text-white",children:(0,Fa.jsxs)("div",{className:"card-body d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h3",{className:"mb-0",children:T.total}),(0,Fa.jsx)("p",{className:"mb-0",children:"Total Requests"})]}),(0,Fa.jsx)("div",{className:"ms-3",children:(0,Fa.jsx)("i",{className:"bi bi-clipboard-data",style:{fontSize:"2rem"}})})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-warning text-white",children:(0,Fa.jsxs)("div",{className:"card-body d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h3",{className:"mb-0",children:T.pending}),(0,Fa.jsx)("p",{className:"mb-0",children:"Pending"})]}),(0,Fa.jsx)("div",{className:"ms-3",children:(0,Fa.jsx)("i",{className:"bi bi-clock",style:{fontSize:"2rem"}})})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-success text-white",children:(0,Fa.jsxs)("div",{className:"card-body d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h3",{className:"mb-0",children:T.approved}),(0,Fa.jsx)("p",{className:"mb-0",children:"Approved"})]}),(0,Fa.jsx)("div",{className:"ms-3",children:(0,Fa.jsx)("i",{className:"bi bi-check-circle",style:{fontSize:"2rem"}})})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card bg-danger text-white",children:(0,Fa.jsxs)("div",{className:"card-body d-flex align-items-center",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("h3",{className:"mb-0",children:T.rejected}),(0,Fa.jsx)("p",{className:"mb-0",children:"Rejected"})]}),(0,Fa.jsx)("div",{className:"ms-3",children:(0,Fa.jsx)("i",{className:"bi bi-x-circle",style:{fontSize:"2rem"}})})]})})})]}),(0,Fa.jsx)("div",{className:"card mb-4",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row align-items-end",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Approval Level"}),(0,Fa.jsxs)("select",{className:"form-select",value:S.approvalLevel,onChange:e=>O("approvalLevel",e.target.value),children:[(0,Fa.jsx)("option",{value:"All Levels",children:"All Levels"}),(0,Fa.jsx)("option",{value:"Team Leader",children:"Team Leader"}),(0,Fa.jsx)("option",{value:"Team Manager",children:"Team Manager"}),(0,Fa.jsx)("option",{value:"HR",children:"HR"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",value:S.status,onChange:e=>O("status",e.target.value),children:[(0,Fa.jsx)("option",{value:"All Status",children:"All Status"}),(0,Fa.jsx)("option",{value:"Pending",children:"Pending"}),(0,Fa.jsx)("option",{value:"Approved",children:"Approved"}),(0,Fa.jsx)("option",{value:"Rejected",children:"Rejected"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Year"}),(0,Fa.jsxs)("select",{className:"form-select",value:S.year,onChange:e=>O("year",e.target.value),children:[(0,Fa.jsx)("option",{value:"All Years",children:"All Years"}),(0,Fa.jsx)("option",{value:"2025",children:"2025"}),(0,Fa.jsx)("option",{value:"2024",children:"2024"}),(0,Fa.jsx)("option",{value:"2023",children:"2023"})]})]}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:I,children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset"]})})]})})}),(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"Permission Requests (",x.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body",children:n?(0,Fa.jsx)("div",{className:"text-center py-4",children:(0,Fa.jsx)("div",{className:"spinner-border",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===x.length?(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"text-muted mt-2",children:"No requests found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Try adjusting your filters to see more results."})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-striped",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Date Range"}),(0,Fa.jsx)("th",{children:"Duration"}),(0,Fa.jsx)("th",{children:"Reason"}),(0,Fa.jsx)("th",{children:"Current Level"}),(0,Fa.jsx)("th",{children:"Submitted"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:x.map(e=>{var t,a,n;const r=!("Pending"===e.status&&"Team Leader"===e.currentApprovalLevel&&s(["Team Leader","Team Lead"])||"Team Leader Approved"===e.status&&"Team Manager"===e.currentApprovalLevel&&s(["Team Manager"])||"Team Manager Approved"===e.status&&"HR"===e.currentApprovalLevel&&s(["HR Manager","HR BP","HR Executive"]))&&"Pending"!==e.status;return(0,Fa.jsxs)("tr",{className:r?"table-light":"",children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:e.permissionId})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("strong",{children:[null===(t=e.employee)||void 0===t?void 0:t.firstName," ",null===(a=e.employee)||void 0===a?void 0:a.lastName]}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:null===(n=e.employee)||void 0===n?void 0:n.email})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:q(e.startDate)}),(0,Fa.jsx)("br",{}),(0,Fa.jsxs)("small",{className:"text-muted",children:[e.startTime," - ",e.endTime]})]})}),(0,Fa.jsx)("td",{children:e.duration}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{title:e.reason,children:e.reason.length>30?`${e.reason.substring(0,30)}...`:e.reason})}),(0,Fa.jsx)("td",{children:"Pending"===e.status&&"Team Leader"===e.currentApprovalLevel?(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Pending Team Leader"}):"Pending"===e.status&&"Team Manager"===e.currentApprovalLevel||"Team Leader Approved"===e.status&&"Team Manager"===e.currentApprovalLevel?(0,Fa.jsx)("span",{className:"badge bg-info",children:"Pending Team Manager"}):"Team Manager Approved"===e.status&&"HR"===e.currentApprovalLevel?(0,Fa.jsx)("span",{className:"badge bg-primary",children:"Pending HR"}):"HR Approved"===e.status?(0,Fa.jsx)("span",{className:"badge bg-success",children:"Fully Approved"}):"Rejected"===e.status?(0,Fa.jsx)("span",{className:"badge bg-danger",children:"Rejected"}):(0,Fa.jsx)("span",{className:"badge bg-secondary",children:e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:q(e.submittedAt)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group",role:"group",children:[(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>z(e._id),title:"View Details",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),("Pending"===e.status&&"Team Leader"===e.currentApprovalLevel&&s(["Team Leader","Team Lead"])||"Pending"===e.status&&"Team Manager"===e.currentApprovalLevel&&s(["Team Manager"])||"Team Leader Approved"===e.status&&"Team Manager"===e.currentApprovalLevel&&s(["Team Manager"])||"Team Manager Approved"===e.status&&"HR"===e.currentApprovalLevel&&s(["HR Manager","HR BP","HR Executive"]))&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("button",{className:"btn btn-sm btn-success",onClick:()=>(async e=>{try{i(!0),await Oa(e),alert("Permission request approved successfully!"),await D()}catch(s){console.error("Error approving permission:",s),alert("Failed to approve permission request.")}finally{i(!1)}})(e._id),title:"Approve",children:(0,Fa.jsx)("i",{className:"bi bi-check"})}),(0,Fa.jsx)("button",{className:"btn btn-sm btn-danger",onClick:()=>{v(e),N(!0)},title:"Reject",children:(0,Fa.jsx)("i",{className:"bi bi-x"})})]}),("HR Approved"===e.status||"Rejected"===e.status)&&(0,Fa.jsx)("span",{className:"btn btn-sm btn-outline-secondary disabled",children:"HR Approved"===e.status?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle"})," Completed"]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle"})," Rejected"]})})]})})]},e._id)})})]})})})]})]})]})}),(()=>{var e,s,t,a,n,r,i,l,o,c,d,u,m,h,p,x,f,v,y,N,w,k,S,C;return g&&b&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Permission Request Details - ",b.permissionId]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>j(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Employee Information"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Name:"})," ",null===(e=b.employee)||void 0===e?void 0:e.firstName," ",null===(s=b.employee)||void 0===s?void 0:s.lastName]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Email:"})," ",null===(t=b.employee)||void 0===t?void 0:t.email]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",U(b.status)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Current Level:"})," ",(0,Fa.jsx)("span",{className:"badge bg-info",children:b.currentApprovalLevel})]})]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Time Details"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Start:"})," ",B(b.startDate,b.startTime)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"End:"})," ",B(b.endDate,b.endTime)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Duration:"})," ",b.duration]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Submitted:"})," ",q(b.submittedAt)]})]})]})})]}),(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Request Details"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Reason:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:b.reason}),(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Work Description:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:b.workDescription}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Assigned By:"})," ",null===(a=b.assignedBy)||void 0===a?void 0:a.firstName," ",null===(n=b.assignedBy)||void 0===n?void 0:n.lastName]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Responsible Person:"})," ",null===(r=b.responsiblePerson)||void 0===r?void 0:r.firstName," ",null===(i=b.responsiblePerson)||void 0===i?void 0:i.lastName]})})]})]})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Request Information"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Permission ID:"})," ",b.permissionId]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Current Status:"})," ",U(b.status)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Current Level:"})," ",(0,Fa.jsx)("span",{className:"badge bg-info",children:b.currentApprovalLevel})]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Submitted Date:"})," ",q(b.submittedAt)]})]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Approval Timeline"})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"approval-timeline",children:[(0,Fa.jsxs)("div",{className:"timeline-item d-flex align-items-start mb-3",children:[(0,Fa.jsx)("div",{className:"timeline-icon me-3",children:(0,Fa.jsx)("div",{className:"rounded-circle bg-success d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-check text-white"})})}),(0,Fa.jsxs)("div",{className:"timeline-content",children:[(0,Fa.jsx)("h6",{className:"mb-1 text-success",children:"Permission Submitted \u2713"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Permission request submitted by employee"}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(b.submittedAt)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(l=b.employee)||void 0===l?void 0:l.firstName," ",null===(o=b.employee)||void 0===o?void 0:o.lastName]})]})]}),!("Pending"===b.status&&"Team Manager"===b.currentApprovalLevel&&(null===(c=b.approvalHistory)||void 0===c||!c.some(e=>"Team Leader"===e.level)))&&!("Pending"===b.status&&"HR"===b.currentApprovalLevel&&(null===(d=b.approvalHistory)||void 0===d||!d.some(e=>"Team Leader"===e.level))&&(null===(u=b.approvalHistory)||void 0===u||!u.some(e=>"Team Manager"===e.level)))&&(0,Fa.jsxs)("div",{className:"timeline-item d-flex align-items-start mb-3",children:[(0,Fa.jsx)("div",{className:"timeline-icon me-3",children:"Pending"===b.status&&"Team Leader"===b.currentApprovalLevel?(0,Fa.jsx)("div",{className:"rounded-circle bg-warning d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-clock text-white"})}):null!==(m=b.approvalHistory)&&void 0!==m&&m.some(e=>"Team Leader"===e.level&&"Approved"===e.action)?(0,Fa.jsx)("div",{className:"rounded-circle bg-success d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-check text-white"})}):null!==(h=b.approvalHistory)&&void 0!==h&&h.some(e=>"Team Leader"===e.level&&"Rejected"===e.action)?(0,Fa.jsx)("div",{className:"rounded-circle bg-danger d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-x text-white"})}):(0,Fa.jsx)("div",{className:"rounded-circle bg-secondary d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-circle text-white"})})}),(0,Fa.jsx)("div",{className:"timeline-content",children:"Pending"===b.status&&"Team Leader"===b.currentApprovalLevel?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-warning",children:"Team Leader Review \ud83d\udd04"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Pending team leader approval"})]}):null!==(p=b.approvalHistory)&&void 0!==p&&p.some(e=>"Team Leader"===e.level&&"Approved"===e.action)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-success",children:"Team Leader Review \u2713"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Approved by team leader"}),((e,s)=>{const t=b.approvalHistory.find(e=>"Team Leader"===e.level&&"Approved"===e.action);return t?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(t.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(e=t.approver)||void 0===e?void 0:e.firstName," ",null===(s=t.approver)||void 0===s?void 0:s.lastName]})]}):null})()]}):null!==(x=b.approvalHistory)&&void 0!==x&&x.some(e=>"Team Leader"===e.level&&"Rejected"===e.action)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-danger",children:"Team Leader Review \u2717"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Rejected by team leader"}),((e,s)=>{const t=b.approvalHistory.find(e=>"Team Leader"===e.level&&"Rejected"===e.action);return t?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(t.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(e=t.approver)||void 0===e?void 0:e.firstName," ",null===(s=t.approver)||void 0===s?void 0:s.lastName]}),t.comments&&(0,Fa.jsxs)("div",{className:"text-muted small mt-1",children:[(0,Fa.jsx)("strong",{children:"Reason:"})," ",t.comments]})]}):null})()]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-muted",children:"Team Leader Review"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Awaiting team leader review"})]})})]}),!("Pending"===b.status&&"HR"===b.currentApprovalLevel&&(null===(f=b.approvalHistory)||void 0===f||!f.some(e=>"Team Manager"===e.level))&&(null===(v=b.approvalHistory)||void 0===v||!v.some(e=>"Team Leader"===e.level)))&&(0,Fa.jsxs)("div",{className:"timeline-item d-flex align-items-start mb-3",children:[(0,Fa.jsx)("div",{className:"timeline-icon me-3",children:"Team Leader Approved"===b.status&&"Team Manager"===b.currentApprovalLevel?(0,Fa.jsx)("div",{className:"rounded-circle bg-primary d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-clock text-white"})}):null!==(y=b.approvalHistory)&&void 0!==y&&y.some(e=>"Team Manager"===e.level&&"Approved"===e.action)?(0,Fa.jsx)("div",{className:"rounded-circle bg-success d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-check text-white"})}):null!==(N=b.approvalHistory)&&void 0!==N&&N.some(e=>"Team Manager"===e.level&&"Rejected"===e.action)?(0,Fa.jsx)("div",{className:"rounded-circle bg-danger d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-x text-white"})}):(0,Fa.jsx)("div",{className:"rounded-circle bg-light border d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-circle text-muted"})})}),(0,Fa.jsx)("div",{className:"timeline-content",children:"Team Leader Approved"===b.status&&"Team Manager"===b.currentApprovalLevel?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-primary",children:"Team Manager Review \ud83d\udd04"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Pending team manager approval"})]}):null!==(w=b.approvalHistory)&&void 0!==w&&w.some(e=>"Team Manager"===e.level&&"Approved"===e.action)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-success",children:"Team Manager Review \u2713"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Approved by team manager"}),((e,s)=>{const t=b.approvalHistory.find(e=>"Team Manager"===e.level&&"Approved"===e.action);return t?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(t.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(e=t.approver)||void 0===e?void 0:e.firstName," ",null===(s=t.approver)||void 0===s?void 0:s.lastName]})]}):null})()]}):null!==(k=b.approvalHistory)&&void 0!==k&&k.some(e=>"Team Manager"===e.level&&"Rejected"===e.action)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-danger",children:"Team Manager Review \u2717"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Rejected by team manager"}),((e,s)=>{const t=b.approvalHistory.find(e=>"Team Manager"===e.level&&"Rejected"===e.action);return t?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(t.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(e=t.approver)||void 0===e?void 0:e.firstName," ",null===(s=t.approver)||void 0===s?void 0:s.lastName]}),t.comments&&(0,Fa.jsxs)("div",{className:"text-muted small mt-1",children:[(0,Fa.jsx)("strong",{children:"Reason:"})," ",t.comments]})]}):null})()]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-muted",children:"Team Manager Review"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Awaiting team manager review"})]})})]}),(0,Fa.jsxs)("div",{className:"timeline-item d-flex align-items-start",children:[(0,Fa.jsx)("div",{className:"timeline-icon me-3",children:"Team Manager Approved"===b.status&&"HR"===b.currentApprovalLevel?(0,Fa.jsx)("div",{className:"rounded-circle bg-info d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-clock text-white"})}):"HR Approved"===b.status?(0,Fa.jsx)("div",{className:"rounded-circle bg-success d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-check text-white"})}):null!==(S=b.approvalHistory)&&void 0!==S&&S.some(e=>"HR"===e.level&&"Rejected"===e.action)?(0,Fa.jsx)("div",{className:"rounded-circle bg-danger d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-x text-white"})}):(0,Fa.jsx)("div",{className:"rounded-circle bg-light border d-flex align-items-center justify-content-center",style:{width:"32px",height:"32px"},children:(0,Fa.jsx)("i",{className:"bi bi-circle text-muted"})})}),(0,Fa.jsx)("div",{className:"timeline-content",children:"Team Manager Approved"===b.status&&"HR"===b.currentApprovalLevel?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-info",children:"HR Final Approval \ud83d\udd04"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Pending HR final approval"})]}):"HR Approved"===b.status?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-success",children:"HR Final Approval \u2713"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Approved by HR - Request completed"}),((e,s,t)=>{const a=null===(e=b.approvalHistory)||void 0===e?void 0:e.find(e=>"HR"===e.level&&"Approved"===e.action);return a?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(a.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(s=a.approver)||void 0===s?void 0:s.firstName," ",null===(t=a.approver)||void 0===t?void 0:t.lastName]})]}):null})()]}):null!==(C=b.approvalHistory)&&void 0!==C&&C.some(e=>"HR"===e.level&&"Rejected"===e.action)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-danger",children:"HR Final Approval \u2717"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Rejected by HR"}),((e,s)=>{const t=b.approvalHistory.find(e=>"HR"===e.level&&"Rejected"===e.action);return t?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-1"}),q(t.timestamp)]}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-1"}),null===(e=t.approver)||void 0===e?void 0:e.firstName," ",null===(s=t.approver)||void 0===s?void 0:s.lastName]}),t.comments&&(0,Fa.jsxs)("div",{className:"text-muted small mt-1",children:[(0,Fa.jsx)("strong",{children:"Reason:"})," ",t.comments]})]}):null})()]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("h6",{className:"mb-1 text-muted",children:"HR Final Approval"}),(0,Fa.jsx)("p",{className:"mb-1 text-muted small",children:"Awaiting HR final approval"})]})})]})]})})]})})]})]}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>j(!1),children:"Close"})})]})})})})(),y&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle me-2"}),"Reject Permission Request"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>{N(!1),k("")}})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsx)("p",{children:"Are you sure you want to reject this permission request?"}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Rejection Reason *"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:w,onChange:e=>k(e.target.value),placeholder:"Please provide a reason for rejection...",required:!0})]})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>{N(!1),k("")},children:"Cancel"}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:H,disabled:!w.trim(),children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle me-1"}),"Reject Request"]})]})]})})})]})},pl=()=>{const e=se(),[s,t]=(0,r.useState)({currentMonth:{month:(new Date).getMonth()+1,year:(new Date).getFullYear(),totalEmployees:0,processedPayrolls:0,pendingPayrolls:0,totalGrossSalary:0,totalNetSalary:0},recentActivity:[],pendingApprovals:[],upcomingDeadlines:[]}),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)("");(0,r.useEffect)(()=>{o()},[]);const o=async()=>{try{n(!0);const e=new Date,s=await fetch(`/api/payroll/summary?month=${e.getMonth()+1}&year=${e.getFullYear()}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(s.ok){const e=await s.json();t(s=>({...s,currentMonth:{...s.currentMonth,...e.data}}))}const a=await fetch("/api/payroll?page=1&limit=5&sortBy=updatedAt&sortOrder=desc",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(a.ok){const e=await a.json();t(s=>({...s,recentActivity:e.data.docs||[]}))}}catch(i){console.error("Error fetching dashboard data:",i),l("Failed to load dashboard data")}finally{n(!1)}},c=e=>{switch(e){case"Draft":default:return"bg-secondary";case"Processed":return"bg-warning";case"Paid":return"bg-success";case"Hold":return"bg-danger"}},d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),u=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e-1];return a?(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-currency-dollar me-2"}),"Payroll Dashboard"]}),(0,Fa.jsxs)("p",{className:"text-muted mb-0",children:[u(s.currentMonth.month)," ",s.currentMonth.year," Overview"]})]}),(0,Fa.jsxs)("div",{className:"btn-group",children:[(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/admin/payroll/process"),children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Process Payroll"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-primary",onClick:()=>e("/admin/payroll/structure"),children:[(0,Fa.jsx)("i",{className:"bi bi-calculator me-2"}),"Salary Structures"]})]})]})})}),i&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),i]})})}),(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3 mb-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("div",{className:"bg-primary bg-opacity-10 p-3 rounded",children:(0,Fa.jsx)("i",{className:"bi bi-people text-primary fs-4"})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Total Employees"}),(0,Fa.jsx)("h3",{className:"mb-0",children:s.currentMonth.totalEmployees})]})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3 mb-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("div",{className:"bg-success bg-opacity-10 p-3 rounded",children:(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success fs-4"})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Processed"}),(0,Fa.jsx)("h3",{className:"mb-0",children:s.currentMonth.paidCount||0})]})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3 mb-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("div",{className:"bg-warning bg-opacity-10 p-3 rounded",children:(0,Fa.jsx)("i",{className:"bi bi-clock text-warning fs-4"})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Pending"}),(0,Fa.jsx)("h3",{className:"mb-0",children:s.currentMonth.pendingCount||0})]})]})})})}),(0,Fa.jsx)("div",{className:"col-md-3 mb-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"flex-shrink-0",children:(0,Fa.jsx)("div",{className:"bg-info bg-opacity-10 p-3 rounded",children:(0,Fa.jsx)("i",{className:"bi bi-currency-rupee text-info fs-4"})})}),(0,Fa.jsxs)("div",{className:"flex-grow-1 ms-3",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-1",children:"Total Payout"}),(0,Fa.jsx)("h3",{className:"mb-0 small",children:d(s.currentMonth.totalNetSalary)})]})]})})})})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-lg-8 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0 pb-0",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-activity me-2"}),"Recent Payroll Activity"]}),(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>e("/admin/payroll"),children:"View All"})]})}),(0,Fa.jsx)("div",{className:"card-body",children:s.recentActivity.length>0?(0,Fa.jsx)("div",{className:"list-group list-group-flush",children:s.recentActivity.map(e=>{var s,t;return(0,Fa.jsx)("div",{className:"list-group-item border-0 px-0",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("h6",{className:"mb-1",children:[null===(s=e.employee)||void 0===s?void 0:s.firstName," ",null===(t=e.employee)||void 0===t?void 0:t.lastName]}),(0,Fa.jsxs)("p",{className:"mb-1 text-muted small",children:[u(e.payPeriod.month)," ",e.payPeriod.year," \u2022 Net: ",d(e.netSalary)]}),(0,Fa.jsx)("small",{className:"text-muted",children:new Date(e.updatedAt).toLocaleDateString()})]}),(0,Fa.jsx)("span",{className:`badge ${c(e.status)}`,children:e.status})]})},e._id)})}):(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox text-muted fs-1"}),(0,Fa.jsx)("p",{className:"text-muted mt-2",children:"No recent payroll activity"})]})})]})}),(0,Fa.jsx)("div",{className:"col-lg-4 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0 pb-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-lightning me-2"}),"Quick Actions"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-grid gap-2",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-primary text-start",onClick:()=>e("/admin/payroll/process"),children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Process Monthly Payroll"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-success text-start",onClick:()=>e("/admin/payroll/payslips"),children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-text me-2"}),"Generate Payslips"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-info text-start",onClick:()=>e("/admin/payroll/structure"),children:[(0,Fa.jsx)("i",{className:"bi bi-calculator me-2"}),"Manage Salary Structures"]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-warning text-start",onClick:()=>e("/admin/payroll/reimbursements"),children:[(0,Fa.jsx)("i",{className:"bi bi-receipt me-2"}),"Review Reimbursements"]}),(0,Fa.jsx)("hr",{}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary text-start",onClick:()=>e("/admin/reports/payroll"),children:[(0,Fa.jsx)("i",{className:"bi bi-bar-chart me-2"}),"Payroll Reports"]})]})})]})})]})]})},xl=()=>{const e=se(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)({isActive:"true",role:"",search:""}),[d,u]=(0,r.useState)({page:1,limit:10,total:0,totalPages:0});(0,r.useEffect)(()=>{m()},[o,d.page]);const m=async()=>{try{n(!0);const e=new URLSearchParams({page:d.page,limit:d.limit,...o}),s=await fetch(`/api/salary-structures?${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("Failed to fetch salary structures");{const e=await s.json();t(e.data.docs||[]),u(s=>({...s,total:e.data.totalDocs||0,totalPages:e.data.totalPages||0}))}}catch(i){console.error("Error fetching salary structures:",i),l("Failed to load salary structures")}finally{n(!1)}},h=(e,s)=>{c(t=>({...t,[e]:s})),u(e=>({...e,page:1}))},p=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),x=e=>{const s=e.basicSalary||0,t=Object.values(e.allowances||{}).reduce((e,t)=>"percentage"===t.type?e+s*t.value/100:e+(t.value||0),0);return s+t};return a&&0===s.length?(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-calculator me-2"}),"Salary Structures"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Manage salary templates and structures"})]}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/admin/payroll/structure/new"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-2"}),"Create Structure"]})]})})}),i&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),i,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l("")})]})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",value:o.isActive,onChange:e=>h("isActive",e.target.value),children:[(0,Fa.jsx)("option",{value:"",children:"All"}),(0,Fa.jsx)("option",{value:"true",children:"Active"}),(0,Fa.jsx)("option",{value:"false",children:"Inactive"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Role"}),(0,Fa.jsxs)("select",{className:"form-select",value:o.role,onChange:e=>h("role",e.target.value),children:[(0,Fa.jsx)("option",{value:"",children:"All Roles"}),(0,Fa.jsx)("option",{value:"Employee",children:"Employee"}),(0,Fa.jsx)("option",{value:"Team Leader",children:"Team Leader"}),(0,Fa.jsx)("option",{value:"Team Manager",children:"Team Manager"}),(0,Fa.jsx)("option",{value:"HR Executive",children:"HR Executive"}),(0,Fa.jsx)("option",{value:"HR Manager",children:"HR Manager"}),(0,Fa.jsx)("option",{value:"HR BP",children:"HR BP"}),(0,Fa.jsx)("option",{value:"Vice President",children:"Vice President"}),(0,Fa.jsx)("option",{value:"Admin",children:"Admin"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Search"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",placeholder:"Search by name or description...",value:o.search,onChange:e=>h("search",e.target.value)})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"\xa0"}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary w-100",onClick:()=>{c({isActive:"true",role:"",search:""}),u(e=>({...e,page:1}))},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Reset"]})]})]})})})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:s.length>0?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Structure Name"}),(0,Fa.jsx)("th",{children:"Basic Salary"}),(0,Fa.jsx)("th",{children:"Gross Salary"}),(0,Fa.jsx)("th",{children:"Applicable For"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:s.map(s=>{var t,a,n,r;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("div",{className:"d-flex align-items-center",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h6",{className:"mb-0",children:[s.name,s.isDefault&&(0,Fa.jsx)("span",{className:"badge bg-primary ms-2",children:"Default"})]}),s.description&&(0,Fa.jsx)("small",{className:"text-muted",children:s.description})]})})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{children:p(s.basicSalary)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{className:"text-success",children:p(x(s))})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(null===(t=s.applicableFor)||void 0===t||null===(a=t.roles)||void 0===a?void 0:a.length)>0&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Roles: "}),(0,Fa.jsx)("small",{children:s.applicableFor.roles.join(", ")})]}),(null===(n=s.applicableFor)||void 0===n||null===(r=n.departments)||void 0===r?void 0:r.length)>0&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Departments: "}),(0,Fa.jsx)("small",{children:s.applicableFor.departments.map(e=>e.name).join(", ")})]})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge "+(s.isActive?"bg-success":"bg-secondary"),children:s.isActive?"Active":"Inactive"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>e(`/admin/payroll/structure/${s._id}`),title:"View Details",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-secondary",onClick:()=>e(`/admin/payroll/structure/${s._id}/edit`),title:"Edit",children:(0,Fa.jsx)("i",{className:"bi bi-pencil"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-info",onClick:()=>(async(e,s)=>{const t=prompt("Enter name for cloned structure:",`${s} - Copy`);if(t)try{const s=await fetch(`/api/salary-structures/${e}/clone`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({newName:t})});if(!s.ok){const e=await s.json();throw new Error(e.message||"Failed to clone structure")}m()}catch(i){console.error("Error cloning structure:",i),l(i.message)}})(s._id,s.name),title:"Clone",children:(0,Fa.jsx)("i",{className:"bi bi-files"})}),!s.isDefault&&(0,Fa.jsx)("button",{className:"btn btn-outline-success",onClick:()=>(async e=>{try{if(!(await fetch(`/api/salary-structures/${e}/set-default`,{method:"PATCH",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to set default structure");m()}catch(i){console.error("Error setting default structure:",i),l("Failed to set default structure")}})(s._id),title:"Set as Default",children:(0,Fa.jsx)("i",{className:"bi bi-star"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>(async(e,s)=>{if(window.confirm(`Are you sure you want to delete "${s}"?`))try{if(!(await fetch(`/api/salary-structures/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}})).ok)throw new Error("Failed to delete structure");m()}catch(i){console.error("Error deleting structure:",i),l("Failed to delete structure")}})(s._id,s.name),title:"Delete",children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]})})]},s._id)})})]})}),d.totalPages>1&&(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("small",{className:"text-muted",children:["Showing ",(d.page-1)*d.limit+1," to"," ",Math.min(d.page*d.limit,d.total)," of"," ",d.total," entries"]})}),(0,Fa.jsx)("nav",{children:(0,Fa.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===d.page?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>u(e=>({...e,page:e.page-1})),disabled:1===d.page,children:"Previous"})}),[...Array(d.totalPages)].map((e,s)=>(0,Fa.jsx)("li",{className:"page-item "+(d.page===s+1?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>u(e=>({...e,page:s+1})),children:s+1})},s+1)),(0,Fa.jsx)("li",{className:"page-item "+(d.page===d.totalPages?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>u(e=>({...e,page:e.page+1})),disabled:d.page===d.totalPages,children:"Next"})})]})})]})]}):(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-calculator text-muted fs-1"}),(0,Fa.jsx)("h5",{className:"mt-3 text-muted",children:"No Salary Structures Found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Create your first salary structure to get started."}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/admin/payroll/structure/new"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-2"}),"Create Structure"]})]})})})})})]})},fl=()=>{const e=se(),{id:s}=function(){let{matches:e}=r.useContext(Y),s=e[e.length-1];return s?s.params:{}}(),t=Boolean(s),[a,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)({name:"",description:"",basicSalary:"",effectiveFrom:(new Date).toISOString().split("T")[0],effectiveTo:"",applicableFor:{roles:[],departments:[],designations:[],experienceRange:{min:0,max:50}},allowances:{hra:{type:"percentage",value:40,maxLimit:null},da:{type:"percentage",value:0,maxLimit:null},ta:{type:"fixed",value:1600,maxLimit:null},medical:{type:"fixed",value:1250,maxLimit:null},special:{type:"percentage",value:10,maxLimit:null},other:{type:"fixed",value:0,maxLimit:null}},customAllowances:[],deductions:{epf:{type:"percentage",value:12,maxLimit:1800},esi:{type:"percentage",value:.75,applicableUpTo:21e3,maxLimit:null},professionalTax:{type:"fixed",value:200,maxLimit:null},incomeTax:{type:"percentage",value:0,maxLimit:null}},customDeductions:[],bonusRules:{annual:{type:"percentage",value:8.33,maxLimit:7e3},performance:{type:"percentage",value:0,maxLimit:null}},overtimeRules:{enabled:!0,rate:2,calculation:"hourly"},isActive:!0,isDefault:!1,status:"Draft"});(0,r.useEffect)(()=>{v(),t&&g()},[s,t]);const v=async()=>{try{const e=await fetch("/api/departments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();u(s.data||[])}}catch(o){console.error("Error fetching departments:",o)}},g=async()=>{try{n(!0);const e=await fetch(`/api/salary-structures/${s}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!e.ok)throw new Error("Failed to fetch salary structure");{const s=await e.json();b({...s.data,effectiveFrom:s.data.effectiveFrom?new Date(s.data.effectiveFrom).toISOString().split("T")[0]:"",effectiveTo:s.data.effectiveTo?new Date(s.data.effectiveTo).toISOString().split("T")[0]:""})}}catch(o){c(o.message)}finally{n(!1)}},j=(e,s)=>{b(t=>({...t,[e]:s}))},y=(e,s,t)=>{b(a=>({...a,[e]:{...a[e],[s]:t}}))},N=(e,s,t)=>{b(a=>({...a,allowances:{...a.allowances,[e]:{...a.allowances[e],[s]:t}}}))},w=(e,s,t)=>{b(a=>({...a,deductions:{...a.deductions,[e]:{...a.deductions[e],[s]:t}}}))},k=(e,s,t)=>{b(a=>({...a,customAllowances:a.customAllowances.map((a,n)=>n===e?{...a,[s]:t}:a)}))},S=(e,s,t)=>{b(a=>({...a,customDeductions:a.customDeductions.map((a,n)=>n===e?{...a,[s]:t}:a)}))},C=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0);return a?(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-calculator me-2"}),t?"Edit Salary Structure":"Create Salary Structure"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:t?"Update salary structure details":"Create a new salary structure template"})]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary me-2",onClick:()=>e("/admin/payroll/structure"),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-info me-2",onClick:async()=>{if(f.basicSalary)try{const e=await fetch("/api/salary-structures/preview",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({structureData:f,basicSalary:parseFloat(f.basicSalary)})});if(!e.ok)throw new Error("Failed to generate preview");{const s=await e.json();h(s.data),x(!0)}}catch(o){c(o.message)}else c("Basic salary is required for preview")},disabled:!f.basicSalary,children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Preview"]})]})]})})}),o&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),o,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>c("")})]})})}),(0,Fa.jsx)("form",{onSubmit:async a=>{if(a.preventDefault(),f.name&&f.basicSalary)try{l(!0),c("");const a=t?`/api/salary-structures/${s}`:"/api/salary-structures",n=t?"PUT":"POST",r=await fetch(a,{method:n,headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(f)});if(!r.ok){const e=await r.json();throw new Error(e.message||"Failed to save salary structure")}e("/admin/payroll/structure")}catch(o){c(o.message)}finally{l(!1)}else c("Name and basic salary are required")},children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-lg-8",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Basic Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Structure Name *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:f.name,onChange:e=>j("name",e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Basic Salary *"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",value:f.basicSalary,onChange:e=>j("basicSalary",parseFloat(e.target.value)||""),required:!0,min:"0"})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Description"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:f.description,onChange:e=>j("description",e.target.value)})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Effective From"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:f.effectiveFrom,onChange:e=>j("effectiveFrom",e.target.value)})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Effective To"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:f.effectiveTo,onChange:e=>j("effectiveTo",e.target.value)})]})]})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-people me-2"}),"Applicable For"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Roles"}),(0,Fa.jsx)("select",{multiple:!0,className:"form-select",value:f.applicableFor.roles,onChange:e=>{const s=Array.from(e.target.selectedOptions,e=>e.value);y("applicableFor","roles",s)},children:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"].map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))}),(0,Fa.jsx)("small",{className:"text-muted",children:"Hold Ctrl/Cmd to select multiple"})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Departments"}),(0,Fa.jsx)("select",{multiple:!0,className:"form-select",value:f.applicableFor.departments,onChange:e=>{const s=Array.from(e.target.selectedOptions,e=>e.value);y("applicableFor","departments",s)},children:d.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))}),(0,Fa.jsx)("small",{className:"text-muted",children:"Hold Ctrl/Cmd to select multiple"})]})]})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-2"}),"Standard Allowances"]})}),(0,Fa.jsx)("div",{className:"card-body",children:Object.entries(f.allowances).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"row g-3 mb-3",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("label",{className:"form-label text-capitalize",children:s.replace(/([A-Z])/g," $1")})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("select",{className:"form-select",value:t.type,onChange:e=>N(s,"type",e.target.value),children:[(0,Fa.jsx)("option",{value:"percentage",children:"Percentage"}),(0,Fa.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("input",{type:"number",className:"form-control",placeholder:"percentage"===t.type?"Percentage":"Amount",value:t.value,onChange:e=>N(s,"value",parseFloat(e.target.value)||0),min:"0"})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("input",{type:"number",className:"form-control",placeholder:"Max Limit (Optional)",value:t.maxLimit||"",onChange:e=>N(s,"maxLimit",parseFloat(e.target.value)||null),min:"0"})})]},s)})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsxs)("div",{className:"card-header bg-light d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-square me-2"}),"Custom Allowances"]}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{const e={name:"",type:"fixed",value:0,maxLimit:null,description:"",isActive:!0};b(s=>({...s,customAllowances:[...s.customAllowances,e]}))},children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-1"}),"Add Custom"]})]}),(0,Fa.jsx)("div",{className:"card-body",children:0===f.customAllowances.length?(0,Fa.jsx)("p",{className:"text-muted text-center py-3",children:'No custom allowances added. Click "Add Custom" to create one.'}):f.customAllowances.map((e,s)=>(0,Fa.jsx)("div",{className:"border rounded p-3 mb-3",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:e.name,onChange:e=>k(s,"name",e.target.value),placeholder:"e.g., Performance Bonus"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Type"}),(0,Fa.jsxs)("select",{className:"form-select",value:e.type,onChange:e=>k(s,"type",e.target.value),children:[(0,Fa.jsx)("option",{value:"percentage",children:"Percentage"}),(0,Fa.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Value"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",value:e.value,onChange:e=>k(s,"value",parseFloat(e.target.value)||0),min:"0"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Max Limit"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",value:e.maxLimit||"",onChange:e=>k(s,"maxLimit",parseFloat(e.target.value)||null),min:"0"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Active"}),(0,Fa.jsx)("div",{className:"form-check form-switch mt-2",children:(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isActive,onChange:e=>k(s,"isActive",e.target.checked)})})]}),(0,Fa.jsxs)("div",{className:"col-md-1",children:[(0,Fa.jsx)("label",{className:"form-label",children:"\xa0"}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>(e=>{b(s=>({...s,customAllowances:s.customAllowances.filter((s,t)=>t!==e)}))})(s),children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Description"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:e.description,onChange:e=>k(s,"description",e.target.value),placeholder:"Optional description"})]})]})},s))})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-dash-circle me-2"}),"Standard Deductions"]})}),(0,Fa.jsx)("div",{className:"card-body",children:Object.entries(f.deductions).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"row g-3 mb-3",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("label",{className:"form-label text-capitalize",children:s.replace(/([A-Z])/g," $1").toUpperCase()})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsxs)("select",{className:"form-select",value:t.type,onChange:e=>w(s,"type",e.target.value),children:[(0,Fa.jsx)("option",{value:"percentage",children:"Percentage"}),(0,Fa.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("input",{type:"number",className:"form-control",placeholder:"percentage"===t.type?"Percentage":"Amount",value:t.value,onChange:e=>w(s,"value",parseFloat(e.target.value)||0),min:"0"})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("input",{type:"number",className:"form-control",placeholder:"Max Limit (Optional)",value:t.maxLimit||"",onChange:e=>w(s,"maxLimit",parseFloat(e.target.value)||null),min:"0"})})]},s)})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsxs)("div",{className:"card-header bg-light d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-dash-square me-2"}),"Custom Deductions"]}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{const e={name:"",type:"fixed",value:0,maxLimit:null,description:"",isActive:!0};b(s=>({...s,customDeductions:[...s.customDeductions,e]}))},children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-1"}),"Add Custom"]})]}),(0,Fa.jsx)("div",{className:"card-body",children:0===f.customDeductions.length?(0,Fa.jsx)("p",{className:"text-muted text-center py-3",children:'No custom deductions added. Click "Add Custom" to create one.'}):f.customDeductions.map((e,s)=>(0,Fa.jsx)("div",{className:"border rounded p-3 mb-3",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Name"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:e.name,onChange:e=>S(s,"name",e.target.value),placeholder:"e.g., Loan Deduction"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Type"}),(0,Fa.jsxs)("select",{className:"form-select",value:e.type,onChange:e=>S(s,"type",e.target.value),children:[(0,Fa.jsx)("option",{value:"percentage",children:"Percentage"}),(0,Fa.jsx)("option",{value:"fixed",children:"Fixed Amount"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Value"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",value:e.value,onChange:e=>S(s,"value",parseFloat(e.target.value)||0),min:"0"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Max Limit"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",value:e.maxLimit||"",onChange:e=>S(s,"maxLimit",parseFloat(e.target.value)||null),min:"0"})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Active"}),(0,Fa.jsx)("div",{className:"form-check form-switch mt-2",children:(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:e.isActive,onChange:e=>S(s,"isActive",e.target.checked)})})]}),(0,Fa.jsxs)("div",{className:"col-md-1",children:[(0,Fa.jsx)("label",{className:"form-label",children:"\xa0"}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-danger btn-sm w-100",onClick:()=>(e=>{b(s=>({...s,customDeductions:s.customDeductions.filter((s,t)=>t!==e)}))})(s),children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Description"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",value:e.description,onChange:e=>S(s,"description",e.target.value),placeholder:"Optional description"})]})]})},s))})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-4",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Settings"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"form-check form-switch",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:f.isActive,onChange:e=>j("isActive",e.target.checked)}),(0,Fa.jsx)("label",{className:"form-check-label",children:"Active Structure"})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"form-check form-switch",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:f.isDefault,onChange:e=>j("isDefault",e.target.checked)}),(0,Fa.jsx)("label",{className:"form-check-label",children:"Default Structure"})]})})]})})]})]}),(0,Fa.jsxs)("div",{className:"col-lg-4",children:[p&&m&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm sticky-top",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Salary Preview"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("h6",{className:"text-muted",children:"Basic Salary"}),(0,Fa.jsx)("h4",{className:"text-primary",children:C(m.basic)})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("h6",{className:"text-success",children:"Allowances"}),Object.entries(m.allowances).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("span",{className:"text-capitalize",children:[s,":"]}),(0,Fa.jsx)("span",{children:C(t)})]},s)}),Object.entries(m.customAllowances||{}).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("span",{children:[s,":"]}),(0,Fa.jsx)("span",{children:C(t)})]},s)})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("h6",{className:"text-warning",children:"Deductions"}),Object.entries(m.deductions).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("span",{className:"text-capitalize",children:[s.toUpperCase(),":"]}),(0,Fa.jsx)("span",{children:C(t)})]},s)}),Object.entries(m.customDeductions||{}).map(e=>{let[s,t]=e;return(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("span",{children:[s,":"]}),(0,Fa.jsx)("span",{children:C(t)})]},s)})]}),(0,Fa.jsx)("hr",{}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsx)("h6",{className:"text-info",children:"Gross Salary:"}),(0,Fa.jsx)("h6",{className:"text-info",children:C(m.gross)})]}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsx)("h6",{className:"text-danger",children:"Total Deductions:"}),(0,Fa.jsx)("h6",{className:"text-danger",children:C(m.totalDeductions)})]})]}),(0,Fa.jsx)("hr",{}),(0,Fa.jsxs)("div",{className:"text-center",children:[(0,Fa.jsx)("h5",{className:"text-success",children:"Net Salary"}),(0,Fa.jsx)("h3",{className:"text-success",children:C(m.net)})]}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary btn-sm w-100 mt-3",onClick:()=>x(!1),children:"Close Preview"})]})]}),(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-grid gap-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:i,children:i?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Saving..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-lg me-2"}),t?"Update Structure":"Create Structure"]})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>e("/admin/payroll/structure"),children:"Cancel"})]})})})]})]})})]})},bl=()=>{var e,s,t,a,n,i;const{user:l}=Ya(),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)(!0),[m,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[]);const f=async()=>{try{u(!0);const e=await Ma.get("/payroll/employee/payslips");c(e.data)}catch(e){console.error("Error fetching payslips:",e)}finally{u(!1)}},b=async e=>{try{const s=await Ma.get(`/payroll/payslips/${e}/download`,{responseType:"blob"}),t=window.URL.createObjectURL(new Blob([s.data])),a=document.createElement("a");a.href=t,a.setAttribute("download",`payslip_${e}.pdf`),document.body.appendChild(a),a.click(),a.remove()}catch(s){console.error("Error downloading payslip:",s),alert("Download functionality will be available soon")}},v=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(e),g=(e,s)=>new Date(s,e-1).toLocaleDateString("en-US",{month:"long",year:"numeric"});return d?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Fa.jsx)("h2",{children:"My Payslips"})}),0===o.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-text display-1 text-muted"}),(0,Fa.jsx)("h4",{className:"mt-3",children:"No Payslips Found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Your payslips will appear here once they are generated."})]}):(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Pay Period"}),(0,Fa.jsx)("th",{children:"Basic Salary"}),(0,Fa.jsx)("th",{children:"Gross Salary"}),(0,Fa.jsx)("th",{children:"Deductions"}),(0,Fa.jsx)("th",{children:"Net Salary"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:o.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("div",{children:(0,Fa.jsx)("strong",{children:g(e.payPeriod.month,e.payPeriod.year)})})}),(0,Fa.jsx)("td",{children:v(e.basicSalary)}),(0,Fa.jsx)("td",{children:v(e.grossSalary)}),(0,Fa.jsx)("td",{children:v(e.totalDeductions)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{className:"text-success",children:v(e.netSalary)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge "+("Paid"===e.status?"bg-success":"Processed"===e.status?"bg-warning":"Hold"===e.status?"bg-danger":"bg-secondary"),children:e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group",role:"group",children:[(0,Fa.jsxs)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>(e=>{h(e),x(!0)})(e),children:[(0,Fa.jsx)("i",{className:"bi bi-eye"})," View"]}),(0,Fa.jsxs)("button",{className:"btn btn-sm btn-outline-success",onClick:()=>b(e._id),children:[(0,Fa.jsx)("i",{className:"bi bi-download"})," Download"]})]})})]},e._id))})]})})})})]})}),p&&m&&(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:["Payslip Details - ",g(m.payPeriod.month,m.payPeriod.year)]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>x(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row mb-3",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{children:"Employee Information"}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Name:"})," ",null===(e=m.employee)||void 0===e?void 0:e.firstName," ",null===(s=m.employee)||void 0===s?void 0:s.lastName]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Employee ID:"})," ",null===(t=m.employee)||void 0===t?void 0:t.employeeId]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Department:"})," ",(null===(a=m.employee)||void 0===a||null===(n=a.department)||void 0===n?void 0:n.name)||"N/A"]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{children:"Pay Period"}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Month:"})," ",g(m.payPeriod.month,m.payPeriod.year)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Status:"}),(0,Fa.jsx)("span",{className:"badge ms-2 "+("Paid"===m.status?"bg-success":"Processed"===m.status?"bg-warning":"Hold"===m.status?"bg-danger":"bg-secondary"),children:m.status})]})]})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{children:"Earnings"}),(0,Fa.jsx)("table",{className:"table table-sm",children:(0,Fa.jsxs)("tbody",{children:[(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:"Basic Salary"}),(0,Fa.jsx)("td",{className:"text-end",children:v(m.basicSalary)})]}),m.allowances&&Object.entries(m.allowances).map(e=>{let[s,t]=e;return t>0?(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:s.toUpperCase()}),(0,Fa.jsx)("td",{className:"text-end",children:v(t)})]},s):null}),m.bonus>0&&(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:"Bonus"}),(0,Fa.jsx)("td",{className:"text-end",children:v(m.bonus)})]}),m.incentives>0&&(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:"Incentives"}),(0,Fa.jsx)("td",{className:"text-end",children:v(m.incentives)})]}),(null===(i=m.overtime)||void 0===i?void 0:i.amount)>0&&(0,Fa.jsxs)("tr",{children:[(0,Fa.jsxs)("td",{children:["Overtime (",m.overtime.hours," hrs)"]}),(0,Fa.jsx)("td",{className:"text-end",children:v(m.overtime.amount)})]}),(0,Fa.jsxs)("tr",{className:"table-success",children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{children:"Gross Salary"})}),(0,Fa.jsx)("td",{className:"text-end",children:(0,Fa.jsx)("strong",{children:v(m.grossSalary)})})]})]})})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{children:"Deductions"}),(0,Fa.jsx)("table",{className:"table table-sm",children:(0,Fa.jsxs)("tbody",{children:[m.deductions&&Object.entries(m.deductions).map(e=>{let[s,t]=e;return t>0?(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:s.toUpperCase()}),(0,Fa.jsx)("td",{className:"text-end",children:v(t)})]},s):null}),(0,Fa.jsxs)("tr",{className:"table-danger",children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{children:"Total Deductions"})}),(0,Fa.jsx)("td",{className:"text-end",children:(0,Fa.jsx)("strong",{children:v(m.totalDeductions)})})]})]})})]})]}),(0,Fa.jsx)("div",{className:"row mt-3",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"alert alert-success",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:["Net Salary: ",v(m.netSalary)]})})})}),m.attendance&&(0,Fa.jsx)("div",{className:"row mt-3",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("h6",{children:"Attendance Summary"}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Working Days"}),(0,Fa.jsx)("div",{className:"fw-bold",children:m.attendance.workingDays})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Present Days"}),(0,Fa.jsx)("div",{className:"fw-bold text-success",children:m.attendance.presentDays})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Absent Days"}),(0,Fa.jsx)("div",{className:"fw-bold text-danger",children:m.attendance.absentDays})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Leave Days"}),(0,Fa.jsx)("div",{className:"fw-bold text-warning",children:m.attendance.leaveDays})]})]})]})})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-success",onClick:()=>b(m._id),children:[(0,Fa.jsx)("i",{className:"bi bi-download"})," Download PDF"]}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>x(!1),children:"Close"})]})]})})}),p&&(0,Fa.jsx)("div",{className:"modal-backdrop fade show"})]})},vl=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(!1),[o,c]=(0,r.useState)(null),[d,u]=(0,r.useState)({category:"",subcategory:"",amount:"",currency:"INR",description:"",expenseDate:"",businessPurpose:"",priority:"Normal",receipts:[]}),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)([]);(0,r.useEffect)(()=>{f(),b()},[]);const f=async()=>{try{var e;n(!0);const s=await Ma.get("/reimbursements/employee"),a=(null===(e=s.data)||void 0===e?void 0:e.data)||s.data||[];t(Array.isArray(a)?a:[])}catch(s){console.error("Error fetching reimbursements:",s),t([])}finally{n(!1)}},b=async()=>{try{const e=await Ma.get("/reimbursements/config");c(e.data)}catch(e){console.error("Error fetching reimbursement config:",e),c({data:{categories:[{value:"Travel",label:"Travel",monthlyLimit:15e3},{value:"Food",label:"Food & Meals",monthlyLimit:5e3},{value:"Internet",label:"Internet",monthlyLimit:2e3},{value:"Medical",label:"Medical",monthlyLimit:1e4},{value:"Other",label:"Other",monthlyLimit:5e3}],currencies:["INR","USD"],priorities:["Low","Normal","High","Urgent"]}})}},v=e=>{const{name:s,value:t}=e.target;u(e=>({...e,[s]:t}))},g=e=>{const s={Draft:{class:"bg-secondary",text:"Draft"},Submitted:{class:"bg-info",text:"Submitted"},"Under Review":{class:"bg-warning",text:"Under Review"},"Manager Approved":{class:"bg-primary",text:"Manager Approved"},"HR Review":{class:"bg-warning",text:"HR Review"},"Finance Review":{class:"bg-warning",text:"Finance Review"},Approved:{class:"bg-success",text:"Approved"},Rejected:{class:"bg-danger",text:"Rejected"},Paid:{class:"bg-success",text:"Paid"},Cancelled:{class:"bg-secondary",text:"Cancelled"}}[e]||{class:"bg-secondary",text:e};return(0,Fa.jsx)("span",{className:`badge ${s.class}`,children:s.text})},j=e=>{if(!o)return null;const s=o.data.categories.find(s=>s.value===e);return s?s.monthlyLimit:null};return a?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[(0,Fa.jsx)("h2",{children:"My Reimbursements"}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>l(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle"})," New Request"]})]}),0===s.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-receipt display-1 text-muted"}),(0,Fa.jsx)("h4",{className:"mt-3",children:"No Reimbursement Requests"}),(0,Fa.jsx)("p",{className:"text-muted",children:"Submit your first reimbursement request to get started."}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>l(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle"})," New Request"]})]}):(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Expense Date"}),(0,Fa.jsx)("th",{children:"Category"}),(0,Fa.jsx)("th",{children:"Description"}),(0,Fa.jsx)("th",{children:"Amount"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Submitted On"}),(0,Fa.jsx)("th",{children:"Current Approver"})]})}),(0,Fa.jsx)("tbody",{children:s.map(e=>{return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{className:"text-muted",children:e.reimbursementId||e._id.slice(-6).toUpperCase()})}),(0,Fa.jsx)("td",{children:new Date(e.expenseDate).toLocaleDateString()}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-light text-dark",children:e.category})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-semibold",children:e.businessPurpose}),(0,Fa.jsx)("small",{className:"text-muted",children:e.description})]})}),(0,Fa.jsx)("td",{children:(s=e.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(s))}),(0,Fa.jsx)("td",{children:g(e.status)}),(0,Fa.jsx)("td",{children:e.submittedAt?new Date(e.submittedAt).toLocaleDateString():new Date(e.createdAt).toLocaleDateString()}),(0,Fa.jsx)("td",{children:e.currentApprover?(0,Fa.jsxs)("small",{className:"text-muted",children:[e.currentApprover.firstName," ",e.currentApprover.lastName,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("span",{className:"badge bg-info",children:e.currentApprover.role})]}):(0,Fa.jsx)("span",{className:"text-muted",children:"-"})})]},e._id);var s})})]})})})})]})}),i&&(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block"},tabIndex:"-1",children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsx)("h5",{className:"modal-title",children:"New Reimbursement Request"}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l(!1)})]}),(0,Fa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0);try{const e=new FormData;e.append("category",d.category),e.append("subcategory",d.subcategory),e.append("amount",parseFloat(d.amount)),e.append("currency",d.currency),e.append("description",d.description),e.append("expenseDate",d.expenseDate),e.append("businessPurpose",d.businessPurpose),e.append("priority",d.priority),p.forEach((s,t)=>{e.append("receipts",s)});await Ma.post("/reimbursements",e,{headers:{"Content-Type":"multipart/form-data"}});l(!1),u({category:"",subcategory:"",amount:"",currency:"INR",description:"",expenseDate:"",businessPurpose:"",priority:"Normal",receipts:[]}),x([]),f(),alert("Reimbursement request submitted successfully and sent to Admin and Vice President for approval!")}catch(a){var s,t;console.error("Error submitting reimbursement:",a);const e=(null===(s=a.response)||void 0===s||null===(t=s.data)||void 0===t?void 0:t.message)||"Error submitting reimbursement request. Please try again.";alert(e)}finally{h(!1)}},children:[(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"category",className:"form-label",children:"Category *"}),(0,Fa.jsxs)("select",{className:"form-select",id:"category",name:"category",value:d.category,onChange:v,required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Category"}),null===o||void 0===o?void 0:o.data.categories.map(e=>(0,Fa.jsxs)("option",{value:e.value,children:[e.label," (Limit: \u20b9",e.monthlyLimit.toLocaleString(),")"]},e.value))]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"subcategory",className:"form-label",children:"Subcategory"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"subcategory",name:"subcategory",value:d.subcategory,onChange:v,placeholder:"e.g., Taxi, Hotel, etc."})]})})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-8",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"amount",className:"form-label",children:"Amount *"}),(0,Fa.jsx)("input",{type:"number",className:"form-control",id:"amount",name:"amount",value:d.amount,onChange:v,min:"0",step:"0.01",required:!0}),d.category&&j(d.category)&&(0,Fa.jsxs)("div",{className:"form-text",children:["Monthly limit for ",d.category,": \u20b9",j(d.category).toLocaleString()]})]})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"currency",className:"form-label",children:"Currency"}),(0,Fa.jsx)("select",{className:"form-select",id:"currency",name:"currency",value:d.currency,onChange:v,children:null===o||void 0===o?void 0:o.data.currencies.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))})]})})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"expenseDate",className:"form-label",children:"Expense Date *"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",id:"expenseDate",name:"expenseDate",value:d.expenseDate,onChange:v,max:(new Date).toISOString().split("T")[0],required:!0})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"businessPurpose",className:"form-label",children:"Business Purpose *"}),(0,Fa.jsx)("input",{type:"text",className:"form-control",id:"businessPurpose",name:"businessPurpose",value:d.businessPurpose,onChange:v,placeholder:"e.g., Client meeting, Training session, etc.",required:!0})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"description",className:"form-label",children:"Description *"}),(0,Fa.jsx)("textarea",{className:"form-control",id:"description",name:"description",rows:"3",value:d.description,onChange:v,placeholder:"Provide detailed description of the expense...",required:!0})]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"priority",className:"form-label",children:"Priority"}),(0,Fa.jsx)("select",{className:"form-select",id:"priority",name:"priority",value:d.priority,onChange:v,children:null===o||void 0===o?void 0:o.data.priorities.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{htmlFor:"receipts",className:"form-label",children:"Receipts"}),(0,Fa.jsx)("input",{type:"file",className:"form-control",id:"receipts",name:"receipts",onChange:e=>{const s=Array.from(e.target.files);x(s)},accept:"image/*,.pdf",multiple:!0}),(0,Fa.jsx)("div",{className:"form-text",children:"Upload receipt images or PDFs (Max 5MB each)"})]})})]}),(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h6",{children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle"})," Approval Process"]}),(0,Fa.jsx)("p",{className:"mb-0",children:"Your request will be automatically sent to:"}),(0,Fa.jsxs)("ul",{className:"mb-0",children:[(0,Fa.jsx)("li",{children:"Your reporting manager (if applicable)"}),(0,Fa.jsx)("li",{children:"HR team for amounts above \u20b910,000 or Medical/Training expenses"}),(0,Fa.jsx)("li",{children:"Finance team (Admin/VP) for amounts above \u20b925,000"})]})]})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>l(!1),disabled:m,children:"Cancel"}),(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:m,children:m?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Submitting..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle"})," Submit Request"]})})]})]})]})})}),i&&(0,Fa.jsx)("div",{className:"modal-backdrop fade show"})]})},gl=()=>{const e=se(),[s,t]=(0,r.useState)(1),[a,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,u]=(0,r.useState)({month:(new Date).getMonth()+1,year:(new Date).getFullYear(),employeeIds:[],autoCalculate:!0}),[m,h]=(0,r.useState)([]),[p,x]=(0,r.useState)([]),[f,b]=(0,r.useState)(null),[v,g]=(0,r.useState)([]),[j,y]=(0,r.useState)({department:"",role:"",search:""});(0,r.useEffect)(()=>{N(),w()},[]),(0,r.useEffect)(()=>{k()},[j,m]);const N=async()=>{try{const e=await fetch("/api/users?isActive=true&limit=1000",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();h(s.data.docs||[])}}catch(i){console.error("Error fetching employees:",i),l("Failed to load employees")}},w=async()=>{try{const e=await fetch("/api/departments",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();g(s.data||[])}}catch(i){console.error("Error fetching departments:",i)}},k=()=>{let e=m.filter(e=>"Admin"!==e.role);if(j.department&&(e=e.filter(e=>{var s;return(null===(s=e.department)||void 0===s?void 0:s._id)===j.department})),j.role&&(e=e.filter(e=>e.role===j.role)),j.search){const s=j.search.toLowerCase();e=e.filter(e=>{var t;return`${e.firstName} ${e.lastName}`.toLowerCase().includes(s)||e.email.toLowerCase().includes(s)||(null===(t=e.employeeId)||void 0===t?void 0:t.toLowerCase().includes(s))})}x(e)},S=async()=>{try{n(!0),l(""),c("");const e=await fetch("/api/payroll/bulk-process",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify(d)}),s=await e.json();if(!e.ok)throw new Error(s.message||"Failed to process payroll");b(s.data),t(3),c("Payroll processing completed successfully")}catch(i){console.error("Error processing payroll:",i),l(i.message)}finally{n(!1)}},C=e=>["January","February","March","April","May","June","July","August","September","October","November","December"][e-1],T=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0);return(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Process Payroll"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Process monthly payroll for selected employees"})]})}),i&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),i,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l("")})]})})}),o&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-success alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),o,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>c("")})]})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center "+(s>=1?"text-primary":"text-muted"),children:[(0,Fa.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2 "+(s>=1?"bg-primary text-white":"bg-light"),style:{width:"32px",height:"32px"},children:s>1?(0,Fa.jsx)("i",{className:"bi bi-check"}):"1"}),(0,Fa.jsx)("span",{className:"fw-medium",children:"Select Period & Employees"})]}),(0,Fa.jsx)("div",{className:"flex-grow-1 mx-3",children:(0,Fa.jsx)("hr",{className:s>1?"border-primary":"border-light"})}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center "+(s>=2?"text-primary":"text-muted"),children:[(0,Fa.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2 "+(s>=2?"bg-primary text-white":"bg-light"),style:{width:"32px",height:"32px"},children:s>2?(0,Fa.jsx)("i",{className:"bi bi-check"}):"2"}),(0,Fa.jsx)("span",{className:"fw-medium",children:"Review & Process"})]}),(0,Fa.jsx)("div",{className:"flex-grow-1 mx-3",children:(0,Fa.jsx)("hr",{className:s>2?"border-primary":"border-light"})}),(0,Fa.jsxs)("div",{className:"d-flex align-items-center "+(s>=3?"text-primary":"text-muted"),children:[(0,Fa.jsx)("div",{className:"rounded-circle d-flex align-items-center justify-content-center me-2 "+(s>=3?"bg-success text-white":"bg-light"),style:{width:"32px",height:"32px"},children:s>=3?(0,Fa.jsx)("i",{className:"bi bi-check"}):"3"}),(0,Fa.jsx)("span",{className:"fw-medium",children:"Results"})]})]})})})})}),1===s&&(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-lg-4 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-2"}),"Payroll Period"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Month"}),(0,Fa.jsx)("select",{className:"form-select",value:d.month,onChange:e=>u(s=>({...s,month:parseInt(e.target.value)})),children:[...Array(12)].map((e,s)=>(0,Fa.jsx)("option",{value:s+1,children:C(s+1)},s+1))})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Year"}),(0,Fa.jsx)("select",{className:"form-select",value:d.year,onChange:e=>u(s=>({...s,year:parseInt(e.target.value)})),children:[...Array(5)].map((e,s)=>{const t=(new Date).getFullYear()-2+s;return(0,Fa.jsx)("option",{value:t,children:t},t)})})]})]}),(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",id:"autoCalculate",checked:d.autoCalculate,onChange:e=>u(s=>({...s,autoCalculate:e.target.checked}))}),(0,Fa.jsx)("label",{className:"form-check-label",htmlFor:"autoCalculate",children:"Auto-calculate salaries using salary structures"})]})})]})]})}),(0,Fa.jsx)("div",{className:"col-lg-8 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-people me-2"}),"Select Employees"]}),(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",id:"selectAll",checked:d.employeeIds.length===p.length&&p.length>0,onChange:e=>{return s=e.target.checked,void u(e=>({...e,employeeIds:s?p.map(e=>e._id):[]}));var s}}),(0,Fa.jsxs)("label",{className:"form-check-label",htmlFor:"selectAll",children:["Select All (",p.length,")"]})]})]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row g-3 mb-3",children:[(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("select",{className:"form-select form-select-sm",value:j.department,onChange:e=>y(s=>({...s,department:e.target.value})),children:[(0,Fa.jsx)("option",{value:"",children:"All Departments"}),v.map(e=>(0,Fa.jsx)("option",{value:e._id,children:e.name},e._id))]})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("select",{className:"form-select form-select-sm",value:j.role,onChange:e=>y(s=>({...s,role:e.target.value})),children:[(0,Fa.jsx)("option",{value:"",children:"All Roles"}),(0,Fa.jsx)("option",{value:"Employee",children:"Employee"}),(0,Fa.jsx)("option",{value:"Team Leader",children:"Team Leader"}),(0,Fa.jsx)("option",{value:"Team Manager",children:"Team Manager"}),(0,Fa.jsx)("option",{value:"HR Executive",children:"HR Executive"}),(0,Fa.jsx)("option",{value:"HR Manager",children:"HR Manager"}),(0,Fa.jsx)("option",{value:"HR BP",children:"HR BP"}),(0,Fa.jsx)("option",{value:"Vice President",children:"Vice President"})]})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsx)("input",{type:"text",className:"form-control form-control-sm",placeholder:"Search employees...",value:j.search,onChange:e=>y(s=>({...s,search:e.target.value}))})})]}),(0,Fa.jsx)("div",{style:{maxHeight:"400px",overflowY:"auto"},children:p.length>0?(0,Fa.jsx)("div",{className:"list-group list-group-flush",children:p.map(e=>{var s;return(0,Fa.jsx)("div",{className:"list-group-item border-0 px-0",children:(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",id:`emp-${e._id}`,checked:d.employeeIds.includes(e._id),onChange:s=>{return t=e._id,a=s.target.checked,void u(e=>({...e,employeeIds:a?[...e.employeeIds,t]:e.employeeIds.filter(e=>e!==t)}));var t,a}}),(0,Fa.jsx)("label",{className:"form-check-label w-100",htmlFor:`emp-${e._id}`,children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h6",{className:"mb-0",children:[e.firstName," ",e.lastName]}),(0,Fa.jsxs)("small",{className:"text-muted",children:[e.employeeId," \u2022 ",e.role," \u2022 ",null===(s=e.department)||void 0===s?void 0:s.name]})]}),(0,Fa.jsx)("small",{className:"text-muted",children:e.email})]})})]})},e._id)})}):(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-people text-muted fs-1"}),(0,Fa.jsx)("p",{className:"text-muted mt-2",children:"No employees found"})]})})]})]})}),(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>e("/admin/payroll"),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Cancel"]}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>t(2),disabled:0===d.employeeIds.length,children:["Next: Review & Process",(0,Fa.jsx)("i",{className:"bi bi-arrow-right ms-2"})]})]})})]}),2===s&&(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Review Payroll Details"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row g-4",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"bg-light p-3 rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-2",children:"Payroll Period"}),(0,Fa.jsxs)("h4",{className:"mb-0",children:[C(d.month)," ",d.year]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"bg-light p-3 rounded",children:[(0,Fa.jsx)("h6",{className:"text-muted mb-2",children:"Selected Employees"}),(0,Fa.jsxs)("h4",{className:"mb-0",children:[d.employeeIds.length," employees"]})]})})]}),(0,Fa.jsxs)("div",{className:"mt-4",children:[(0,Fa.jsx)("h6",{className:"mb-3",children:"Processing Options"}),(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",id:"autoCalculateReview",checked:d.autoCalculate,onChange:e=>u(s=>({...s,autoCalculate:e.target.checked}))}),(0,Fa.jsxs)("label",{className:"form-check-label",htmlFor:"autoCalculateReview",children:[(0,Fa.jsx)("strong",{children:"Auto-calculate salaries"}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:"Automatically calculate salaries using assigned salary structures, attendance data, and approved reimbursements."})]})]})]}),(0,Fa.jsxs)("div",{className:"alert alert-info mt-4",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),(0,Fa.jsx)("strong",{children:"What happens during processing:"}),(0,Fa.jsxs)("ul",{className:"mb-0 mt-2",children:[(0,Fa.jsx)("li",{children:"Salary structures will be applied to calculate basic salary and allowances"}),(0,Fa.jsx)("li",{children:"Attendance data will be fetched to calculate deductions for absences"}),(0,Fa.jsx)("li",{children:"Approved reimbursements will be included in the payroll"}),(0,Fa.jsx)("li",{children:"Statutory deductions (PF, ESI, Tax) will be calculated automatically"}),(0,Fa.jsx)("li",{children:'Payroll records will be created with "Draft" status for review'})]})]})]})]})}),(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>t(1),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back"]}),(0,Fa.jsx)("button",{className:"btn btn-success",onClick:S,disabled:a,children:a?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Processing..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"Process Payroll"]})})]})})]}),3===s&&(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-white border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle-fill text-success me-2"}),"Payroll Processing Results"]})}),(0,Fa.jsx)("div",{className:"card-body",children:f&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("div",{className:"row g-4 mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"bg-success bg-opacity-10 p-3 rounded text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success fs-2"}),(0,Fa.jsx)("h4",{className:"mt-2 mb-0 text-success",children:f.processed.length}),(0,Fa.jsx)("small",{className:"text-muted",children:"Successfully Processed"})]})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"bg-warning bg-opacity-10 p-3 rounded text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle text-warning fs-2"}),(0,Fa.jsx)("h4",{className:"mt-2 mb-0 text-warning",children:f.skipped.length}),(0,Fa.jsx)("small",{className:"text-muted",children:"Skipped"})]})}),(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsxs)("div",{className:"bg-danger bg-opacity-10 p-3 rounded text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle text-danger fs-2"}),(0,Fa.jsx)("h4",{className:"mt-2 mb-0 text-danger",children:f.errors.length}),(0,Fa.jsx)("small",{className:"text-muted",children:"Errors"})]})})]}),f.processed.length>0&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("h6",{className:"text-success mb-3",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"Successfully Processed (",f.processed.length,")"]}),(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-sm",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Gross Salary"}),(0,Fa.jsx)("th",{children:"Net Salary"})]})}),(0,Fa.jsx)("tbody",{children:f.processed.map((e,s)=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:e.employee}),(0,Fa.jsx)("td",{children:T(e.grossSalary)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{children:T(e.netSalary)})})]},s))})]})})]}),f.skipped.length>0&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("h6",{className:"text-warning mb-3",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),"Skipped (",f.skipped.length,")"]}),(0,Fa.jsx)("div",{className:"list-group",children:f.skipped.map((e,s)=>(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsx)("span",{children:e.employee}),(0,Fa.jsx)("small",{className:"text-muted",children:e.reason})]})},s))})]}),f.errors.length>0&&(0,Fa.jsxs)("div",{className:"mb-4",children:[(0,Fa.jsxs)("h6",{className:"text-danger mb-3",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle me-2"}),"Errors (",f.errors.length,")"]}),(0,Fa.jsx)("div",{className:"list-group",children:f.errors.map((e,s)=>(0,Fa.jsx)("div",{className:"list-group-item",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[(0,Fa.jsx)("span",{children:e.employee}),(0,Fa.jsx)("small",{className:"text-danger",children:e.error})]})},s))})]})]})})]})}),(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>e("/admin/payroll"),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back to Payroll"]}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("button",{className:"btn btn-outline-primary me-2",onClick:()=>{t(1),b(null),u(e=>({...e,employeeIds:[]}))},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-repeat me-2"}),"Process Another Batch"]}),(0,Fa.jsxs)("button",{className:"btn btn-success",onClick:()=>e("/admin/payroll/payslips"),children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-text me-2"}),"Generate Payslips"]})]})]})})]})]})},jl=e=>{var s,t,a;let{reimbursement:n,isOpen:i,onClose:l,onApprove:o,onReject:c}=e;const[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(""),[f,b]=(0,r.useState)("");if(!i||!n)return null;const v=e=>new Date(e).toLocaleDateString("en-IN"),g=n.status.includes("Review");return(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-receipt me-2"}),"Reimbursement Details"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:l})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{className:"text-muted",children:"Employee"}),(0,Fa.jsx)("p",{className:"mb-0",children:(0,Fa.jsxs)("strong",{children:[null===(s=n.employee)||void 0===s?void 0:s.firstName," ",null===(t=n.employee)||void 0===t?void 0:t.lastName]})}),(0,Fa.jsx)("small",{className:"text-muted",children:null===(a=n.employee)||void 0===a?void 0:a.employeeId})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("h6",{className:"text-muted",children:"Status"}),(0,Fa.jsx)("span",{className:`badge ${(e=>{switch(e){case"Draft":default:return"bg-secondary";case"Submitted":return"bg-info";case"Team Lead Review":case"Team Manager Review":case"HR Review":return"bg-warning";case"Approved":case"Paid":return"bg-success";case"Rejected":return"bg-danger"}})(n.status)}`,children:n.status})]})]}),(0,Fa.jsxs)("div",{className:"card mb-4",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Expense Information"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Category:"})," ",n.category]}),n.subcategory&&(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Subcategory:"})," ",n.subcategory]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Amount:"})," ",(j=n.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(j||0))]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Expense Date:"})," ",v(n.expenseDate)]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Priority:"}),(0,Fa.jsx)("span",{className:"badge ms-2 "+("High"===n.priority?"bg-warning":"Urgent"===n.priority?"bg-danger":"bg-info"),children:n.priority})]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Currency:"})," ",n.currency]})]})]}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Business Purpose:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:n.businessPurpose}),(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Description:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:n.description})]})})]})]}),n.receipts&&n.receipts.length>0&&(0,Fa.jsxs)("div",{className:"card mb-4",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:["Attachments (",n.receipts.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"row",children:n.receipts.map((e,s)=>(0,Fa.jsx)("div",{className:"col-md-6 mb-3",children:(0,Fa.jsx)("div",{className:"border rounded p-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark text-primary fs-4 me-3"}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsx)("p",{className:"mb-1 fw-medium",children:e.originalName}),(0,Fa.jsxs)("small",{className:"text-muted",children:[(e.fileSize/1024).toFixed(1)," KB \u2022 ",e.mimeType]})]}),(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>(e=>{const s=`/api/reimbursements/${n._id}/files/${e}`;window.open(s,"_blank")})(s),title:"View File",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})})]})})},s))})})]}),n.approvalChain&&n.approvalChain.length>0&&(0,Fa.jsxs)("div",{className:"card mb-4",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Approval History"})}),(0,Fa.jsx)("div",{className:"card-body",children:n.approvalChain.map((e,s)=>{var t,a;return(0,Fa.jsxs)("div",{className:"d-flex align-items-start mb-3",children:[(0,Fa.jsx)("div",{className:"badge me-3 "+("Approved"===e.action?"bg-success":"Rejected"===e.action?"bg-danger":"bg-warning"),children:e.level}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("p",{className:"mb-1",children:[(0,Fa.jsxs)("strong",{children:[null===(t=e.approver)||void 0===t?void 0:t.firstName," ",null===(a=e.approver)||void 0===a?void 0:a.lastName]}),(0,Fa.jsx)("span",{className:"badge ms-2 "+("Approved"===e.action?"bg-success":"Rejected"===e.action?"bg-danger":"bg-secondary"),children:e.action})]}),e.comments&&(0,Fa.jsxs)("p",{className:"text-muted small mb-1",children:['"',e.comments,'"']}),e.actionDate&&(0,Fa.jsx)("small",{className:"text-muted",children:v(e.actionDate)})]})]},s)})})]})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:l,children:"Close"}),g&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-success",onClick:()=>u(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-check me-2"}),"Approve"]}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:()=>h(!0),children:[(0,Fa.jsx)("i",{className:"bi bi-x me-2"}),"Reject"]})]})]})]})})}),d&&(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1060},children:(0,Fa.jsx)("div",{className:"modal-dialog",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"Approve Reimbursement"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>u(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsx)("p",{children:"Are you sure you want to approve this reimbursement request?"}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Comments (Optional)"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:p,onChange:e=>x(e.target.value),placeholder:"Add any comments or notes..."})]})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:"Cancel"}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-success",onClick:async()=>{try{await o(n._id,p),u(!1),x(""),l()}catch(e){console.error("Error approving reimbursement:",e)}},children:[(0,Fa.jsx)("i",{className:"bi bi-check me-2"}),"Approve"]})]})]})})}),m&&(0,Fa.jsx)("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.7)",zIndex:1060},children:(0,Fa.jsx)("div",{className:"modal-dialog",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle text-danger me-2"}),"Reject Reimbursement"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>h(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsx)("p",{children:"Please provide a reason for rejecting this reimbursement request:"}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsxs)("label",{className:"form-label",children:["Rejection Reason ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:f,onChange:e=>b(e.target.value),placeholder:"Please explain why this request is being rejected...",required:!0})]})]}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>h(!1),children:"Cancel"}),(0,Fa.jsxs)("button",{type:"button",className:"btn btn-danger",onClick:async()=>{try{await c(n._id,f),h(!1),b(""),l()}catch(e){console.error("Error rejecting reimbursement:",e)}},disabled:!f.trim(),children:[(0,Fa.jsx)("i",{className:"bi bi-x me-2"}),"Reject"]})]})]})})})]});var j},yl=()=>{const e=se(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)({status:"",category:"",startDate:"",endDate:"",page:1,limit:10}),[d,u]=(0,r.useState)({total:0,totalPages:0}),[m,h]=(0,r.useState)({categories:[],priorities:[]}),[p,x]=(0,r.useState)([]),[f,b]=(0,r.useState)(null),[v,g]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(),y(),N()},[o]);const j=async()=>{try{n(!0);const e=new URLSearchParams(o),s=await fetch(`/api/reimbursements?${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("Failed to fetch reimbursements");{const e=await s.json();t(e.data.docs||[]),u({total:e.data.totalDocs||0,totalPages:e.data.totalPages||0})}}catch(i){console.error("Error fetching reimbursements:",i),l("Failed to load reimbursements")}finally{n(!1)}},y=async()=>{try{const e=await fetch("/api/reimbursements/config",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();h(s.data)}}catch(i){console.error("Error fetching config:",i)}},N=async()=>{try{const e=await fetch("/api/reimbursements/pending-approvals",{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(e.ok){const s=await e.json();x(s.data||[])}}catch(i){console.error("Error fetching pending approvals:",i)}},w=e=>{switch(e){case"Draft":case"Cancelled":default:return"bg-secondary";case"Submitted":return"bg-info";case"Team Lead Review":case"Team Manager Review":case"HR Review":return"bg-warning";case"Approved":case"Paid":return"bg-success";case"Rejected":return"bg-danger"}},k=e=>{switch(e){case"Low":return"bg-light text-dark";case"Normal":default:return"bg-info";case"High":return"bg-warning";case"Urgent":return"bg-danger"}},S=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),C=async e=>{try{const s=await fetch(`/api/reimbursements/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!s.ok)throw new Error("Failed to fetch reimbursement details");{const e=await s.json();b(e.data),g(!0)}}catch(i){console.error("Error fetching reimbursement details:",i),l(i.message)}};return a&&0===s.length?(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-receipt me-2"}),"Reimbursement Management"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Manage employee reimbursement requests and approvals"})]}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/admin/payroll/reimbursements/new"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-2"}),"New Request"]})]})})}),i&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),i,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l("")})]})})}),(0,Fa.jsxs)("div",{className:"row",children:[p.length>0&&(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-warning bg-opacity-10 border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0 text-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"Pending Your Approval (",p.length,")"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("div",{className:"row g-3",children:p.slice(0,3).map(e=>{var s,t;return(0,Fa.jsx)("div",{className:"col-md-4",children:(0,Fa.jsx)("div",{className:"card border",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,Fa.jsxs)("h6",{className:"mb-0",children:[null===(s=e.employee)||void 0===s?void 0:s.firstName," ",null===(t=e.employee)||void 0===t?void 0:t.lastName]}),(0,Fa.jsx)("span",{className:`badge ${k(e.priority)}`,children:e.priority})]}),(0,Fa.jsxs)("p",{className:"text-muted small mb-2",children:[e.category," \u2022 ",S(e.amount)]}),(0,Fa.jsx)("p",{className:"small mb-3",children:e.description}),(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm w-100",children:[(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>C(e._id),title:"View Details",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),(0,Fa.jsx)("button",{className:"btn btn-success",onClick:()=>C(e._id),title:"Approve",children:(0,Fa.jsx)("i",{className:"bi bi-check"})}),(0,Fa.jsx)("button",{className:"btn btn-danger",onClick:()=>C(e._id),title:"Reject",children:(0,Fa.jsx)("i",{className:"bi bi-x"})})]})]})})},e._id)})}),p.length>3&&(0,Fa.jsx)("div",{className:"text-center mt-3",children:(0,Fa.jsxs)("button",{className:"btn btn-outline-warning",onClick:()=>c(e=>({...e,status:"Under Review"})),children:["View All Pending (",p.length,")"]})})]})]})}),(0,Fa.jsx)("div",{className:"col-12 mb-4",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",value:o.status,onChange:e=>c(s=>({...s,status:e.target.value,page:1})),children:[(0,Fa.jsx)("option",{value:"",children:"All Status"}),(0,Fa.jsx)("option",{value:"Draft",children:"Draft"}),(0,Fa.jsx)("option",{value:"Submitted",children:"Submitted"}),(0,Fa.jsx)("option",{value:"Team Lead Review",children:"Team Lead Review"}),(0,Fa.jsx)("option",{value:"Team Manager Review",children:"Team Manager Review"}),(0,Fa.jsx)("option",{value:"HR Review",children:"HR Review"}),(0,Fa.jsx)("option",{value:"Approved",children:"Approved"}),(0,Fa.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,Fa.jsx)("option",{value:"Paid",children:"Paid"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Category"}),(0,Fa.jsxs)("select",{className:"form-select",value:o.category,onChange:e=>c(s=>({...s,category:e.target.value,page:1})),children:[(0,Fa.jsx)("option",{value:"",children:"All Categories"}),m.categories.map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:o.startDate,onChange:e=>c(s=>({...s,startDate:e.target.value,page:1}))})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:o.endDate,onChange:e=>c(s=>({...s,endDate:e.target.value,page:1}))})]}),(0,Fa.jsxs)("div",{className:"col-md-2",children:[(0,Fa.jsx)("label",{className:"form-label",children:"\xa0"}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary w-100",onClick:()=>c({status:"",category:"",startDate:"",endDate:"",page:1,limit:10}),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Reset"]})]})]})})})}),(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:s.length>0?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Employee"}),(0,Fa.jsx)("th",{children:"Category"}),(0,Fa.jsx)("th",{children:"Amount"}),(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Priority"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:s.map(e=>{var s,t,a,n;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h6",{className:"mb-0",children:[null===(s=e.employee)||void 0===s?void 0:s.firstName," ",null===(t=e.employee)||void 0===t?void 0:t.lastName]}),(0,Fa.jsx)("small",{className:"text-muted",children:null===(a=e.employee)||void 0===a?void 0:a.employeeId})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("span",{className:"fw-medium",children:e.category}),e.subcategory&&(0,Fa.jsx)("div",{children:(0,Fa.jsx)("small",{className:"text-muted",children:e.subcategory})})]})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{children:S(e.amount)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:(n=e.expenseDate,new Date(n).toLocaleDateString("en-IN"))})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${w(e.status)}`,children:e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${k(e.priority)}`,children:e.priority})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",children:[(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>C(e._id),title:"View Details",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),("Team Lead Review"===e.status||"Team Manager Review"===e.status||"HR Review"===e.status)&&(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("button",{className:"btn btn-outline-success",onClick:()=>C(e._id),title:"Approve",children:(0,Fa.jsx)("i",{className:"bi bi-check"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-danger",onClick:()=>C(e._id),title:"Reject",children:(0,Fa.jsx)("i",{className:"bi bi-x"})})]}),"Approved"===e.status&&(0,Fa.jsx)("button",{className:"btn btn-outline-info",onClick:()=>(async e=>{const s=prompt("Enter transaction ID (optional):");try{const t=await fetch(`/api/reimbursements/${e}/mark-paid`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({method:"Bank Transfer",transactionId:s})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to mark as paid")}j()}catch(i){console.error("Error marking as paid:",i),l(i.message)}})(e._id),title:"Mark as Paid",children:(0,Fa.jsx)("i",{className:"bi bi-credit-card"})})]})})]},e._id)})})]})}),d.totalPages>1&&(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[(0,Fa.jsx)("div",{children:(0,Fa.jsxs)("small",{className:"text-muted",children:["Showing ",(o.page-1)*o.limit+1," to"," ",Math.min(o.page*o.limit,d.total)," of"," ",d.total," entries"]})}),(0,Fa.jsx)("nav",{children:(0,Fa.jsxs)("ul",{className:"pagination pagination-sm mb-0",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===o.page?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>c(e=>({...e,page:e.page-1})),disabled:1===o.page,children:"Previous"})}),[...Array(d.totalPages)].map((e,s)=>(0,Fa.jsx)("li",{className:"page-item "+(o.page===s+1?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>c(e=>({...e,page:s+1})),children:s+1})},s+1)),(0,Fa.jsx)("li",{className:"page-item "+(o.page===d.totalPages?"disabled":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>c(e=>({...e,page:e.page+1})),disabled:o.page===d.totalPages,children:"Next"})})]})})]})]}):(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-receipt text-muted fs-1"}),(0,Fa.jsx)("h5",{className:"mt-3 text-muted",children:"No Reimbursements Found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"No reimbursement requests match your current filters."}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>e("/admin/payroll/reimbursements/new"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus me-2"}),"Create New Request"]})]})})})})]}),(0,Fa.jsx)(jl,{reimbursement:f,isOpen:v,onClose:()=>{g(!1),b(null)},onApprove:async function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";try{const t=await fetch(`/api/reimbursements/${e}/approve-with-comments`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({comments:s})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to approve reimbursement")}j(),N(),g(!1)}catch(i){console.error("Error approving reimbursement:",i),l(i.message)}},onReject:async(e,s)=>{try{const t=await fetch(`/api/reimbursements/${e}/reject-with-comments`,{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:JSON.stringify({reason:s})});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reject reimbursement")}j(),N(),g(!1)}catch(i){console.error("Error rejecting reimbursement:",i),l(i.message)}}})]})},Nl=()=>{const e=se(),[s,t]=(0,r.useState)({attendanceDate:"",requestType:"",reason:"",requestedCheckIn:"",requestedCheckOut:"",requestedStatus:"Present",priority:"Normal"}),[a,n]=(0,r.useState)([]),[i,l]=(0,r.useState)({requestTypes:[],priorities:[],requestedStatuses:[]}),[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),[m,h]=(0,r.useState)(""),[p,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{f()},[]),(0,r.useEffect)(()=>{s.attendanceDate&&b(s.attendanceDate)},[s.attendanceDate]);const f=async()=>{try{const e=await va();l(e.data.data)}catch(d){console.error("Error fetching config:",d)}},b=async e=>{try{const s=(await ga({date:e})).data.data.find(s=>new Date(s.date).toDateString()===new Date(e).toDateString());x(s)}catch(d){console.error("Error fetching attendance data:",d)}},v=e=>{const{name:s,value:a}=e.target;t(e=>({...e,[s]:a}))},g=e=>e?new Date(e).toLocaleString():"Not recorded";return(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Attendance Regularization Request"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Submit a request to regularize your attendance record"})]}),(0,Fa.jsxs)("button",{className:"btn btn-outline-secondary",onClick:()=>e("/admin/leave/my-attendance"),children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-2"}),"Back to Attendance"]})]})})}),d&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),d,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>u("")})]})})}),m&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-success alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),m,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>h("")})]})})}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-lg-8",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary bg-opacity-10 border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0 text-primary",children:[(0,Fa.jsx)("i",{className:"bi bi-form me-2"}),"Regularization Details"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("form",{onSubmit:async t=>{t.preventDefault(),c(!0),u(""),h("");try{const t=new FormData;Object.keys(s).forEach(e=>{s[e]&&t.append(e,s[e])}),a.forEach(e=>{t.append("documents",e)}),await ba(t),h("Regularization request submitted successfully!"),setTimeout(()=>{e("/admin/leave/my-attendance")},2e3)}catch(d){var n,r;console.error("Error submitting regularization:",d),u((null===(n=d.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||d.message||"Failed to submit regularization request")}finally{c(!1)}},children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("label",{className:"form-label",children:["Attendance Date ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"attendanceDate",value:s.attendanceDate,onChange:v,max:(new Date).toISOString().split("T")[0],required:!0})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("label",{className:"form-label",children:["Request Type ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsxs)("select",{className:"form-select",name:"requestType",value:s.requestType,onChange:v,required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select request type"}),i.requestTypes.map(e=>(0,Fa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),["Missed Check-In","Missed Both","Late Arrival"].includes(s.requestType)&&(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Requested Check-in Time"}),(0,Fa.jsx)("input",{type:"datetime-local",className:"form-control",name:"requestedCheckIn",value:s.requestedCheckIn,onChange:v})]}),["Missed Check-Out","Missed Both","Early Departure"].includes(s.requestType)&&(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Requested Check-out Time"}),(0,Fa.jsx)("input",{type:"datetime-local",className:"form-control",name:"requestedCheckOut",value:s.requestedCheckOut,onChange:v})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Requested Status"}),(0,Fa.jsxs)("select",{className:"form-select",name:"requestedStatus",value:s.requestedStatus,onChange:v,children:[(0,Fa.jsx)("option",{value:"Present",children:"Present"}),(0,Fa.jsx)("option",{value:"Half Day",children:"Half Day"}),(0,Fa.jsx)("option",{value:"Work From Home",children:"Work From Home"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Priority"}),(0,Fa.jsx)("select",{className:"form-select",name:"priority",value:s.priority,onChange:v,children:i.priorities.map(e=>(0,Fa.jsx)("option",{value:e,children:e},e))})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsxs)("label",{className:"form-label",children:["Reason ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("textarea",{className:"form-control",name:"reason",value:s.reason,onChange:v,rows:"4",placeholder:"Please provide a detailed explanation for your regularization request...",maxLength:"500",required:!0}),(0,Fa.jsxs)("div",{className:"form-text",children:[s.reason.length,"/500 characters"]})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Supporting Documents (Optional)"}),(0,Fa.jsx)("input",{type:"file",className:"form-control",multiple:!0,accept:".jpg,.jpeg,.png,.pdf,.doc,.docx",onChange:e=>{const s=Array.from(e.target.files);n(s)}}),(0,Fa.jsx)("div",{className:"form-text",children:"Upload supporting documents (medical certificates, transport receipts, etc.). Max 5 files, 5MB each. Supported formats: JPG, PNG, PDF, DOC, DOCX"}),a.length>0&&(0,Fa.jsxs)("div",{className:"mt-2",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Selected files:"}),(0,Fa.jsx)("ul",{className:"list-unstyled mt-1",children:a.map((e,s)=>(0,Fa.jsxs)("li",{className:"small",children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark me-1"}),e.name," (",(e.size/1024/1024).toFixed(2)," MB)"]},s))})]})]}),(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:o,children:o?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Submitting..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-send me-2"}),"Submit Request"]})}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>e("/admin/leave/my-attendance"),children:"Cancel"})]})})]})})})]})}),(0,Fa.jsxs)("div",{className:"col-lg-4",children:[p&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-info bg-opacity-10 border-0",children:(0,Fa.jsxs)("h6",{className:"mb-0 text-info",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Current Attendance Record"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-2",children:[(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Date:"})," ",new Date(p.date).toLocaleDateString()]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Status:"}),(0,Fa.jsx)("span",{className:`badge ${(e=>{switch(e){case"Present":return"bg-success";case"Absent":return"bg-danger";case"Late":return"bg-warning";case"Half Day":return"bg-info";case"Work From Home":return"bg-primary";default:return"bg-secondary"}})(p.status)} ms-2`,children:p.status})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Check-in:"})," ",g(p.checkIn)]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Check-out:"})," ",g(p.checkOut)]}),p.workingHours&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Working Hours:"})," ",p.workingHours.toFixed(2)," hours"]}),p.isLate&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Late by:"})," ",p.lateBy," minutes"]})]})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mt-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-warning bg-opacity-10 border-0",children:(0,Fa.jsxs)("h6",{className:"mb-0 text-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-lightbulb me-2"}),"When to Use Regularization"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("ul",{className:"list-unstyled small mb-0",children:[(0,Fa.jsxs)("li",{className:"mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"Forgot to check-in or check-out"]}),(0,Fa.jsxs)("li",{className:"mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"System or biometric issues"]}),(0,Fa.jsxs)("li",{className:"mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"Work from home or field work"]}),(0,Fa.jsxs)("li",{className:"mb-2",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"Medical or transport emergencies"]}),(0,Fa.jsxs)("li",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle text-success me-2"}),"Late arrival due to valid reasons"]})]})})]})]})]})]})},wl=()=>{var e,s,t,a,n,i,l,o,c,d,u,m,h,p,x,f,b,v,g,j,y,N,w,k,S,C,T,P,R,E,_,A,D,L,O,I;const{user:M}=Ya(),[F,$]=(0,r.useState)([]),[z,H]=(0,r.useState)(!0),[U,q]=(0,r.useState)(""),[B,W]=(0,r.useState)(!1),[V,J]=(0,r.useState)(!1),[G,K]=(0,r.useState)(!1),[Y,Q]=(0,r.useState)(!1),[X,Z]=(0,r.useState)(null),[ee,se]=(0,r.useState)(""),[te,ae]=(0,r.useState)(""),ne=(()=>{switch(M.role){case"Team Leader":case"Team Lead":return{api:ja,title:"Team Leader - Regularization Dashboard",subtitle:"Review and approve attendance regularization requests",icon:"bi-clipboard-check",approveText:"Approve & Forward",canOverride:!1};case"Team Manager":case"Manager":return{api:ya,title:"Team Manager - Regularization Dashboard",subtitle:"Review and approve attendance regularization requests (Final Approval)",icon:"bi-clipboard-check",approveText:"Final Approve",canOverride:!1};case"HR Manager":case"HR BP":case"HR Executive":return{api:Na,title:"HR - Regularization Dashboard",subtitle:"Review and approve Team Manager regularization requests",icon:"bi-clipboard-check",approveText:"HR Approve",canOverride:!1,viewOnly:!1};case"VP":case"Vice President":case"Senior VP":return{api:wa,title:"VP - Regularization Dashboard",subtitle:"Executive oversight of HR attendance regularization requests",icon:"bi-clipboard-check",approveText:"VP Approve",canOverride:!0};case"Admin":case"System Administrator":case"Super Admin":return{api:wa,title:"Admin - Regularization Dashboard",subtitle:"System administration and oversight of all attendance regularization requests",icon:"bi-shield-check",approveText:"Admin Approve",canOverride:!0};default:return null}})(),re=async()=>{if(ne)try{let e;if(H(!0),q(""),(ne.api===ja||ne.api===ya||ne.api===Na||ne.api===wa)&&(e=await ne.api.getAllRegularizations({page:1,limit:100})),e.data.success){const s=e.data.data;$(s.docs||s||[])}else $([])}catch(U){var e,s;console.error("Error fetching regularizations:",U),q("Failed to load regularizations: "+((null===(e=U.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||U.message))}finally{H(!1)}};(0,r.useEffect)(()=>{ne?re():q(`Access denied. Your role (${M.role}) does not have access to the regularization dashboard.`)},[M.role]);const ie=(e,s)=>{if("Approved"===e)return"Team Leader"===s?"bg-primary":"bg-success";switch(e){case"Pending":return"bg-warning";case"Under Review":return"bg-primary";case"Rejected":return"bg-danger";default:return"bg-secondary"}},le=e=>{switch(e){case"Urgent":return"bg-danger";case"High":return"bg-warning";case"Normal":return"bg-info";default:return"bg-secondary"}},oe=e=>new Date(e).toLocaleDateString(),ce=e=>new Date(e).toLocaleString(),de=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},ue=e=>(null===e||void 0===e?void 0:e.startsWith("image/"))||(null===e||void 0===e?void 0:e.includes("pdf")),me=e=>{const s=`http://localhost:5001${e.fileUrl}`;window.open(s,"_blank")},he=F.reduce((e,s)=>(e.total++,"Pending"===s.status&&e.pending++,"Under Review"===s.status&&e.underReview++,"Approved"===s.status&&e.approved++,"Rejected"===s.status&&e.rejected++,e),{total:0,pending:0,underReview:0,approved:0,rejected:0});return ne?z?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):U?(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-danger",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),U]})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-center",children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:`${ne.icon} me-2`}),ne.title]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:ne.subtitle})]})})})}),(0,Fa.jsxs)("div",{className:"row mb-4",children:[(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm bg-warning bg-opacity-10",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history display-4 text-warning mb-2"}),(0,Fa.jsx)("h3",{className:"mb-1",children:he.pending}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Pending"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm bg-primary bg-opacity-10",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-eye display-4 text-primary mb-2"}),(0,Fa.jsx)("h3",{className:"mb-1",children:he.underReview}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Under Review"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm bg-success bg-opacity-10",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle display-4 text-success mb-2"}),(0,Fa.jsx)("h3",{className:"mb-1",children:he.approved}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Approved"})]})})}),(0,Fa.jsx)("div",{className:"col-md-3",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm bg-danger bg-opacity-10",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle display-4 text-danger mb-2"}),(0,Fa.jsx)("h3",{className:"mb-1",children:he.rejected}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Rejected"})]})})})]}),("Admin"===M.role||"System Administrator"===M.role||"Super Admin"===M.role)&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm bg-info bg-opacity-5",children:(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("h6",{className:"card-title",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"System Overview"]}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Total Requests:"}),(0,Fa.jsx)("div",{className:"fw-bold",children:he.total})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Approval Rate:"}),(0,Fa.jsxs)("div",{className:"fw-bold",children:[he.total>0?Math.round(he.approved/he.total*100):0,"%"]})]}),(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsx)("small",{className:"text-muted",children:"Pending Actions:"}),(0,Fa.jsx)("div",{className:"fw-bold",children:he.pending+he.underReview})]})]})]})})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-light border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-list-ul me-2"}),"Regularization Requests"]})}),(0,Fa.jsx)("div",{className:"card-body p-0",children:0===F.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox display-1 text-muted"}),(0,Fa.jsx)("h5",{className:"mt-3 text-muted",children:"No regularization requests found"})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover mb-0",style:{fontSize:"0.9rem"},children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{style:{width:"15%"},children:"Employee"}),(0,Fa.jsx)("th",{style:{width:"10%"},children:"Date"}),(0,Fa.jsx)("th",{style:{width:"12%"},children:"Type"}),(0,Fa.jsx)("th",{style:{width:"10%"},children:"Status"}),(0,Fa.jsx)("th",{style:{width:"10%"},children:"Level"}),(0,Fa.jsx)("th",{style:{width:"8%"},children:"Priority"}),(0,Fa.jsx)("th",{style:{width:"15%"},children:"Submitted"}),(0,Fa.jsx)("th",{style:{width:"20%"},children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:F.map(e=>{var s,t,a;return(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("strong",{style:{fontSize:"0.85rem"},children:[null===(s=e.employee)||void 0===s?void 0:s.firstName," ",null===(t=e.employee)||void 0===t?void 0:t.lastName]}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:null===(a=e.employee)||void 0===a?void 0:a.employeeId})]})}),(0,Fa.jsx)("td",{style:{fontSize:"0.85rem"},children:oe(e.attendanceDate)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-info bg-opacity-75",style:{fontSize:"0.7rem"},children:e.requestType})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${ie(e.status,e.currentLevel)}`,style:{fontSize:"0.7rem"},children:"Approved"===e.status&&"Team Leader"===e.currentLevel?"TL Approved":"Approved"===e.status&&"Team Manager"===e.currentLevel?"TM Approved":e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary bg-opacity-75",style:{fontSize:"0.7rem"},children:e.currentLevel||"HR"})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${le(e.priority)}`,style:{fontSize:"0.7rem"},children:e.priority})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{style:{fontSize:"0.75rem"},children:ce(e.submittedDate)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",role:"group",children:[(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{Z(e),Q(!0)},title:"View Details",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),("Team Leader"===M.role||"Team Lead"===M.role)&&"Pending"===e.status&&"Team Leader"===e.currentLevel||("Team Manager"===M.role||"Manager"===M.role)&&"Pending"===e.status&&"Team Manager"===e.currentLevel||["HR Manager","HR BP","HR Executive"].includes(M.role)&&"Pending"===e.status&&"HR"===e.currentLevel||["VP","Vice President","Senior VP"].includes(M.role)&&"Pending"===e.status&&"VP/Admin"===e.currentLevel||ne.canOverride&&!["VP","Vice President","Senior VP"].includes(M.role)?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>{Z(e),se(""),J(!0)},disabled:B,title:"Approve",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:(0,Fa.jsx)("i",{className:"bi bi-check-lg"})}),(0,Fa.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>{Z(e),ae(""),K(!0)},disabled:B,title:"Reject",style:{fontSize:"0.75rem",padding:"0.25rem 0.5rem"},children:(0,Fa.jsx)("i",{className:"bi bi-x-lg"})})]}):null]})})]},e._id)})})]})})})]})})}),V&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-success text-white",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-2"}),"Approve Regularization Request"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>J(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:X&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("h6",{children:"Request Details:"}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Employee:"})," ",null===(e=X.employee)||void 0===e?void 0:e.firstName," ",null===(s=X.employee)||void 0===s?void 0:s.lastName]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Date:"})," ",oe(X.attendanceDate)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Type:"})," ",X.requestType]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Reason:"})," ",X.reason]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Approval Comments (Optional)"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:ee,onChange:e=>se(e.target.value),placeholder:"Add any comments for this approval..."})]})]})}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>J(!1),children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-success",onClick:async()=>{if(X&&ne)try{W(!0),await ne.api.approveRegularization(X._id,{comments:ee});let e="Request approved successfully!";e="Team Leader"===M.role||"Team Lead"===M.role?"Request approved successfully and forwarded to Team Manager!":("Team Manager"===M.role||M.role,"Request approved successfully! Attendance has been updated."),alert(e),J(!1),Z(null),se(""),re()}catch(U){var e,s;console.error("Error approving regularization:",U),alert("Failed to approve regularization: "+((null===(e=U.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||U.message))}finally{W(!1)}},disabled:B,children:B?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Approving..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-check-lg me-2"}),ne.approveText]})})]})]})})}),G&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-danger text-white",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle me-2"}),"Reject Regularization Request"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>K(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:X&&(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("h6",{children:"Request Details:"}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Employee:"})," ",null===(t=X.employee)||void 0===t?void 0:t.firstName," ",null===(a=X.employee)||void 0===a?void 0:a.lastName]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Date:"})," ",oe(X.attendanceDate)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Type:"})," ",X.requestType]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Reason:"})," ",X.reason]})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsxs)("label",{className:"form-label",children:["Rejection Reason ",(0,Fa.jsx)("span",{className:"text-danger",children:"*"})]}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:te,onChange:e=>ae(e.target.value),placeholder:"Please provide a clear reason for rejecting this request...",required:!0})]})]})}),(0,Fa.jsxs)("div",{className:"modal-footer",children:[(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>K(!1),children:"Cancel"}),(0,Fa.jsx)("button",{type:"button",className:"btn btn-danger",onClick:async()=>{if(X&&te.trim()&&ne)try{W(!0),await ne.api.rejectRegularization(X._id,{reason:te}),K(!1),Z(null),ae(""),re(),alert("Regularization rejected successfully.")}catch(U){var e,s;console.error("Error rejecting regularization:",U),alert("Failed to reject regularization: "+((null===(e=U.response)||void 0===e||null===(s=e.data)||void 0===s?void 0:s.message)||U.message))}finally{W(!1)}else alert("Please provide a reason for rejection")},disabled:B||!te.trim(),children:B?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2",role:"status"}),"Rejecting..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-x-lg me-2"}),"Reject Request"]})})]})]})})}),Y&&X&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-file-text me-2"}),"Regularization Request Details"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>Q(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-person me-2"}),"Employee Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Name:"}),(0,Fa.jsxs)("p",{className:"mb-2",children:[null===(n=X.employee)||void 0===n?void 0:n.firstName," ",null===(i=X.employee)||void 0===i?void 0:i.lastName]})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Employee ID:"}),(0,Fa.jsx)("p",{className:"mb-2",children:null===(l=X.employee)||void 0===l?void 0:l.employeeId})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Department:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(null===(o=X.employee)||void 0===o?void 0:o.department)||"N/A"})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Role:"}),(0,Fa.jsx)("p",{className:"mb-2",children:null===(c=X.employee)||void 0===c?void 0:c.role})]})]})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-2"}),"Request Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Request ID:"}),(0,Fa.jsx)("p",{className:"mb-2",children:X.regularizationId})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Date:"}),(0,Fa.jsx)("p",{className:"mb-2",children:oe(X.attendanceDate)})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Type:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-info",children:X.requestType})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Priority:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:`badge ${le(X.priority)}`,children:X.priority})})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Reason:"}),(0,Fa.jsx)("p",{className:"mb-2",children:X.reason})]})]})})]}),(X.requestedCheckIn||X.requestedCheckOut)&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"Requested Times"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[X.requestedCheckIn&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-In:"}),(0,Fa.jsx)("p",{className:"mb-2",children:ce(X.requestedCheckIn)})]}),X.requestedCheckOut&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-Out:"}),(0,Fa.jsx)("p",{className:"mb-2",children:ce(X.requestedCheckOut)})]}),X.requestedStatus&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Requested Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:X.requestedStatus})})]})]})})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Status Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:`badge ${ie(X.status,X.currentLevel)}`,children:X.status})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Level:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:X.currentLevel})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Submitted:"}),(0,Fa.jsx)("p",{className:"mb-2",children:ce(X.submittedDate)})]}),X.approvedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Approved:"}),(0,Fa.jsx)("p",{className:"mb-2",children:ce(X.approvedDate)})]}),X.rejectedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Rejected:"}),(0,Fa.jsx)("p",{className:"mb-2",children:ce(X.rejectedDate)})]}),X.rejectionReason&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Rejection Reason:"}),(0,Fa.jsx)("p",{className:"mb-2 text-danger",children:X.rejectionReason})]})]})})]}),X.supportingDocuments&&X.supportingDocuments.length>0&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-paperclip me-2"}),"Supporting Documents (",X.supportingDocuments.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body",children:X.supportingDocuments.map((e,s)=>{var t,a;return(0,Fa.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:(a=e.mimeType,null!==a&&void 0!==a&&a.startsWith("image/")?"bi-file-earmark-image":null!==a&&void 0!==a&&a.includes("pdf")?"bi-file-earmark-pdf":null!==a&&void 0!==a&&a.includes("word")?"bi-file-earmark-word":null!==a&&void 0!==a&&a.includes("excel")||null!==a&&void 0!==a&&a.includes("spreadsheet")?"bi-file-earmark-excel":"bi-file-earmark")+" text-primary me-2",style:{fontSize:"1.5rem"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-bold",children:e.originalName}),(0,Fa.jsxs)("small",{className:"text-muted",children:[de(e.fileSize)," \u2022 Uploaded ",ce(e.uploadedAt)]})]})]}),(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",children:[ue(e.mimeType)&&(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>me(e),title:"Preview",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-success",onClick:()=>(e=>{const s=`http://localhost:5001${e.fileUrl}`,t=e.createElement("a");t.href=s,t.download=e.originalName,e.body.appendChild(t),t.click(),e.body.removeChild(t)})(e),title:"Download",children:(0,Fa.jsx)("i",{className:"bi bi-download"})})]})]}),(null===(t=e.mimeType)||void 0===t?void 0:t.startsWith("image/"))&&(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsx)("img",{src:`http://localhost:5001${e.fileUrl}`,alt:e.originalName,className:"img-fluid rounded",style:{maxHeight:"200px",cursor:"pointer"},onClick:()=>me(e)})})]},s)})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Approval History"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"timeline",children:["Pending"!==(null===(d=X.teamLeaderApproval)||void 0===d?void 0:d.status)&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===(null===(u=X.teamLeaderApproval)||void 0===u?void 0:u.status)?"bg-success":"bg-danger"} me-2`,children:(0,Fa.jsx)("i",{className:"bi "+("Approved"===(null===(m=X.teamLeaderApproval)||void 0===m?void 0:m.status)?"bi-check":"bi-x")})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:"Team Leader"}),(0,Fa.jsxs)("div",{className:"text-muted small",children:[null===(h=X.teamLeaderApproval)||void 0===h||null===(p=h.approver)||void 0===p?void 0:p.firstName," ",null===(x=X.teamLeaderApproval)||void 0===x||null===(f=x.approver)||void 0===f?void 0:f.lastName]}),(null===(b=X.teamLeaderApproval)||void 0===b?void 0:b.actionDate)&&(0,Fa.jsx)("div",{className:"text-muted small",children:ce(X.teamLeaderApproval.actionDate)}),(null===(v=X.teamLeaderApproval)||void 0===v?void 0:v.comments)&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',X.teamLeaderApproval.comments,'"']})})]})]})}),"Pending"!==(null===(g=X.teamManagerApproval)||void 0===g?void 0:g.status)&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===(null===(j=X.teamManagerApproval)||void 0===j?void 0:j.status)?"bg-success":"bg-danger"} me-2`,children:(0,Fa.jsx)("i",{className:"bi "+("Approved"===(null===(y=X.teamManagerApproval)||void 0===y?void 0:y.status)?"bi-check":"bi-x")})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:"Team Manager"}),(0,Fa.jsxs)("div",{className:"text-muted small",children:[null===(N=X.teamManagerApproval)||void 0===N||null===(w=N.approver)||void 0===w?void 0:w.firstName," ",null===(k=X.teamManagerApproval)||void 0===k||null===(S=k.approver)||void 0===S?void 0:S.lastName]}),(null===(C=X.teamManagerApproval)||void 0===C?void 0:C.actionDate)&&(0,Fa.jsx)("div",{className:"text-muted small",children:ce(X.teamManagerApproval.actionDate)}),(null===(T=X.teamManagerApproval)||void 0===T?void 0:T.comments)&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',X.teamManagerApproval.comments,'"']})})]})]})}),"Pending"!==(null===(P=X.hrApproval)||void 0===P?void 0:P.status)&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===(null===(R=X.hrApproval)||void 0===R?void 0:R.status)?"bg-success":"bg-danger"} me-2`,children:(0,Fa.jsx)("i",{className:"bi "+("Approved"===(null===(E=X.hrApproval)||void 0===E?void 0:E.status)?"bi-check":"bi-x")})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:"HR / VP"}),(0,Fa.jsxs)("div",{className:"text-muted small",children:[null===(_=X.hrApproval)||void 0===_||null===(A=_.approver)||void 0===A?void 0:A.firstName," ",null===(D=X.hrApproval)||void 0===D||null===(L=D.approver)||void 0===L?void 0:L.lastName]}),(null===(O=X.hrApproval)||void 0===O?void 0:O.actionDate)&&(0,Fa.jsx)("div",{className:"text-muted small",children:ce(X.hrApproval.actionDate)}),(null===(I=X.hrApproval)||void 0===I?void 0:I.comments)&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',X.hrApproval.comments,'"']})})]})]})})]})})]})]})]})}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>Q(!1),children:"Close"})})]})})})]}):(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-warning",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),(0,Fa.jsx)("strong",{children:"Access Denied:"})," Your role (",M.role,") does not have access to the regularization dashboard.",(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{children:"Please contact your administrator if you believe this is an error."})]})})},kl=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(""),[o,c]=(0,r.useState)({status:"",requestType:"",startDate:"",endDate:"",page:1,limit:10}),[d,u]=(0,r.useState)(!1),[m,h]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{n(!0),l("");const s={employee:e.id,...o},a=await fa(s);if(a.data.success){const s=a.data.data;let n=s.docs||s||[];n=n.filter(s=>s.employee._id===e.id||s.employee===e.id),t(n)}else t([]),l(a.data.message||"Failed to load requests")}catch(i){var s,a;console.error("Error fetching my requests:",i),l("Failed to load your requests: "+((null===(s=i.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||i.message||"Unknown error"))}finally{n(!1)}})()},[o]);const p=e=>{const{name:s,value:t}=e.target;c(e=>({...e,[s]:t,page:1}))},x=e=>{switch(e){case"Pending":return"bg-warning";case"Under Review":return"bg-info";case"Approved":return"bg-success";case"Rejected":return"bg-danger";default:return"bg-secondary"}},f=e=>{switch(e){case"Urgent":return"bg-danger";case"High":return"bg-warning";case"Normal":return"bg-info";default:return"bg-secondary"}},b=e=>"Approved"===e.status?"Completed":"Rejected"===e.status?"Rejected":e.currentLevel||"Team Leader",v=e=>new Date(e).toLocaleDateString(),g=e=>new Date(e).toLocaleString(),j=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},y=e=>(null===e||void 0===e?void 0:e.startsWith("image/"))||(null===e||void 0===e?void 0:e.includes("pdf")),N=e=>{const s=`http://localhost:5001${e.fileUrl}`;window.open(s,"_blank")};return a?(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"400px"},children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{children:[(0,Fa.jsxs)("h2",{className:"mb-1",children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Regularization Requests"]}),(0,Fa.jsx)("p",{className:"text-muted mb-0",children:"Track the status of your attendance regularization requests"})]}),(0,Fa.jsxs)("a",{href:"/employee/regularization/request",className:"btn btn-primary",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-lg me-2"}),"New Request"]})]})})}),i&&(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"alert alert-danger alert-dismissible",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle me-2"}),i,(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>l("")})]})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"card border-0 shadow-sm",children:(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Status"}),(0,Fa.jsxs)("select",{className:"form-select",name:"status",value:o.status,onChange:p,children:[(0,Fa.jsx)("option",{value:"",children:"All Statuses"}),(0,Fa.jsx)("option",{value:"Pending",children:"Pending"}),(0,Fa.jsx)("option",{value:"Under Review",children:"Under Review"}),(0,Fa.jsx)("option",{value:"Approved",children:"Approved"}),(0,Fa.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,Fa.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Request Type"}),(0,Fa.jsxs)("select",{className:"form-select",name:"requestType",value:o.requestType,onChange:p,children:[(0,Fa.jsx)("option",{value:"",children:"All Types"}),(0,Fa.jsx)("option",{value:"Missed Check-In",children:"Missed Check-In"}),(0,Fa.jsx)("option",{value:"Missed Check-Out",children:"Missed Check-Out"}),(0,Fa.jsx)("option",{value:"Late Arrival",children:"Late Arrival"}),(0,Fa.jsx)("option",{value:"System Error",children:"System Error"}),(0,Fa.jsx)("option",{value:"Work From Home",children:"Work From Home"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"startDate",value:o.startDate,onChange:p})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Date"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",name:"endDate",value:o.endDate,onChange:p})]})]})})})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-light border-0",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-list-ul me-2"}),"Your Regularization Requests"]})}),(0,Fa.jsx)("div",{className:"card-body p-0",children:0===s.length?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox display-1 text-muted"}),(0,Fa.jsx)("h5",{className:"mt-3 text-muted",children:"No regularization requests found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"You haven't submitted any regularization requests yet."}),(0,Fa.jsxs)("a",{href:"/employee/regularization/request",className:"btn btn-primary",children:[(0,Fa.jsx)("i",{className:"bi bi-plus-lg me-2"}),"Submit Your First Request"]})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-hover mb-0",children:[(0,Fa.jsx)("thead",{className:"table-light",children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Date"}),(0,Fa.jsx)("th",{children:"Request Type"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Current Level"}),(0,Fa.jsx)("th",{children:"Priority"}),(0,Fa.jsx)("th",{children:"Submitted"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:s.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("strong",{className:"text-primary",children:e.regularizationId})}),(0,Fa.jsx)("td",{children:v(e.attendanceDate)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-info bg-opacity-75",children:e.requestType})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${x(e.status)}`,children:e.status})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary bg-opacity-75",children:b(e)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:`badge ${f(e.priority)}`,children:e.priority})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:g(e.submittedDate)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>{h(e),u(!0)},title:"View Details",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})})})]},e._id))})]})})})]})})}),d&&m&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header bg-primary text-white",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-file-text me-2"}),"My Regularization Request Details"]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close btn-close-white",onClick:()=>u(!1)})]}),(0,Fa.jsx)("div",{className:"modal-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar me-2"}),"Request Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Request ID:"}),(0,Fa.jsx)("p",{className:"mb-2",children:m.regularizationId})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Date:"}),(0,Fa.jsx)("p",{className:"mb-2",children:v(m.attendanceDate)})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Type:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-info",children:m.requestType})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Priority:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:`badge ${f(m.priority)}`,children:m.priority})})]}),(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Reason:"}),(0,Fa.jsx)("p",{className:"mb-2",children:m.reason})]})]})})]}),(m.requestedCheckIn||m.requestedCheckOut)&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),"Requested Times"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[m.requestedCheckIn&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-In:"}),(0,Fa.jsx)("p",{className:"mb-2",children:g(m.requestedCheckIn)})]}),m.requestedCheckOut&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Check-Out:"}),(0,Fa.jsx)("p",{className:"mb-2",children:g(m.requestedCheckOut)})]}),m.requestedStatus&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Requested Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:m.requestedStatus})})]})]})})]})]}),(0,Fa.jsxs)("div",{className:"col-md-6",children:[(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Status Information"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Status:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:`badge ${x(m.status)}`,children:m.status})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Current Level:"}),(0,Fa.jsx)("p",{className:"mb-2",children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:b(m)})})]}),(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Submitted:"}),(0,Fa.jsx)("p",{className:"mb-2",children:g(m.submittedDate)})]}),m.approvedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Approved:"}),(0,Fa.jsx)("p",{className:"mb-2",children:g(m.approvedDate)})]}),m.rejectedDate&&(0,Fa.jsxs)("div",{className:"col-sm-6",children:[(0,Fa.jsx)("strong",{children:"Rejected:"}),(0,Fa.jsx)("p",{className:"mb-2",children:g(m.rejectedDate)})]}),m.rejectionReason&&(0,Fa.jsxs)("div",{className:"col-12",children:[(0,Fa.jsx)("strong",{children:"Rejection Reason:"}),(0,Fa.jsx)("p",{className:"mb-2 text-danger",children:m.rejectionReason})]})]})})]}),m.supportingDocuments&&m.supportingDocuments.length>0&&(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm mb-3",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-paperclip me-2"}),"Supporting Documents (",m.supportingDocuments.length,")"]})}),(0,Fa.jsx)("div",{className:"card-body",children:m.supportingDocuments.map((e,s)=>{var t,a;return(0,Fa.jsxs)("div",{className:"border rounded p-3 mb-3",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center justify-content-between",children:[(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("i",{className:(a=e.mimeType,null!==a&&void 0!==a&&a.startsWith("image/")?"bi-file-earmark-image":null!==a&&void 0!==a&&a.includes("pdf")?"bi-file-earmark-pdf":null!==a&&void 0!==a&&a.includes("word")?"bi-file-earmark-word":null!==a&&void 0!==a&&a.includes("excel")||null!==a&&void 0!==a&&a.includes("spreadsheet")?"bi-file-earmark-excel":"bi-file-earmark")+" text-primary me-2",style:{fontSize:"1.5rem"}}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("div",{className:"fw-bold",children:e.originalName}),(0,Fa.jsxs)("small",{className:"text-muted",children:[j(e.fileSize)," \u2022 Uploaded ",g(e.uploadedAt)]})]})]}),(0,Fa.jsxs)("div",{className:"btn-group btn-group-sm",children:[y(e.mimeType)&&(0,Fa.jsx)("button",{className:"btn btn-outline-primary",onClick:()=>N(e),title:"Preview",children:(0,Fa.jsx)("i",{className:"bi bi-eye"})}),(0,Fa.jsx)("button",{className:"btn btn-outline-success",onClick:()=>(e=>{const s=`http://localhost:5001${e.fileUrl}`,t=e.createElement("a");t.href=s,t.download=e.originalName,e.body.appendChild(t),t.click(),e.body.removeChild(t)})(e),title:"Download",children:(0,Fa.jsx)("i",{className:"bi bi-download"})})]})]}),(null===(t=e.mimeType)||void 0===t?void 0:t.startsWith("image/"))&&(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsx)("img",{src:`http://localhost:5001${e.fileUrl}`,alt:e.originalName,className:"img-fluid rounded",style:{maxHeight:"200px",cursor:"pointer"},onClick:()=>N(e)})})]},s)})})]}),(0,Fa.jsxs)("div",{className:"card border-0 shadow-sm",children:[(0,Fa.jsx)("div",{className:"card-header bg-light",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clock-history me-2"}),"Approval History"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"timeline",children:[(e=>{const s=[];return e.teamManagerApproval&&s.push({role:"Team Manager",status:e.teamManagerApproval.status,comments:e.teamManagerApproval.comments,actionDate:e.teamManagerApproval.actionDate,approver:e.teamManagerApproval.approver}),e.hrApproval&&"Pending"!==e.hrApproval.status&&s.push({role:"HR",status:e.hrApproval.status,comments:e.hrApproval.comments,actionDate:e.hrApproval.actionDate,approver:e.hrApproval.approver}),s})(m).map((e,s)=>(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===e.status?"bg-success":"Rejected"===e.status?"bg-danger":"bg-secondary"} me-2`,children:"Approved"===e.status?(0,Fa.jsx)("i",{className:"bi bi-check-lg"}):"Rejected"===e.status?(0,Fa.jsx)("i",{className:"bi bi-x-lg"}):(0,Fa.jsx)("i",{className:"bi bi-clock"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:e.role}),e.approver&&(0,Fa.jsxs)("div",{className:"text-muted small",children:[e.approver.firstName," ",e.approver.lastName]}),e.actionDate&&(0,Fa.jsx)("div",{className:"text-muted small",children:g(e.actionDate)}),e.comments&&(0,Fa.jsx)("div",{className:"text-muted small mt-1",children:(0,Fa.jsxs)("em",{children:['"',e.comments,'"']})})]})]})},s)),"Pending"===m.status&&(0,Fa.jsx)("div",{className:"timeline-item mb-3",children:(0,Fa.jsxs)("div",{className:"d-flex align-items-center",children:[(0,Fa.jsx)("div",{className:"badge bg-warning me-2",children:(0,Fa.jsx)("i",{className:"bi bi-clock"})}),(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:m.currentLevel}),(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:"Pending approval"})]})]})})]})})]})]})]})}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>u(!1),children:"Close"})})]})})})]})},Sl=()=>{const{user:e}=Ya(),[s,t]=(0,r.useState)("request"),[a,n]=(0,r.useState)(!1),[i,l]=(0,r.useState)([]),[o,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[m,h]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[f,b]=(0,r.useState)({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""});(0,r.useEffect)(()=>{v()},[]),(0,r.useEffect)(()=>{"my-requests"===s&&g()},[s]),(0,r.useEffect)(()=>{f.startDate&&f.startTime&&f.endDate&&f.endTime&&j()},[f.startDate,f.startTime,f.endDate,f.endTime]);const v=async()=>{try{var s,t,a,r;console.log("\ud83d\udd04 Starting to fetch team leads and employees..."),n(!0),console.log("\ud83d\udcde Calling team leads API...");const i=await ma();console.log("\u2705 Team leads API response:",i),console.log("\ud83d\udcca Team leads response status:",i.status),console.log("\ud83d\udccb Team leads response data:",i.data);let o=[];null!==i&&void 0!==i&&null!==(s=i.data)&&void 0!==s&&s.success&&i.data.data?(o=i.data.data,console.log("\u2705 Using teamLeadsResponse.data.data structure")):null!==i&&void 0!==i&&i.data&&Array.isArray(i.data)?(o=i.data,console.log("\u2705 Using direct array structure")):null!==i&&void 0!==i&&null!==(t=i.data)&&void 0!==t&&t.data&&Array.isArray(i.data.data)?(o=i.data.data,console.log("\u2705 Using nested data structure")):console.warn("\u26a0\ufe0f Unexpected team leads response structure:",i.data),console.log("\ud83d\udcca Processed team leads array:",o),console.log("\ud83d\udd22 Team leads count:",o.length),console.log("\ud83d\udcde Calling employees API...");const d=await ha({excludeUserId:null===e||void 0===e?void 0:e._id});console.log("\u2705 Employees API response:",d),console.log("\ud83d\udcca Employees response status:",d.status),console.log("\ud83d\udccb Employees response data:",d.data);let u=[];null!==d&&void 0!==d&&null!==(a=d.data)&&void 0!==a&&a.success&&d.data.data?(u=d.data.data,console.log("\u2705 Using employeesResponse.data.data structure")):null!==d&&void 0!==d&&d.data&&Array.isArray(d.data)?(u=d.data,console.log("\u2705 Using direct array structure")):null!==d&&void 0!==d&&null!==(r=d.data)&&void 0!==r&&r.data&&Array.isArray(d.data.data)?(u=d.data.data,console.log("\u2705 Using nested data structure")):console.warn("\u26a0\ufe0f Unexpected employees response structure:",d.data),console.log("\ud83d\udcca Processed employees array:",u),console.log("\ud83d\udd22 Employees count:",u.length),Array.isArray(o)?(l(o),console.log("\u2705 Team leads state updated with",o.length,"items")):(console.error("\u274c Team leads data is not an array:",o),l([])),Array.isArray(u)?(c(u),console.log("\u2705 Employees state updated with",u.length,"items")):(console.error("\u274c Employees data is not an array:",u),c([])),console.log("\ud83c\udf89 User fetching completed successfully!")}catch(d){var i,o;console.error("\u274c Error fetching users:",d),console.error("\ud83d\udccb Error details:",null===(i=d.response)||void 0===i?void 0:i.data),console.error("\ud83d\udcca Error status:",null===(o=d.response)||void 0===o?void 0:o.status),console.error("\ud83d\udd17 Error config:",d.config),l([]),c([]),alert("Failed to load dropdown options. Please refresh the page and try again.")}finally{n(!1)}},g=async()=>{try{n(!0);const e=await Aa();u(e.data.permissions||[])}catch(e){console.error("Error fetching my requests:",e)}finally{n(!1)}},j=()=>{const e=new Date(`${f.startDate}T${f.startTime}`),s=new Date(`${f.endDate}T${f.endTime}`);if(s>e){const t=s-e,a=Math.floor(t/36e5),n=Math.floor(t%36e5/6e4);let r="";a>0&&(r+=`${a} hour${a>1?"s":""}`),n>0&&(r&&(r+=" "),r+=`${n} minute${n>1?"s":""}`),b(e=>({...e,duration:r||"0 minutes"}))}},y=(e,s)=>{b(t=>({...t,[e]:s}))},N=async e=>{e.preventDefault(),n(!0);try{if(!f.startDate||!f.startTime||!f.endDate||!f.endTime||!f.reason||!f.assignedBy||!f.responsiblePerson||!f.workDescription)return void alert("Please fill in all required fields.");console.log("Submitting permission request:",f);const e={startDate:f.startDate,startTime:f.startTime,endDate:f.endDate,endTime:f.endTime,duration:f.duration,reason:f.reason,assignedBy:f.assignedBy,responsiblePerson:f.responsiblePerson,workDescription:f.workDescription};console.log("Request data being sent:",e);const t=await _a(e);console.log("Permission API response:",t),alert("Permission request submitted successfully!"),b({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""}),"my-requests"===s&&g()}catch(i){var t,a,r;console.error("Error submitting permission request:",i),console.error("Error details:",null===(t=i.response)||void 0===t?void 0:t.data);const e=(null===(a=i.response)||void 0===a||null===(r=a.data)||void 0===r?void 0:r.message)||"Failed to submit permission request. Please try again.";alert(e)}finally{n(!1)}},w=e=>{const s={Pending:{class:"bg-warning",text:"Pending"},"Team Leader Approved":{class:"bg-info",text:"Team Leader Approved"},"Team Manager Approved":{class:"bg-primary",text:"Team Manager Approved"},"HR Approved":{class:"bg-success",text:"HR Approved"},Rejected:{class:"bg-danger",text:"Rejected"}}[e]||{class:"bg-secondary",text:e};return(0,Fa.jsx)("span",{className:`badge ${s.class}`,children:s.text})},k=e=>new Date(e).toLocaleDateString(),S=(e,s)=>`${new Date(e).toLocaleDateString()} ${s}`;return(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"d-flex justify-content-between align-items-center mb-4",children:(0,Fa.jsxs)("h2",{children:[(0,Fa.jsx)("i",{className:"bi bi-shield-check me-2"}),"Permission Management"]})})})}),(0,Fa.jsx)("div",{className:"row mb-4",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsxs)("ul",{className:"nav nav-tabs",children:[(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link "+("request"===s?"active":""),onClick:()=>t("request"),children:[(0,Fa.jsx)("i",{className:"bi bi-plus-circle me-2"}),"New Permission Request"]})}),(0,Fa.jsx)("li",{className:"nav-item",children:(0,Fa.jsxs)("button",{className:"nav-link "+("my-requests"===s?"active":""),onClick:()=>t("my-requests"),children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Requests"]})})]})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsxs)("div",{className:"col-12",children:["request"===s&&(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header bg-primary text-white",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-clipboard-check me-2"}),"Permission Request Form"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("form",{onSubmit:N,children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-calendar-range me-2"}),"Date & Time Range"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Date *"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:f.startDate,onChange:e=>y("startDate",e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Start Time *"}),(0,Fa.jsx)("input",{type:"time",className:"form-control",value:f.startTime,onChange:e=>y("startTime",e.target.value),required:!0})]})]}),(0,Fa.jsxs)("div",{className:"row mt-3",children:[(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Date *"}),(0,Fa.jsx)("input",{type:"date",className:"form-control",value:f.endDate,onChange:e=>y("endDate",e.target.value),required:!0})]}),(0,Fa.jsxs)("div",{className:"col-6",children:[(0,Fa.jsx)("label",{className:"form-label",children:"End Time *"}),(0,Fa.jsx)("input",{type:"time",className:"form-control",value:f.endTime,onChange:e=>y("endTime",e.target.value),required:!0})]})]}),f.duration&&(0,Fa.jsx)("div",{className:"mt-3",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-2"}),(0,Fa.jsx)("strong",{children:"Duration:"})," ",f.duration]})})]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-info-circle me-2"}),"Request Details"]})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Reason for Permission *"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"3",value:f.reason,onChange:e=>y("reason",e.target.value),placeholder:"Please provide a detailed reason for your permission request...",required:!0})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Who Assigned the Work? *"}),(0,Fa.jsxs)("select",{className:"form-select",value:f.assignedBy,onChange:e=>{console.log("\ud83d\udd04 Team lead selected:",e.target.value),y("assignedBy",e.target.value)},required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Team Lead/Manager"}),Array.isArray(i)&&i.length>0?i.map((e,s)=>(console.log(`\ud83d\udd0d Rendering team lead ${s+1}:`,e),(0,Fa.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," - ",e.role]},e._id||s))):(0,Fa.jsx)("option",{disabled:!0,children:a?"Loading team leads...":"No team leads available"})]}),(0,Fa.jsx)("small",{className:"text-muted",children:a?(0,Fa.jsx)("span",{children:"\ud83d\udd04 Loading team leads..."}):0===i.length?(0,Fa.jsx)("span",{children:"\u26a0\ufe0f No team leads available"}):(0,Fa.jsxs)("span",{children:["\u2705 ",i.length," team leads loaded"]})})]}),(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Who is Responsible During Absence? *"}),(0,Fa.jsxs)("select",{className:"form-select",value:f.responsiblePerson,onChange:e=>{console.log("\ud83d\udd04 Responsible person selected:",e.target.value),y("responsiblePerson",e.target.value)},required:!0,children:[(0,Fa.jsx)("option",{value:"",children:"Select Responsible Person"}),Array.isArray(o)&&o.length>0?o.map((e,s)=>(console.log(`\ud83d\udd0d Rendering employee ${s+1}:`,e),(0,Fa.jsxs)("option",{value:e._id,children:[e.firstName," ",e.lastName," - ",e.role]},e._id||s))):(0,Fa.jsx)("option",{disabled:!0,children:a?"Loading employees...":"No employees available"})]}),(0,Fa.jsx)("small",{className:"text-muted",children:a?(0,Fa.jsx)("span",{children:"\ud83d\udd04 Loading employees..."}):0===o.length?(0,Fa.jsx)("span",{children:"\u26a0\ufe0f No employees available"}):(0,Fa.jsxs)("span",{children:["\u2705 ",o.length," employees loaded"]})})]})]})]})})]}),(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h6",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-briefcase me-2"}),"Work/Task Description"]})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsxs)("div",{className:"mb-3",children:[(0,Fa.jsx)("label",{className:"form-label",children:"Describe the work/task being handled during this time *"}),(0,Fa.jsx)("textarea",{className:"form-control",rows:"4",value:f.workDescription,onChange:e=>y("workDescription",e.target.value),placeholder:"Please provide detailed information about the work or task that needs to be handled during your absence...",required:!0})]})})]}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-end gap-2",children:[(0,Fa.jsxs)("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{b({startDate:"",startTime:"",endDate:"",endTime:"",duration:"",reason:"",assignedBy:"",responsiblePerson:"",workDescription:""})},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-1"}),"Reset Form"]}),(0,Fa.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:a,children:a?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("span",{className:"spinner-border spinner-border-sm me-2"}),"Submitting..."]}):(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("i",{className:"bi bi-send me-1"}),"Submit Request"]})})]})]})})]}),"my-requests"===s&&(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsxs)("h5",{className:"mb-0",children:[(0,Fa.jsx)("i",{className:"bi bi-list-check me-2"}),"My Permission Requests"]})}),(0,Fa.jsx)("div",{className:"card-body",children:a?(0,Fa.jsx)("div",{className:"text-center py-4",children:(0,Fa.jsx)("div",{className:"spinner-border",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):0===d.length?(0,Fa.jsxs)("div",{className:"text-center py-4",children:[(0,Fa.jsx)("i",{className:"bi bi-inbox text-muted",style:{fontSize:"3rem"}}),(0,Fa.jsx)("h5",{className:"text-muted mt-2",children:"No permission requests found"}),(0,Fa.jsx)("p",{className:"text-muted",children:"You haven't submitted any permission requests yet."})]}):(0,Fa.jsx)("div",{className:"table-responsive",children:(0,Fa.jsxs)("table",{className:"table table-striped",children:[(0,Fa.jsx)("thead",{children:(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("th",{children:"Request ID"}),(0,Fa.jsx)("th",{children:"Date Range"}),(0,Fa.jsx)("th",{children:"Duration"}),(0,Fa.jsx)("th",{children:"Reason"}),(0,Fa.jsx)("th",{children:"Status"}),(0,Fa.jsx)("th",{children:"Submitted"}),(0,Fa.jsx)("th",{children:"Actions"})]})}),(0,Fa.jsx)("tbody",{children:d.map(e=>(0,Fa.jsxs)("tr",{children:[(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{className:"badge bg-secondary",children:e.permissionId})}),(0,Fa.jsx)("td",{children:(0,Fa.jsxs)("div",{children:[(0,Fa.jsx)("strong",{children:k(e.startDate)}),(0,Fa.jsx)("br",{}),(0,Fa.jsxs)("small",{className:"text-muted",children:[e.startTime," - ",e.endTime]})]})}),(0,Fa.jsx)("td",{children:e.duration}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("span",{title:e.reason,children:e.reason.length>30?`${e.reason.substring(0,30)}...`:e.reason})}),(0,Fa.jsx)("td",{children:w(e.status)}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("small",{children:k(e.submittedAt)})}),(0,Fa.jsx)("td",{children:(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-primary",onClick:()=>(async e=>{try{const s=await La(e);h(s.data.permission),x(!0)}catch(s){console.error("Error fetching permission details:",s),alert("Failed to fetch permission details.")}})(e._id),children:(0,Fa.jsx)("i",{className:"bi bi-eye"})})})]},e._id))})]})})})]})]})}),(()=>{var e,s,t,a;return p&&m&&(0,Fa.jsx)("div",{className:"modal show d-block",tabIndex:"-1",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,Fa.jsx)("div",{className:"modal-dialog modal-lg",children:(0,Fa.jsxs)("div",{className:"modal-content",children:[(0,Fa.jsxs)("div",{className:"modal-header",children:[(0,Fa.jsxs)("h5",{className:"modal-title",children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Permission Request Details - ",m.permissionId]}),(0,Fa.jsx)("button",{type:"button",className:"btn-close",onClick:()=>x(!1)})]}),(0,Fa.jsxs)("div",{className:"modal-body",children:[(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Request Information"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",w(m.status)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Current Level:"})," ",(0,Fa.jsx)("span",{className:"badge bg-info",children:m.currentApprovalLevel})]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Submitted:"})," ",k(m.submittedAt)]})]})]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Time Details"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Start:"})," ",S(m.startDate,m.startTime)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"End:"})," ",S(m.endDate,m.endTime)]}),(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Duration:"})," ",m.duration]})]})]})})]}),(0,Fa.jsxs)("div",{className:"card mb-3",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Request Details"})}),(0,Fa.jsxs)("div",{className:"card-body",children:[(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Reason:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:m.reason}),(0,Fa.jsx)("p",{children:(0,Fa.jsx)("strong",{children:"Work Description:"})}),(0,Fa.jsx)("p",{className:"text-muted",children:m.workDescription}),(0,Fa.jsxs)("div",{className:"row",children:[(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Assigned By:"})," ",null===(e=m.assignedBy)||void 0===e?void 0:e.firstName," ",null===(s=m.assignedBy)||void 0===s?void 0:s.lastName]})}),(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsxs)("p",{children:[(0,Fa.jsx)("strong",{children:"Responsible Person:"})," ",null===(t=m.responsiblePerson)||void 0===t?void 0:t.firstName," ",null===(a=m.responsiblePerson)||void 0===a?void 0:a.lastName]})})]})]})]}),m.approvalHistory&&m.approvalHistory.length>0&&(0,Fa.jsxs)("div",{className:"card",children:[(0,Fa.jsx)("div",{className:"card-header",children:(0,Fa.jsx)("h6",{className:"mb-0",children:"Approval History"})}),(0,Fa.jsx)("div",{className:"card-body",children:(0,Fa.jsx)("div",{className:"timeline",children:m.approvalHistory.map((e,s)=>{var t;return(0,Fa.jsxs)("div",{className:"timeline-item mb-3",children:[(0,Fa.jsx)("div",{className:`badge ${"Approved"===e.action?"bg-success":"bg-danger"} me-2`,children:e.action}),(0,Fa.jsx)("strong",{children:e.level})," by ",null===(t=e.approver)||void 0===t?void 0:t.name,(0,Fa.jsx)("br",{}),(0,Fa.jsx)("small",{className:"text-muted",children:k(e.timestamp)}),e.comments&&(0,Fa.jsx)("div",{className:"mt-1",children:(0,Fa.jsxs)("small",{children:[(0,Fa.jsx)("strong",{children:"Comments:"})," ",e.comments]})})]},s)})})})]})]}),(0,Fa.jsx)("div",{className:"modal-footer",children:(0,Fa.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>x(!1),children:"Close"})})]})})})})()]})},Cl=()=>{const e=se(),[s,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[i,l]=(0,r.useState)(0),[o,c]=(0,r.useState)(1),[d,u]=(0,r.useState)(1),[m,h]=(0,r.useState)(""),[p,x]=(0,r.useState)(""),[f,b]=(0,r.useState)(""),[v,g]=(0,r.useState)([]),j=(0,r.useCallback)(async()=>{try{n(!0);const e={page:o,limit:20,search:m||void 0,type:p||void 0,isRead:f||void 0},s=await ka(e);s.data.success&&(t(s.data.notifications),l(s.data.unreadCount),u(s.data.pagination.totalPages))}catch(e){console.error("Error fetching notifications:",e)}finally{n(!1)}},[o,m,p,f]),y=(e,s)=>{"type"===e&&x(s),"read"===e&&b(s),c(1)},N=e=>new Date(e).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),w=e=>{switch(e){case"checkout_reminder":return"bi-clock";case"auto_checkout":return"bi-robot";case"overtime_alert":return"bi-currency-dollar";case"system":return"bi-gear";default:return"bi-bell"}};return(0,r.useEffect)(()=>{j()},[j]),(0,Fa.jsx)("div",{className:"notifications-page",children:(0,Fa.jsxs)("div",{className:"container-fluid",children:[(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"notifications-page-header",children:(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center flex-wrap gap-3",children:[(0,Fa.jsxs)("h2",{className:"notifications-page-title",children:[(0,Fa.jsx)("i",{className:"bi bi-bell"}),"Notifications",i>0&&(0,Fa.jsx)("span",{className:"notifications-unread-badge",children:i})]}),(0,Fa.jsxs)("div",{className:"notifications-actions",children:[v.length>0&&(0,Fa.jsxs)("button",{className:"notifications-btn notifications-btn-outline",onClick:async()=>{if(0!==v.length)try{await Pa(v),t(e=>e.map(e=>v.includes(e._id)?{...e,isRead:!0,readAt:new Date}:e)),l(e=>Math.max(0,e-v.length)),g([])}catch(e){console.error("Error marking selected as read:",e)}},children:[(0,Fa.jsx)("i",{className:"bi bi-check2-all me-1"}),"Mark Selected (",v.length,")"]}),i>0&&(0,Fa.jsxs)("button",{className:"notifications-btn notifications-btn-primary",onClick:async()=>{try{await Ra(),t(e=>e.map(e=>({...e,isRead:!0,readAt:new Date}))),l(0)}catch(e){console.error("Error marking all as read:",e)}},children:[(0,Fa.jsx)("i",{className:"bi bi-check-all me-1"}),"Mark All as Read"]}),(0,Fa.jsxs)("button",{className:"notifications-btn notifications-btn-outline",onClick:()=>e(-1),title:"Go back",children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-left me-1"}),"Back"]})]})]})})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"notifications-filters-card",children:(0,Fa.jsx)("form",{onSubmit:e=>{e.preventDefault(),c(1),j()},children:(0,Fa.jsxs)("div",{className:"row g-3",children:[(0,Fa.jsxs)("div",{className:"col-md-4",children:[(0,Fa.jsxs)("label",{className:"form-label fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-search me-1"}),"Search"]}),(0,Fa.jsxs)("div",{className:"input-group",children:[(0,Fa.jsx)("input",{type:"text",className:"form-control",placeholder:"Search notifications...",value:m,onChange:e=>h(e.target.value),style:{borderRadius:"10px 0 0 10px"}}),(0,Fa.jsx)("button",{className:"btn notifications-btn-primary",type:"submit",style:{borderRadius:"0 10px 10px 0"},children:(0,Fa.jsx)("i",{className:"bi bi-search"})})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsxs)("label",{className:"form-label fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-funnel me-1"}),"Type"]}),(0,Fa.jsxs)("select",{className:"form-select",value:p,onChange:e=>y("type",e.target.value),style:{borderRadius:"10px"},children:[(0,Fa.jsx)("option",{value:"",children:"All Types"}),(0,Fa.jsx)("option",{value:"checkout_reminder",children:"Checkout Reminder"}),(0,Fa.jsx)("option",{value:"auto_checkout",children:"Auto Checkout"}),(0,Fa.jsx)("option",{value:"overtime_alert",children:"Overtime Alert"}),(0,Fa.jsx)("option",{value:"system",children:"System"}),(0,Fa.jsx)("option",{value:"general",children:"General"})]})]}),(0,Fa.jsxs)("div",{className:"col-md-3",children:[(0,Fa.jsxs)("label",{className:"form-label fw-semibold",children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-1"}),"Status"]}),(0,Fa.jsxs)("select",{className:"form-select",value:f,onChange:e=>y("read",e.target.value),style:{borderRadius:"10px"},children:[(0,Fa.jsx)("option",{value:"",children:"All"}),(0,Fa.jsx)("option",{value:"false",children:"Unread"}),(0,Fa.jsx)("option",{value:"true",children:"Read"})]})]}),(0,Fa.jsx)("div",{className:"col-md-2 d-flex align-items-end",children:(0,Fa.jsxs)("button",{type:"button",className:"notifications-btn notifications-btn-outline w-100",onClick:()=>{h(""),x(""),b(""),c(1)},children:[(0,Fa.jsx)("i",{className:"bi bi-x-circle me-1"}),"Clear"]})})]})})})})}),(0,Fa.jsx)("div",{className:"row",children:(0,Fa.jsx)("div",{className:"col-12",children:(0,Fa.jsx)("div",{className:"notifications-main-card",children:(0,Fa.jsx)("div",{className:"card-body p-0",children:a?(0,Fa.jsxs)("div",{className:"text-center py-5",children:[(0,Fa.jsx)("div",{className:"spinner-border text-primary mb-3",role:"status",style:{width:"3rem",height:"3rem"},children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})}),(0,Fa.jsx)("h5",{className:"text-muted",children:"Loading notifications..."})]}):s.length>0?(0,Fa.jsxs)(Fa.Fragment,{children:[(0,Fa.jsx)("div",{className:"p-4 border-bottom bg-light",children:(0,Fa.jsxs)("div",{className:"form-check",children:[(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:v.length===s.length,onChange:()=>{v.length===s.length?g([]):g(s.map(e=>e._id))},style:{transform:"scale(1.2)"}}),(0,Fa.jsxs)("label",{className:"form-check-label fw-semibold ms-2",children:["Select All (",s.length," notifications)"]})]})}),(0,Fa.jsx)("div",{className:"list-group list-group-flush",children:s.map(e=>{return(0,Fa.jsx)("div",{className:"notifications-page-item "+(e.isRead?"":"unread"),children:(0,Fa.jsxs)("div",{className:"d-flex align-items-start p-4",children:[(0,Fa.jsx)("div",{className:"form-check me-3",children:(0,Fa.jsx)("input",{className:"form-check-input",type:"checkbox",checked:v.includes(e._id),onChange:()=>{return s=e._id,void g(e=>e.includes(s)?e.filter(e=>e!==s):[...e,s]);var s},style:{transform:"scale(1.2)"}})}),(0,Fa.jsx)("div",{className:`notification-icon ${e.type.replace("_","-")} me-3`,children:(0,Fa.jsx)("i",{className:w(e.type)})}),(0,Fa.jsxs)("div",{className:"flex-grow-1",children:[(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-start mb-2",children:[(0,Fa.jsxs)("h6",{className:"mb-0 fw-bold d-flex align-items-center gap-2",children:[e.title,!e.isRead&&(0,Fa.jsx)("span",{className:"notification-new-badge",children:"New"}),(a=e.priority,(0,Fa.jsx)("span",{className:`badge ${{urgent:"bg-danger",high:"bg-warning",medium:"bg-info",low:"bg-secondary"}[a]||"bg-secondary"} ms-2`,children:a}))]}),(0,Fa.jsxs)("div",{className:"d-flex gap-2",children:[!e.isRead&&(0,Fa.jsx)("button",{className:"btn btn-sm notifications-btn-outline",onClick:()=>(async e=>{try{await Ta(e),t(s=>s.map(s=>s._id===e?{...s,isRead:!0,readAt:new Date}:s)),l(e=>Math.max(0,e-1))}catch(s){console.error("Error marking notification as read:",s)}})(e._id),title:"Mark as read",children:(0,Fa.jsx)("i",{className:"bi bi-check"})}),(0,Fa.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this notification?"))try{await Ea(e),t(s=>s.filter(s=>s._id!==e));const a=s.find(s=>s._id===e);a&&!a.isRead&&l(e=>Math.max(0,e-1))}catch(a){console.error("Error deleting notification:",a)}})(e._id),title:"Delete notification",style:{borderRadius:"8px"},children:(0,Fa.jsx)("i",{className:"bi bi-trash"})})]})]}),(0,Fa.jsx)("p",{className:"mb-3 text-muted",style:{lineHeight:"1.5"},children:e.message}),(0,Fa.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,Fa.jsxs)("div",{className:"text-muted small",children:[(0,Fa.jsx)("i",{className:"bi bi-clock me-1"}),(0,Fa.jsx)("span",{className:"fw-medium",children:"Created:"})," ",N(e.createdAt),e.readAt&&(0,Fa.jsxs)("span",{className:"ms-3",children:[(0,Fa.jsx)("i",{className:"bi bi-check-circle me-1 text-success"}),(0,Fa.jsx)("span",{className:"fw-medium",children:"Read:"})," ",N(e.readAt)]})]}),(0,Fa.jsx)("span",{className:"badge bg-light text-dark px-3 py-2",style:{borderRadius:"20px"},children:e.type.replace("_"," ").toUpperCase()})]})]})]})},e._id);var a})}),d>1&&(0,Fa.jsx)("div",{className:"p-4 border-top bg-light",children:(0,Fa.jsx)("nav",{className:"notifications-pagination",children:(0,Fa.jsxs)("ul",{className:"pagination justify-content-center mb-0",children:[(0,Fa.jsx)("li",{className:"page-item "+(1===o?"disabled":""),children:(0,Fa.jsxs)("button",{className:"page-link",onClick:()=>c(o-1),disabled:1===o,children:[(0,Fa.jsx)("i",{className:"bi bi-chevron-left me-1"}),"Previous"]})}),Array.from({length:d},(e,s)=>s+1).map(e=>(0,Fa.jsx)("li",{className:"page-item "+(o===e?"active":""),children:(0,Fa.jsx)("button",{className:"page-link",onClick:()=>c(e),children:e})},e)),(0,Fa.jsx)("li",{className:"page-item "+(o===d?"disabled":""),children:(0,Fa.jsxs)("button",{className:"page-link",onClick:()=>c(o+1),disabled:o===d,children:["Next",(0,Fa.jsx)("i",{className:"bi bi-chevron-right ms-1"})]})})]})})})]}):(0,Fa.jsxs)("div",{className:"notifications-page-empty",children:[(0,Fa.jsx)("div",{className:"notifications-page-empty-icon",children:(0,Fa.jsx)("i",{className:"bi bi-bell-slash"})}),(0,Fa.jsx)("h4",{className:"text-muted mt-3 mb-2",children:"No notifications found"}),(0,Fa.jsx)("p",{className:"text-muted mb-4",children:m||p||f?"Try adjusting your search criteria or filters to find what you're looking for.":"You're all caught up! New notifications will appear here when they arrive."}),(m||p||f)&&(0,Fa.jsxs)("button",{className:"notifications-btn notifications-btn-primary",onClick:()=>{h(""),x(""),b(""),c(1)},children:[(0,Fa.jsx)("i",{className:"bi bi-arrow-clockwise me-2"}),"Clear Filters"]})]})})})})})]})})},Tl=()=>{const{user:e,isAuthenticated:s,isLoading:t}=Ya();if(t)return(0,Fa.jsx)("div",{className:"d-flex justify-content-center align-items-center min-vh-100",children:(0,Fa.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,Fa.jsx)("span",{className:"visually-hidden",children:"Loading..."})})});if(!s)return(0,Fa.jsx)(fe,{to:"/login",replace:!0});return(0,Fa.jsx)(fe,{to:"/dashboard",replace:!0})};const Pl=function(){return(0,Fa.jsx)(Ka,{children:(0,Fa.jsx)(Te,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Fa.jsx)("div",{className:"App",children:(0,Fa.jsxs)(ge,{children:[(0,Fa.jsx)(be,{path:"/login",element:(0,Fa.jsx)(an,{})}),(0,Fa.jsx)(be,{path:"/profile",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(Bi,{})})})}),(0,Fa.jsx)(be,{path:"/profile/edit",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(sl,{})})})}),(0,Fa.jsx)(be,{path:"/dashboard",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(tl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/departments",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(al,{})})})}),(0,Fa.jsx)(be,{path:"/admin/users",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(nl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/users/add",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(rl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/leave/live-status",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(ml,{})})})}),(0,Fa.jsx)(be,{path:"/admin/leave/work-hours",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(ul,{})})})}),(0,Fa.jsx)(be,{path:"/admin/leave/permissions",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(hl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/leave/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader","Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(cl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(pl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/structure",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(xl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/structure/new",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(fl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/structure/:id/edit",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(fl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/process",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(gl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/reimbursements",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(yl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/payroll/payslips",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-file-earmark-text me-2"}),"Payslip Management"]}),(0,Fa.jsx)("p",{children:"This section will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Generate individual and bulk payslips"}),(0,Fa.jsx)("li",{children:"PDF download and email distribution"}),(0,Fa.jsx)("li",{children:"Payslip templates and customization"}),(0,Fa.jsx)("li",{children:"Employee self-service access"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Coming Soon"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/admin/performance/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-warning",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-graph-up-arrow me-2"}),"Performance Management"]}),(0,Fa.jsx)("p",{children:"This module will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Goal setting and tracking"}),(0,Fa.jsx)("li",{children:"Performance review cycles"}),(0,Fa.jsx)("li",{children:"360-degree feedback"}),(0,Fa.jsx)("li",{children:"Appraisal management"}),(0,Fa.jsx)("li",{children:"Performance analytics"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/admin/training/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-book me-2"}),"Training Management"]}),(0,Fa.jsx)("p",{children:"This module will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Training program creation"}),(0,Fa.jsx)("li",{children:"Employee enrollment"}),(0,Fa.jsx)("li",{children:"Training calendar and scheduling"}),(0,Fa.jsx)("li",{children:"Certification tracking"}),(0,Fa.jsx)("li",{children:"Training effectiveness reports"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/admin/recruitment/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-secondary",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-person-plus me-2"}),"Recruitment Management"]}),(0,Fa.jsx)("p",{children:"This module will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Job posting and management"}),(0,Fa.jsx)("li",{children:"Application tracking system"}),(0,Fa.jsx)("li",{children:"Interview scheduling"}),(0,Fa.jsx)("li",{children:"Candidate evaluation"}),(0,Fa.jsx)("li",{children:"Offer letter generation"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/admin/reports/attendance",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(dl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/reports/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-dark",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-bar-chart me-2"}),"Reports & Analytics"]}),(0,Fa.jsx)("p",{children:"This module will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Employee reports and analytics"}),(0,Fa.jsx)("li",{children:"Attendance and leave reports"}),(0,Fa.jsx)("li",{children:"Performance dashboards"}),(0,Fa.jsx)("li",{children:"Payroll reports"}),(0,Fa.jsx)("li",{children:"Custom report builder"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/admin/settings/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-danger",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-gear me-2"}),"System Settings"]}),(0,Fa.jsx)("p",{children:"This module will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"General system configuration"}),(0,Fa.jsx)("li",{children:"User roles and permissions"}),(0,Fa.jsx)("li",{children:"Email templates and notifications"}),(0,Fa.jsx)("li",{children:"Approval workflows"}),(0,Fa.jsx)("li",{children:"Audit logs and security"}),(0,Fa.jsx)("li",{children:"Backup and restore"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/employee/attendance",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(ll,{})})})}),(0,Fa.jsx)(be,{path:"/change-password",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(ol,{})})})}),(0,Fa.jsx)(be,{path:"/notifications",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(Cl,{})})})}),(0,Fa.jsx)(be,{path:"/employee/payroll/payslip",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(bl,{})})})}),(0,Fa.jsx)(be,{path:"/employee/payroll/reimbursements",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(vl,{})})})}),(0,Fa.jsx)(be,{path:"/employee/permissions",element:(0,Fa.jsx)(Qa,{requiredRoles:["Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(Sl,{})})})}),(0,Fa.jsx)(be,{path:"/employee/regularization/request",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(Nl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/regularization",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(wl,{})})})}),(0,Fa.jsx)(be,{path:"/admin/regularization/:id",element:(0,Fa.jsx)(Qa,{requiredRoles:["Admin","Vice President","HR BP","HR Manager","HR Executive","Team Manager","Team Leader"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"Regularization Details"]}),(0,Fa.jsx)("p",{children:"This page will show detailed view of a regularization request including:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Request details and supporting documents"}),(0,Fa.jsx)("li",{children:"Approval workflow and history"}),(0,Fa.jsx)("li",{children:"Comments and feedback"}),(0,Fa.jsx)("li",{children:"Approve/Reject actions"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Coming Soon"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/employee/regularization/:id",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-info",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-eye me-2"}),"My Regularization Request"]}),(0,Fa.jsx)("p",{children:"This page will show your regularization request details including:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Request status and progress"}),(0,Fa.jsx)("li",{children:"Approval workflow"}),(0,Fa.jsx)("li",{children:"Comments from approvers"}),(0,Fa.jsx)("li",{children:"Supporting documents"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"Coming Soon"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/employee/regularization",element:(0,Fa.jsx)(Qa,{children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)(kl,{})})})}),(0,Fa.jsx)(be,{path:"/employee/*",element:(0,Fa.jsx)(Qa,{requiredRoles:["Employee"],children:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsxs)("div",{className:"alert alert-light border",children:[(0,Fa.jsxs)("h4",{children:[(0,Fa.jsx)("i",{className:"bi bi-person-circle me-2"}),"Employee Self-Service"]}),(0,Fa.jsx)("p",{children:"This section will include:"}),(0,Fa.jsxs)("ul",{children:[(0,Fa.jsx)("li",{children:"Personal profile management"}),(0,Fa.jsx)("li",{children:"Leave application and history"}),(0,Fa.jsx)("li",{children:"Attendance tracking"}),(0,Fa.jsx)("li",{children:"Training enrollment"}),(0,Fa.jsx)("li",{children:"Performance goals"})]}),(0,Fa.jsxs)("p",{className:"mb-0",children:[(0,Fa.jsx)("strong",{children:"Status:"})," ",(0,Fa.jsx)("span",{className:"badge bg-warning",children:"In Development"})]})]})})})})}),(0,Fa.jsx)(be,{path:"/",element:(0,Fa.jsx)(Tl,{})}),(0,Fa.jsx)(be,{path:"*",element:(0,Fa.jsx)(tn,{children:(0,Fa.jsx)("div",{className:"container-fluid",children:(0,Fa.jsx)("div",{className:"row justify-content-center",children:(0,Fa.jsx)("div",{className:"col-md-6",children:(0,Fa.jsx)("div",{className:"card",children:(0,Fa.jsxs)("div",{className:"card-body text-center",children:[(0,Fa.jsx)("i",{className:"bi bi-exclamation-triangle text-warning",style:{fontSize:"4rem"}}),(0,Fa.jsx)("h2",{className:"card-title mt-3",children:"Page Not Found"}),(0,Fa.jsx)("p",{className:"card-text text-muted",children:"The page you're looking for doesn't exist."}),(0,Fa.jsxs)("button",{className:"btn btn-primary",onClick:()=>window.location.href="/dashboard",children:[(0,Fa.jsx)("i",{className:"bi bi-house me-2"}),"Go to Dashboard"]})]})})})})})})})]})})})})};l.createRoot(document.getElementById("root")).render((0,Fa.jsx)(r.StrictMode,{children:(0,Fa.jsx)(Pl,{})}))})();
//# sourceMappingURL=main.baa3e15b.js.map